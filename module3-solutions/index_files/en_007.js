(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"+IeG":function(module,exports,e){var t=e("q8VC"),n=t.default?t.default:{},r,i=e("HdzH")(n);i.getLocale=function(){return"en"},module.exports=i},"+mb6":function(module,exports,e){"use strict";var t=e("tFhY");e("9FiV");var n=e("exfq");e("BnyC"),e("IPni"),e("tXzP"),e("TqgJ");var r=e("c6na"),_=e("VYij"),i={"prefix.css":"coursera-wysihtml5","prefix.data":"data-coursera-wysihtml5","toolbar.preview":!1,"toolbar.b":!1,"toolbar.strong":!0,"toolbar.i":!1,"toolbar.em":!0,"toolbar.modes":!0,"toolbar.image":!0,"toolbar.code":!1,"composer.class":t.defaultUserHtmlClass,"composer.default":"rich","composer.defaultPersist":!1,"composer.stylesheet":r.url.app_assets+"bundles/assess/lib/editor/editor.css","footer.html":"","footer.rich":"","footer.mode":"","transloadit.key":"05912e90e83346abb96c261bf458b615","transloadit.template":"a295b36c8fd44fbdb89e8eab06980081",parser:function parser(e){return e}},o=function makeEditor(e,t){var r=_(i).chain().clone().extend(t).value(),o=n.constructAndReturnElements(e,r),a=o.editor,s;return _(["keyup","change","paste","cut","focus","blur","change:composer"]).each(function(t){a.on(t,function(){e.val(a.getValue()),e.trigger(t)})}),a.on("toggleToSourceMode",function(){e.trigger("focus")}),o};module.exports=o},"1Nwa":function(module,exports,e){var t=e("uykG"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},"2rfX":function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("yhVA"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var r={SHORT_ANSWER_TYPE:"org.coursera.survey.question.ShortAnswerContent",SHORT_ANSWER_RESPONSE_TYPE:"org.coursera.survey.question.ShortAnswerResponse",MULTIPLE_CHOICE_TYPE:"org.coursera.survey.question.MultipleChoiceContent",MULTIPLE_CHOICE_RESPONSE_TYPE:"org.coursera.survey.question.MultipleChoiceResponse"},i=["pdf","doc","docx","xls","xlsx","ppt","pptx"],o=function getSurveyTranslations(){return{gradeQuestion:{prompt:(0,n.default)("I received a fair and accurate grade for my submission."),options:{answer1:(0,n.default)("Strongly disagree"),answer2:(0,n.default)("Disagree"),answer3:(0,n.default)("Somewhat disagree"),answer4:(0,n.default)("Undecided"),answer5:(0,n.default)("Somewhat agree"),answer6:(0,n.default)("Agree"),answer7:(0,n.default)("Strongly agree")}},reviewQuestion:{prompt:(0,n.default)("I received constructive criticism that points out ways I could improve my submission."),options:{answer1:(0,n.default)("Strongly disagree"),answer2:(0,n.default)("Disagree"),answer3:(0,n.default)("Somewhat disagree"),answer4:(0,n.default)("Undecided"),answer5:(0,n.default)("Somewhat agree"),answer6:(0,n.default)("Agree"),answer7:(0,n.default)("Strongly agree")}},openFeedbackQuestion:{prompt:(0,n.default)("Please tell us any other thoughts or feedback you have on this assignment.")}}};module.exports={ReviewSatisfactionSurvey:r,getSurveyTranslations:o,allowedFileTypesForInlineFeedback:i}},"3aJm":function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("iCc5")),r,i=_interopRequireDefault(e("FYw3")),o,a=_interopRequireDefault(e("mRg0")),s,l=_interopRequireWildcard(e("sbe7")),u,c=_interopRequireDefault(e("oYk5")),d,f=_interopRequireDefault(e("KDBu")),p,h=_interopRequireDefault(e("fL78")),m,g=_interopRequireDefault(e("CQyo")),v=e("v3Zo"),b=e("PUBa"),y,w=_interopRequireDefault(e("yhVA"));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var x=function(e){function PeerItemVerificationSubmission(){var t,r,o;(0,n.default)(this,PeerItemVerificationSubmission);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return t=r=(0,i.default)(this,e.call.apply(e,[this].concat(s))),r.state={isSubmitting:!1,isAgreementComplete:!1,confirmedPreview:!1,showPreviewModal:!1,fullName:"",hasError:!1},r.handleSubmit=function(){if(!r.props.isVerifiable)return void r.props.handleSubmit();r.setState({isSubmitting:!0,hasError:!1});var e=null;(0,b.fetchVerifiableId)().then(function(t){return e=t,(0,b.verifyAssignment)(e,r.state.fullName)}).then(function(){null!=e&&r.props.handleSubmit(e)}).catch(function(){return r.setState({isSubmitting:!1,hasError:!0})}).done()},r.handleClickPreview=function(){r.setState({showPreviewModal:!0})},r.handlePreviewModalClose=function(){r.props.handleSave(),r.setState({showPreviewModal:!1,confirmedPreview:!0}),(0,c.default)("html, body").animate({scrollTop:0},"slow")},r.onAgreementComplete=function(e){r.setState({isAgreementComplete:!0,fullName:e})},r.onAgreementIncomplete=function(){r.setState({isAgreementComplete:!1})},o=t,(0,i.default)(r,o)}return(0,a.default)(PeerItemVerificationSubmission,e),PeerItemVerificationSubmission.prototype.componentWillReceiveProps=function componentWillReceiveProps(e){var t=this.props.submissionAppState.submitState===v.SUBMITTING,n=e.submissionAppState.submitState===v.SUBMITTING;t&&!n?this.setState({isSubmitting:!1}):!t&&n&&this.setState({isSubmitting:!0})},PeerItemVerificationSubmission.prototype.render=function render(){var e=this.props,t=e.submissionAppState,n=e.lastSaveTime,r=e.handleSave,i=e.isVerifiable,o=e.computedItem,a=e.blockSubmit,s=this.state,u=s.isAgreementComplete,c=s.isSubmitting,d=s.hasError,p=(0,w.default)("Preview"),m=this.handleClickPreview;return this.state.confirmedPreview&&(p=(0,w.default)("Submit"),m=this.handleSubmit),l.createElement("div",{className:"rc-PeerItemVerificationSubmission",style:{marginTop:30}},i&&l.createElement(h.default,{onAgreementComplete:this.onAgreementComplete,onAgreementIncomplete:this.onAgreementIncomplete,isShownInsideModal:!1}),l.createElement(f.default,{lastSaveTime:n,isSaving:t.saveState===v.SAVING,isSubmitting:c,onSave:r,onSubmit:m,submitMessage:p,isSubmitDisabled:i&&!u||a,computedItem:o}),d&&l.createElement("div",{className:"align-right caption-text",style:{marginTop:12}},(0,w.default)("An error has occurred while submitting. Please try again.")),this.state.showPreviewModal&&l.createElement(g.default,{className:"rc-SubmissionPreviewModal",handleClose:this.handlePreviewModalClose,modalName:(0,w.default)("Ready to Submit?")},l.createElement("h3",{className:"headline-4-text title"},(0,w.default)("Ready to Submit?")),l.createElement("div",null,(0,w.default)("Great work! Before you submit, please take a moment to look over your work once more so that\n               you can get a preview of what it will look like to others who will be reviewing your work.")),l.createElement("div",{className:"horizontal-box align-items-right"},l.createElement("button",{className:"primary",onClick:this.handlePreviewModalClose},(0,w.default)("Preview")))))},PeerItemVerificationSubmission}(l.Component);module.exports=x},"3l+J":function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("iCc5")),r,i=_interopRequireDefault(e("FYw3")),o,a=_interopRequireDefault(e("mRg0")),s,l=_interopRequireWildcard(e("sbe7")),u,c=_interopRequireDefault(e("QgSF")),d,f=_interopRequireDefault(e("3aOx"));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e("i5JE");var p=function(e){function AssignmentSubmitEditView(){var t,r,o;(0,n.default)(this,AssignmentSubmitEditView);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return t=r=(0,i.default)(this,e.call.apply(e,[this].concat(s))),r.handleTitleChange=function(e){e.target instanceof HTMLInputElement&&r.props.updateSubmissionTitle(e.target.value)},o=t,(0,i.default)(r,o)}return(0,a.default)(AssignmentSubmitEditView,e),AssignmentSubmitEditView.prototype.render=function render(){var e=this,t=this.props,n=t.courseId,r=t.submission,i=t.submissionSchema,o=t.errorTree,a=t.isSubmitted,s=t.submissionAppState,u=s.saveState,d=s.submitState,p=s.showValidation,h=t.renderInlineNode,m="saving"===u||"submitting"===d||a;return l.createElement("div",{className:"rc-AssignmentSubmitEditView"},p&&l.createElement(f.default,{errorTree:o}),l.createElement("input",{className:"c-peer-review-submit-text-field bt3-form-control",type:"text",defaultValue:r.title,placeholder:"Give your project a descriptive title",onChange:this.handleTitleChange,disabled:m}),l.createElement("div",{className:"parts"},i.parts.map(function(t){var i=null;return i=r.parts&&r.parts[t.id]?r.parts[t.id]:r.invalidParts[t.id],l.createElement(c.default,{courseId:n,key:t.id,partId:t.id,submissionSchemaPart:t,submissionPart:i,update:e.props.updateSubmissionPartGenerator(t.id),blockSubmit:e.props.blockSubmitPartGenerator(t.id),disabled:m,errorTree:o&&o.children[t.id],showValidation:p,renderInlineNode:h})})))},AssignmentSubmitEditView}(l.Component);module.exports=p},"5xxS":function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("iCc5")),r,i=_interopRequireDefault(e("FYw3")),o,a=_interopRequireDefault(e("mRg0")),s,l,u,c=_interopRequireWildcard(e("sbe7")),d,f=_interopRequireDefault(e("VYij")),p,h=_interopRequireDefault(e("8cuT")),m=e("MnCE"),g,v=_interopRequireDefault(e("w/1P")),b,y=_interopRequireDefault(e("wO3E")),w,x=_interopRequireDefault(e("CLws")),S,E=_interopRequireDefault(e("Akn8"));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var C=(l=s=function(e){function SubmissionEditButton(){var t,r,o;(0,n.default)(this,SubmissionEditButton);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return t=r=(0,i.default)(this,e.call.apply(e,[this].concat(s))),r.state={showModal:!1},r.openModal=function(){r.setState({showModal:!0})},r.closeModal=function(){r.setState({showModal:!1})},o=t,(0,i.default)(r,o)}return(0,a.default)(SubmissionEditButton,e),SubmissionEditButton.prototype.componentWillReceiveProps=function componentWillReceiveProps(e){var t=this.props,n=t.hasLoaded,r=t.isSubmitted,i=t.computedItem;n&&r&&!e.isSubmitted&&(this.context.router.push(E.default.join(i.resourcePath,"submit")),this.closeModal())},SubmissionEditButton.prototype.render=function render(){var e=this.props,t=e.hasLoaded,n=e.canDelete,r=e.submissionId,i=e.computedItem,o=e.className,a=e.courseId,s=e.buttonMessage;if(!t)return null;return c.createElement("div",null,c.createElement("div",{className:(0,v.default)("rc-SubmissionEditButton",o)},c.createElement(y.default,{className:"button secondary",disabled:!n,onClick:this.openModal,trackingName:"edit_project"},s)),this.state.showModal&&c.createElement(x.default,{showModal:!0,computedItem:i,onModalClose:this.closeModal,submissionId:r,courseId:a}))},SubmissionEditButton}(c.Component),s.contextTypes={router:c.PropTypes.object},l);module.exports=(0,m.compose)((0,h.default)(["PeerPermissionsAndProgressesStore","CourseStore"],function(e){var t=e.PeerPermissionsAndProgressesStore,n=e.CourseStore,r,i,o;return{hasLoaded:"loaded"===t.getState().loadState,canDelete:(0,f.default)(t.getState().capabilities).contains("deleteSubmission"),isSubmitted:t.getState().isSubmitted,courseId:n.getCourseId()}}))(C)},"66YO":function(module,exports,e){var t,n;
/** @license jquery.transloadit2.js: Copyright (c) 2010 Felix Geisendörfer | MIT License: http://www.opensource.org/licenses/mit-license.php
 *
 * Fork this on Github: http://github.com/transloadit/jquery-sdk
 *
 * Transloadit servers allow browsers to cache jquery.transloadit2.js for 1 hour.
 * keep this in mind when rolling out fixes.
 */t=[e("oYk5"),e("wr4V"),e("Wvy5")],void 0===(n=function($){var e="https:"==document.location.protocol?"https://":"http://",t={service:e+"api2.transloadit.com/",assets:e+"assets.transloadit.com/",onPick:function(){},onStart:function(){},onProgress:function(){},onUpload:function(){},onResult:function(){},onCancel:function(){},onError:function(){},onSuccess:function(){},interval:2500,pollTimeout:8e3,poll404Retries:15,pollConnectionRetries:3,wait:!1,processZeroFiles:!0,autoSubmit:!0,modal:!0,exclude:"",fields:!1,params:null,debug:!0},n=!1;function Uploader(){this.assemblyId=null,this.instance=null,this.documentTitle=null,this.timer=null,this._options={},this.uploads=[],this.results={},this.ended=null,this.pollStarted=null,this.pollRetries=0,this.seq=0,this.started=!1,this.assembly=null,this.params=null,this.bytesReceivedBefore=0,this.lastPoll=0,this.$params=null,this.$form=null,this.$files=null,this.$fileClones=null,this.$iframe=null,this.$modal=null}$.fn.transloadit=function(){var e=Array.prototype.slice.call(arguments),t,n,r;if((1==e.length&&"object"==typeof e[0]||void 0===e[0])&&e.unshift("init"),"init"==(t=e.shift())?(n=new Uploader,e.unshift(this),this.data("transloadit.uploader",n)):n=this.data("transloadit.uploader"),!n)throw new Error("Element is not initialized for transloadit!");return void 0===(r=n[t].apply(n,e))?this:r},Uploader.prototype.init=function(e,n){this.$form=e,this.options($.extend({},t,n||{}));var r=this;e.find('input[type="file"]').on("change",function(){return r.validate(),r.detectFileInputs(),r.checkFileTypes(),r._options.processZeroFiles||0!==r.$files.length?(r._options.onPick(),r.getBoredInstance()):r.submitForm(),!1}),this.includeCss()},Uploader.prototype.getBoredInstance=function(){var e=this;this.instance=null,$.jsonp({url:this._options.service+"instances/bored",timeout:e._options.pollTimeout,callbackParameter:"callback",success:function(t){if(t.error)return e.ended=!0,e.renderError(t),void e._options.onError(t);e.instance=t.api2_host,e.start()},error:function(t,n){e.ended=!0;var r={error:"CONNECTION_ERROR",message:"There was a problem connecting to the upload server",reason:"JSONP request status: "+n};e.renderError(r),e._options.onError(r)}}),this._options.modal&&this.showModal()},Uploader.prototype.start=function(){var t=this;this.started=!1,this.ended=!1,this.bytesReceivedBefore=0,this.pollRetries=0,this.seq=0,this.uploads=[],this.results={},this.assemblyId=this.uuid(),this.$fileClones=$().not(document),this.$files.each(function(){var e=$(this).clone(!0);t.$fileClones=t.$fileClones.add(e),e.insertAfter(this)}),this.$iframe=$('<iframe id="transloadit-'+this.assemblyId+'" name="transloadit-'+this.assemblyId+'"/>').appendTo("body").hide(),this.$uploadForm=$('<form enctype="multipart/form-data" />').attr("action",e+this.instance+"/assemblies/"+this.assemblyId+"?redirect=false").attr("target","transloadit-"+this.assemblyId).attr("method","POST").append(this.$files).appendTo("body").hide();var n="[name=params], [name=signature]";!0===this._options.fields?n="*":"string"==typeof this._options.fields&&(n+=", "+this._options.fields);var r=this.clone(this.$form.find(":input[type!=file]").filter(n));this._options.params&&!this.$params&&(r=r.add('<input name="params" value=\''+JSON.stringify(this._options.params)+"'>")),r.prependTo(this.$uploadForm),this.$uploadForm.submit(),this.lastPoll=+new Date,setTimeout(function(){t._poll()},300)},Uploader.prototype.clone=function(e){for(var t=e.clone(),n=e.filter("textarea"),r=t.filter("textarea"),i=0,o=n.length;i<o;++i)$(r[i]).val($(n[i]).val());return t},Uploader.prototype.checkFileTypes=function(){var e=this,t=e.$files.attr("accept");if(!t)return!0;"video/*"==t&&(t="video/mp4,video/m4v,video/flv,video/avi,video/mpg,video/mov,video/wmv,video/h264,video/mkv"),"image/*"==t&&(t="image/png,image/jpeg,image/gif,image/jpg,image/ico"),t=t.split(","),e.$files=e.$files.filter(function(){for(var n=this.value.split(".").pop().toLowerCase(),r=0;r<t.length;r++)if(n==t[r].split("/")[1])return!0;return e._options.onError("Sorry, we don't accept "+n+" files."),!1})},Uploader.prototype.detectFileInputs=function(){var e=this.$form.find("input[type=file]").not(this._options.exclude);this._options.processZeroFiles||(e=e.filter(function(){return""!==this.value})),this.$files=e},Uploader.prototype.validate=function(){if(this._options.params)this.params=this._options.params;else{var e=this.$form.find("input[name=params]");if(!e.length)return void alert("Could not find input[name=params] in your form.");try{this.params=JSON.parse(e.val())}catch(e){return void alert("Error: input[name=params] seems to contain invalid JSON.")}}if(this.params.redirect_url)this.$form.attr("action",this.params.redirect_url);else if(this._options.autoSubmit&&this.$form.attr("action")==this._options.service+"assemblies")return void alert("Error: input[name=params] does not include a redirect_url");this.$params=e},Uploader.prototype._poll=function(t){var n=this;if(this.ended)return;$.browser.mozilla&&!this.documentTitle&&(this.documentTitle=document.title,document.title="Loading..."),this.pollStarted=+new Date,$.jsonp({url:e+this.instance+"/assemblies/"+this.assemblyId+(t||"?seq="+this.seq),timeout:n._options.pollTimeout,callbackParameter:"callback",success:function(e){if(n.ended)return;if(n.assembly=e,"ASSEMBLY_NOT_FOUND"==e.error){if(n.pollRetries++,n.pollRetries>n._options.poll404Retries)return document.title=n.documentTitle,n.ended=!0,n.renderError(e),void n._options.onError(e);return void setTimeout(function(){n._poll()},400)}if(e.error)return n.ended=!0,n.renderError(e),document.title=n.documentTitle,void n._options.onError(e);n.seq=e.last_seq,n.started||(n.started=!0,n._options.onStart(e)),n.pollRetries=0;var t="ASSEMBLY_UPLOADING"==e.ok,r="ASSEMBLY_EXECUTING"==e.ok,i="ASSEMBLY_CANCELED"==e.ok,o="ASSEMBLY_COMPLETED"==e.ok;n._options.onProgress(e.bytes_received,e.bytes_expected,e);for(var a=0;a<e.uploads.length;a++)n._options.onUpload(e.uploads[a],e),n.uploads.push(e.uploads[a]);for(var s in e.results){n.results[s]=n.results[s]||[];for(var a=0;a<e.results[s].length;a++)n._options.onResult(s,e.results[s][a],e),n.results[s].push(e.results[s][a])}if(i)return n.ended=!0,document.title=n.documentTitle,void n._options.onCancel(e);if(n.renderProgress(e),o||!n._options.wait&&r)return n.ended=!0,document.title=n.documentTitle,e.uploads=n.uploads,e.results=n.results,n._options.onSuccess(e),n._options.modal&&n.cancel(),void n.submitForm();var l=n.pollStarted-+new Date,u=l<n._options.interval?n._options.interval:l;n.timer=setTimeout(function(){n._poll()},u),n.lastPoll=+new Date},error:function(e,t){if(n.ended)return;if(n.pollRetries++,n.pollRetries>n._options.pollConnectionRetries){document.title=n.documentTitle,n.ended=!0;var r={error:"CONNECTION_ERROR",message:"There was a problem connecting to the upload server",reason:"JSONP request status: "+t};return n.renderError(r),void n._options.onError(r)}setTimeout(function(){n._poll()},350)}})},Uploader.prototype.stop=function(){document.title=this.documentTitle,this.ended=!0},Uploader.prototype.cancel=function(){if(!this.ended){var e=this;this.$params&&this.$params.prependTo(this.$form),this.$fileClones.each(function(t){var n=$(e.$files[t]),r=$(this);n.insertAfter(r),r.remove()}),clearTimeout(e.timer),this._poll("?method=delete"),"Microsoft Internet Explorer"==navigator.appName&&this.$iframe[0].contentWindow.document.execCommand("Stop"),setTimeout(function(){e.$iframe.remove()},500)}if(!this._options.modal)return;$.mask.close(),this.$modal.remove()},Uploader.prototype.submitForm=function(){this.$fileClones,null!==this.assembly&&$("<textarea/>").attr("name","transloadit").text(JSON.stringify(this.assembly)).prependTo(this.$form).hide(),this._options.autoSubmit&&this.$form.unbind("submit.transloadit").submit()},Uploader.prototype.showModal=function(){this.$modal=$('<div id="transloadit"><div class="content"><a href="#close" class="close"></a><p class="status"></p><div class="progress"><label>starting upload ...</label><span></span></div><p class="error"></p></div></div>').appendTo("body"),$.extend(this.$modal,{$status:this.$modal.find(".status"),$content:this.$modal.find(".content"),$close:this.$modal.find(".close"),$label:this.$modal.find("label"),$progress:this.$modal.find(".progress"),$progressSpan:this.$modal.find(".progress span"),$error:this.$modal.find(".error")});var e=this;this.$modal.$close.click(function(){e.cancel()}),this.$modal.$error.hide();var e=this,t=this.$modal.expose({api:!0,maskId:"transloadit_expose",opacity:.9,loadSpeed:250,closeOnEsc:!1,closeOnClick:!1});this.$modal.$close.click(function(){return e.cancel(),!1})},Uploader.prototype.renderError=function(e){if(!this._options.modal)return;this.$modal.$content.addClass("content-error"),this.$modal.$progress.hide();var t=this._options.debug?e.error+": "+e.message+"<br><br>"+(e.reason||""):"There was an internal error, please try your upload again.";this.$modal.$error.html(t).show()},Uploader.prototype.renderProgress=function(e){if(!this._options.modal)return;var t=e.bytes_received/e.bytes_expected,n=e.bytes_received-this.bytesReceivedBefore,r=+new Date-this.lastPoll,i=1==t?1e3:2*this._options.interval,o=1==t?"processing ...":(e.bytes_received/1024/1024).toFixed(2)+" MB / "+(e.bytes_expected/1024/1024).toFixed(2)+" MB ("+(n/1024/(r/1e3)).toFixed(1)+" kB / sec)";this.bytesReceivedBefore=e.bytes_received,this.$modal.$label.text(o),this.$modal.$progressSpan.stop().animate({width:100*t+"%"},i,"easeOutCubic")},Uploader.prototype.includeCss=function(){if(n||!this._options.modal)return;n=!0,$('<link rel="stylesheet" type="text/css" href="'+this._options.assets+'css/transloadit2.css" />').appendTo("head")},Uploader.prototype.uuid=function(){var e="",t;for(t=0;t<32;t++)e+=Math.floor(16*Math.random()).toString(16);return e},Uploader.prototype.options=function(e){if(0==arguments.length)return this._options;$.extend(this._options,e)},Uploader.prototype.option=function(e,t){if(1==arguments.length)return this._options[e];this._options[e]=t}}.apply(exports,t))||(module.exports=n)},"6ilM":function(module,exports,e){},"7Z6A":function(module,exports,e){var t=e("men7"),n=t.default?t.default:{},r,i=e("HdzH")(n);i.getLocale=function(){return"en"},module.exports=i},"83gG":function(module,exports,e){var t,n,r,i;r=window,i=function(e,t,n){var r=function template(n){var r=[],i,o=n||{};return function(t,n){r.push('<button data-wysihtml5-custom-command="link" type="button" unselectable="on" title="Insert link"'+e.cls([t+"-toolbar-item"],[!0])+'><i class="cif-link"></i> '+e.escape(null==(i=n("Link"))?"":i)+"</button>")}.call(this,"prefix"in o?o.prefix:"undefined"!=typeof prefix?prefix:void 0,"_t"in o?o._t:void 0!==t?t:void 0),r.join("")};return function(e){return e&&"_t"in e&&(t=e._t.merge(t)),r(e)}},t=[e("xgPa"),e("iB6e")],void 0===(n=function(e,t){var n;return i(e,t,n)}.apply(exports,t))||(module.exports=n)},"84XT":function(module,exports,e){var t=e("C2HT"),n=t.default?t.default:{},r,i=e("HdzH")(n);i.getLocale=function(){return"en"},module.exports=i},"8Kb5":function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("iCc5")),r,i=_interopRequireDefault(e("FYw3")),o,a=_interopRequireDefault(e("mRg0")),s,l=_interopRequireWildcard(e("sbe7")),u,c=_interopRequireDefault(e("8cuT")),d,f=_interopRequireDefault(e("VYij")),p,h=_interopRequireDefault(e("jsrg")),m,g=_interopRequireDefault(e("L1vm")),v=e("nLAy"),b,y=_interopRequireDefault(e("dAof")),w,x=_interopRequireDefault(e("JkvR")),S,E=_interopRequireDefault(e("kFiP")),C,T=_interopRequireDefault(e("y6VL")),R,N=_interopRequireDefault(e("talK")),A,k=_interopRequireDefault(e("sQ/U")),I,P=_interopRequireDefault(e("uxKl"));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var D=function(e){function PeerItemSubmit(){return(0,n.default)(this,PeerItemSubmit),(0,i.default)(this,e.apply(this,arguments))}return(0,a.default)(PeerItemSubmit,e),PeerItemSubmit.prototype.render=function render(){var e=this.props,t=e.isSubmitted,n=e.latestSubmissionId,r=e.computedItem,i,o=e.loadedPeerViewSubmissionId!==n;return l.createElement(T.default,{isSubmitted:t,editView:l.createElement(N.default,{computedItem:r}),submittedView:o?l.createElement(x.default,{className:"rc-PeerItemSubmit"}):l.createElement(E.default,{computedItem:r})})},PeerItemSubmit}(l.Component),O=f.default.compose(g.default.createTrackedContainer(function(){return{namespace:{page:"peer_review_my_project"}}}),(0,c.default)(["CourseStore","PeerViewSubmissionStore","PeerPermissionsAndProgressesStore"],function(e,t){var n=e.CourseStore,r=e.PeerViewSubmissionStore,i=e.PeerPermissionsAndProgressesStore,o=t.computedItem;return{isPeerProgressesLoaded:"loaded"===i.getState().loadState,loadedPeerViewSubmissionId:r.getState().submissionId,isSubmitted:i.getState().isSubmitted,latestSubmissionId:i.getState().latestSubmissionId,courseId:n.getCourseId()}}),(0,h.default)(function(e){var t;return e.isPeerProgressesLoaded},l.createElement(x.default,{className:"rc-PeerItemSubmit"})),(0,y.default)(function(e,t){var n=t.computedItem,r=t.courseId,i=t.isSubmitted,o=t.latestSubmissionId,a=t.loadedPeerViewSubmissionId,s;i&&o&&(a!==o&&e.executeAction(v.loadSubmission,{userId:k.default.get().id,courseId:r,itemId:n.id,submissionId:o}))}))(D);module.exports=O},"9FiV":function(module,exports,e){"use strict";var t,n,r,i;r=window,i=function init($,e,t,n,r){return e.commands.code={exec:function exec(t){var n=this.state(t);if(n)t.selection.executeAndRestore(function(){var t=n.querySelector("code");e.dom.replaceWithChildNodes(n),t&&e.dom.replaceWithChildNodes(t)});else{var r=t.selection.getRange(),i=r.extractContents(),o=t.doc.createElement("code");(n=t.doc.createElement("pre")).appendChild(o),o.appendChild(i),r.insertNode(n),t.selection.selectNode(n);var a=document.createElement("br");$(a).insertAfter(n)}},state:function state(t){var n=t.selection.getSelectedNode();return e.dom.getParentElement(n,{nodeName:"CODE"})&&e.dom.getParentElement(n,{nodeName:"PRE"})}},t.defaults=$.extend(t.defaults,{"toolbar.code":!0}),t.plugin("code",function(e,i,o,a){if(a["toolbar.code"]){var s=$(n({_t:r,prefix:a["prefix.css"]}));t.insertIntoLeftToolbar(i,s,6)}}),t},t=[e("oYk5"),e("qIWe"),e("exfq"),e("dUKX"),e("P+jP")],void 0===(n=function($,e,t,n,r){return i($,e,t,n,r)}.apply(exports,t))||(module.exports=n)},A94q:function(module,exports,e){"use strict";exports.default={"ar":true,"de":true,"es":true,"fr":true,"ja":true,"ko":true,"pseudo":true,"pt":true,"ru":true,"tr":true,"zh":true,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":true}},"B2B+":function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("8cuT")),r,i=_interopRequireDefault(e("VXRf")),o,a=_interopRequireDefault(e("VYij")),s,l=_interopRequireDefault(e("jsrg")),u,c=_interopRequireDefault(e("Nw0Z")),d,f=_interopRequireDefault(e("dPJa"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}module.exports=a.default.compose((0,n.default)(["PeerPermissionsAndProgressesStore"],function(e,t){var n=e.PeerPermissionsAndProgressesStore;return{hasLoaded:"loaded"===n.getState().loadState,capabilitiesWithReasons:n.getState().capabilitiesWithReasons}}),(0,l.default)(function(e){return e.hasLoaded}),(0,i.default)(function(e){var t=!1,n=e.capabilitiesWithReasons.viewReviewSchema,r;return null!=n&&(t=n.isAllowed&&"privilegedRole"===n.reason),{criteria:(0,c.default)(e.reviewSchema).getPartsForSubmissionSchemaPart(e.partId),privilegedRoleViewReviewSchema:t}}))(f.default)},BnyC:function(module,exports,e){"use strict";var t,n,r,i,o,a;r=window,i=function findLatexRegions(e){for(var t=/\${2}/g,n=[],r={},i=t.exec(e);i;)r.start?(r.end=i.index,r.text=e.substring(r.start,r.end),n.push(r),r={}):r.start=i.index+"$$".length,i=t.exec(e);return n},o=function regionForPosition(e,t){for(var n,r=0;n=t[r];r++)if(n.start<=e&&n.end>=e)return n;return null},a=function init($,_,e,t,n,r,a,s,l,u){var c=function mathEditor(e,t,n,r,a,s){n=[],r.val(""),a.html("");var l=e.composer.selection.getBookmark();if(l){if(3===l.startContainer.nodeType){n=i(l.startContainer.textContent);var u=o(l.startOffset,n);u&&(r.val(u.text),r.trigger("keyup"))}caretBookmark=l}s.open()},d=_.debounce(t.render,200);return n.defaults=$.extend(n.defaults,{"toolbar.latex":!1}),n.plugin("latex",function(i,u,f,p){if(p["toolbar.latex"]){var h=$(r({_t:a,prefix:p["prefix.css"]}));n.insertIntoLeftToolbar(u,h,100),u.find("."+p["prefix.css"]+"-toolbar-modals").append(s({_t:l,prefix:p["prefix.css"]}));var m=u.find("[data-wysihtml5-modal-latex]"),g=e(m),v=m.find("[name=latex]"),b=m.find(".coursera-wysihtml5-latex-preview"),y,w=[];i.on("preview",function(e){t.render(e)}),v.on("keyup",function(){b.text("$$"+v.val()+"$$"),d(b[0])}),v.trigger("keyup"),g.on("open",function(){v.focus()}),g.on("close",function(){i.currentView.element.focus()}),m.find("form").on("submit",function(e){var t,n,r,a,s,l,u;e.preventDefault(),i.currentView.element.focus(),y||(y=i.composer.selection.getBookmark()),i.composer.selection.setBookmark(y);var c=o(y.startOffset,w);c?(n=c.start,r=c.end,t=!1):(r=n=y.startOffset,t=!0),a=v.val(),t&&(a="$$"+a+"$$"),3===y.startContainer.nodeType?(s=y.startContainer.textContent.substring(0,n),l=y.startContainer.textContent.substring(r),y.startContainer.textContent=s+a+l):(u=document.createTextNode(a),y.insertNode(u)),y=null,i.fire("change").fire("change:composer")}),u.find("."+p["prefix.css"]+"-toolbar-latex").on("click",function(e){$(this).hasClass("wysihtml5-command-active")||u.hasClass("wysihtml5-commands-disabled")||c(i,u,w,v,b,g)})}}),n},t=[e("oYk5"),e("VYij"),e("r9wp"),e("m710"),e("exfq"),e("qO+6"),e("7Z6A"),e("ufF/"),e("Mxyi"),e("v0XS")],void 0===(n=function($,_,e,t,n,r,i,o,s,l){return a($,_,e,t,n,r,i,o,s,l)}.apply(exports,t))||(module.exports=n)},C1Du:function(module,exports,e){},C2HT:function(module,exports,e){"use strict";exports.default={"ar":true,"de":true,"es":true,"fr":true,"ja":true,"ko":true,"pseudo":true,"pt":true,"ru":true,"tr":true,"zh":true,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":true}},C6SX:function(module,exports,e){var t=e("YTO1"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},CLJX:function(module,exports,e){var t,n,r,i;r=window,i=function(e,t,n){var r=function template(n){var r=[],i,o=n||{};return function(t,n){r.push("<div"+e.cls([t+"-footer-html"],[!0])+'><div style="float:left;">'+e.escape(null==(i=n("Allowed tags:"))?"":i)+' <span style="font-family:monospace">'+(null==(i=n("&lt;b&gt;, &lt;i&gt;, &lt;a&gt;, &lt;p&gt;, &lt;br&gt;, &lt;ul&gt;, &lt;ol&gt;, &lt;li&gt;"))?"":i)+'</span>&nbsp;&nbsp;<a href="javascript:void(0);" data-wysihtml5-link="help">'+e.escape(null==(i=n("Help"))?"":i)+'</a></div><div style="float:right;"><a href="javascript:void(0);" title="auto format and indent your HTML source code" data-wysihtml5-link="format">'+e.escape(null==(i=n("Auto-format HTML"))?"":i)+'</a></div><div data-wysihtml5-modal-image="data-wysihtml5-modal-image"'+e.attr("data-modal-overlay-class",t+"-overlay",!0,!1)+' role="dialog" aria-label="Learn HTML" tabindex="-1" class="modal hide"><div class="modal-body"><p>'+e.escape(null==(i=n("HTML is the markup language that all webpages are written in."))?"":i)+"\n"+e.escape(null==(i=n("You can either use the rich editor or the HTML editor here, whichever you prefer."))?"":i)+"</p><p>"+e.escape(null==(i=n('To use it, you write your content and surround parts of it in "tags" that'))?"":i)+"\n"+e.escape(null==(i=n("tell the browser what it is. For example:"))?"":i)+'</p><table style="margin-bottom:0px;" class="table table-bordered"><thead><tr><th>'+e.escape(null==(i=n("HTML"))?"":i)+"</th><th>"+e.escape(null==(i=n("Output"))?"":i)+"</th></tr></thead><tbody><tr><td>"+(null==(i=n("The dugong (&lt;i&gt;Dugong dugon&lt;/i&gt;) is a &lt;b&gt;large&lt;/b&gt; marine mammal"))?"":i)+"</td><td>"+(null==(i=n("The dugong (<i>Dugong dugon</i>) is a <b>large</b> marine mammal"))?"":i)+"</td></tr><tr><td>"+(null==(i=n("Imagine all the unicorns &lt;br&gt; Living life in peace"))?"":i)+"</td><td>"+(null==(i=n("Imagine all the unicorns <br>Living life in peace"))?"":i)+"</td></tr><tr><td>"+(null==(i=n("&lt;ul&gt;"))?"":i)+"\n"+(null==(i=n("<br>&lt;li&gt;pineapples&lt;/li&gt;"))?"":i)+"\n"+(null==(i=n("<br>&lt;li&gt;peanutbutter&lt;/li&gt;"))?"":i)+"\n"+(null==(i=n("<br>&lt;/ul&gt;"))?"":i)+"</td><td>"+(null==(i=n("<ul><li>pineapples</li><li>peanut butter</li></ul>"))?"":i)+'</td></tr></tbody></table></div><div class="modal-footer"><button type="button" data-modal-close="data-modal-close" style="margin-right:10px;" class="btn">'+e.escape(null==(i=n("Got it, thanks!"))?"":i)+"</button></div></div></div>")}.call(this,"prefix"in o?o.prefix:"undefined"!=typeof prefix?prefix:void 0,"_t"in o?o._t:void 0!==t?t:void 0),r.join("")};return function(e){return e&&"_t"in e&&(t=e._t.merge(t)),r(e)}},t=[e("xgPa"),e("zU4u")],void 0===(n=function(e,t){var n;return i(e,t,n)}.apply(exports,t))||(module.exports=n)},CLws:function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("iCc5")),r,i=_interopRequireDefault(e("FYw3")),o,a=_interopRequireDefault(e("mRg0")),s,l,u,c=_interopRequireWildcard(e("sbe7")),d,f=_interopRequireDefault(e("sQ/U")),p,h=_interopRequireDefault(e("CQyo")),m,g=_interopRequireDefault(e("wO3E")),v=e("ih6J"),b,y=_interopRequireDefault(e("yhVA"));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e("JOPA");var w=(l=s=function(e){function SubmissionDeleteModal(){var t,r,o;(0,n.default)(this,SubmissionDeleteModal);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return t=r=(0,i.default)(this,e.call.apply(e,[this].concat(s))),r.state={deletionInProgress:!1},r.handleSubmissionDelete=function(){var e=r.props,t=e.submissionId,n=e.computedItem.id,i=e.courseId,o=f.default.get().id;r.setState({deletionInProgress:!0}),r.context.executeAction(v.resetSubmission,{itemId:n,submissionId:t,userId:o,courseId:i})},o=t,(0,i.default)(r,o)}return(0,a.default)(SubmissionDeleteModal,e),SubmissionDeleteModal.prototype.render=function render(){return this.props.showModal?c.createElement(h.default,{className:"rc-SubmissionDeleteModal",handleClose:this.props.onModalClose,modalName:(0,y.default)("Have you reviewed your feedback?")},c.createElement("h3",{className:"headline-4-text title"},(0,y.default)("Have you reviewed your feedback?")),c.createElement("p",null,(0,y.default)("\n              Your feedback on this submission will be deleted when you start editing your project. You can resubmit\n              your project for feedback when you finish editing.\n            ")),c.createElement("div",{className:"c-modal-action-bar"},c.createElement(g.default,{className:"passive",onClick:this.props.onModalClose,trackingName:"edit_project_cancel"},(0,y.default)("Cancel")),c.createElement("button",{disabled:this.state.deletionInProgress,className:"primary submission-button",onClick:this.handleSubmissionDelete},this.state.deletionInProgress?(0,y.default)("Loading..."):(0,y.default)("Edit my submission")))):null},SubmissionDeleteModal}(c.Component),s.contextTypes={executeAction:c.PropTypes.func},l);module.exports=w},Di88:function(module,exports,e){var t=e("Kqlr"),n=t.default?t.default:{},r,i=e("HdzH")(n);i.getLocale=function(){return"en"},module.exports=i},Dyy4:function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.richTextBlocks=exports.EMPTY_CML=void 0,exports.getImageUploadOptions=getImageUploadOptions;var t,n=_interopRequireDefault(e("PGBY"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var r=exports.EMPTY_CML={typeName:"cml",definition:{dtdId:"assess/1",value:"<co-content><text></text></co-content>"}};function getImageUploadOptions(e,t){return{context:{courseId:e,itemId:t},pendingAssetCreation:{assetType:"image",typeName:"pending",tags:[]},assetCreationUrl:"/api/onDemandPeerAssetCreationAttempts.v1"}}var i=exports.richTextBlocks=[n.default.Bold,n.default.Italic,n.default.Underline,n.default.Divider,n.default.Link,n.default.Unlink,n.default.OrderedList,n.default.UnorderedList,n.default.Code];exports.default={getImageUploadOptions:getImageUploadOptions,richTextBlocks:i}},EbrD:function(module,exports,e){"use strict";exports.default={"ar":true,"de":true,"es":true,"fr":true,"ja":true,"ko":true,"pseudo":true,"pt":true,"ru":true,"tr":true,"zh":true,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":true}},F6wr:function(module,exports,e){},F9Cc:function(module,exports,e){var t,n,r,i;r=window,i=function(e,t,n){var r=function template(n){var r=[],i,o=n||{};return function(t,n){r.push("<div"+e.cls([t+"-footer-markdown"],[!0])+'><div style="float:left;">'+(null==(i=n('Now in <a href="http://daringfireball.net/projects/markdown/syntax" target="_blank">Markdown</a> mode.'))?"":i)+'</div><div style="float:right;"></div></div>')}.call(this,"prefix"in o?o.prefix:"undefined"!=typeof prefix?prefix:void 0,"_t"in o?o._t:void 0!==t?t:void 0),r.join("")};return function(e){return e&&"_t"in e&&(t=e._t.merge(t)),r(e)}},t=[e("xgPa"),e("fd/V")],void 0===(n=function(e,t){var n;return i(e,t,n)}.apply(exports,t))||(module.exports=n)},Gmd3:function(module,exports,e){var t=e("A94q"),n=t.default?t.default:{},r,i=e("HdzH")(n);i.getLocale=function(){return"en"},module.exports=i},IIqh:function(module,exports,e){(function(t,module){var n,r;(function(){var i,o,a,s,l,u,c,d,f,p,h,m,g,v={}.hasOwnProperty,b=this,h;i={absolute:!1,base:"undefined"!=typeof window&&null!==window?window.document.baseURI:"file://"+t.cwd(),debug:!1,inline:!1},a=this?this.md:null,l={"\\\\":"\\\\","\\[":"\\[","\\]":"\\]",">":"\\>",_:"\\_","\\*":"\\*","`":"\\`","#":"\\#","([0-9])\\.(\\s|$)":"$1\\.$2","©":"(c)","®":"(r)","™":"(tm)"," ":" ","·":"\\*"," ":" "," ":" "," ":" ","‘":"'","’":"'","“":'"',"”":'"',"…":"...","–":"--","—":"---"},u=/(display|visibility)\s*:\s*[a-z]+/gi,c=/(none|hidden)\s*$/i,d=/^(APPLET|AREA|AUDIO|BUTTON|CANVAS|DATALIST|EMBED|HEAD|INPUT|MAP|MENU|METER|NOFRAMES|NOSCRIPT|OBJECT|OPTGROUP|OPTION|PARAM|PROGRESS|RP|RT|RUBY|SCRIPT|SELECT|STYLE|TEXTAREA|TITLE|VIDEO)$/,f=/^(ADDRESS|ARTICLE|ASIDE|DIV|FIELDSET|FOOTER|HEADER|NAV|P|SECTION)$/,s=function(){for(p in g={},l){if(!v.call(l,p))continue;g[p]=new RegExp(p,"g")}return g}(),m=function(e,t,n){var r,i;if(null==e&&(e=""),null==t&&(t=0),null==n&&(n=" "),!n)return e;for(r=i=0;0<=t?i<t:i>t;r=0<=t?++i:--i)e=n+e;return e},o=function(){function HtmlParser(t,n){var r,o;for(p in this.html=null!=t?t:"",this.options=null!=n?n:{},this.atLeft=this.atNoWS=this.atP=!0,this.buffer="",this.exceptions=[],this.order=1,this.listDepth=0,this.inCode=this.inPre=this.inOrderedList=!1,this.last=null,this.left="\n",this.links=[],this.linkMap={},this.unhandled={},this.tableColumns=[],this.tableDepth=0,"object"!=typeof this.options&&(this.options={}),i){if(!v.call(i,p))continue;r=i[p],void 0===this.options[p]&&(this.options[p]=r)}this.win="undefined"!=typeof window&&null!==window?window:null,null==this.win&&(o=e(!function webpackMissingModule(){var e=new Error("Cannot find module 'jsdom'");throw e.code="MODULE_NOT_FOUND",e}()).jsdom(null,null,{features:{FetchExternalResources:!1},url:this.options.base}),this.win=o.createWindow()),null==this.win.Node&&(this.win.Node={ELEMENT_NODE:1,TEXT_NODE:3})}return HtmlParser.prototype.append=function(e){return null!=this.last&&(this.buffer+=this.last),this.last=e},HtmlParser.prototype.attr=function(e,t,n){var r;return null==n&&(n=!0),null!=(r=n||"function"!=typeof e.getAttribute?e[t]:e.getAttribute(t))?r:""},HtmlParser.prototype.br=function(){return this.append("  "+this.left),this.atLeft=this.atNoWS=!0},HtmlParser.prototype.tr=function(){var e=this;return this.output("|"),this.tableColumns[++this.tableDepth]=[],function(){var t,n,r,i;if((n=e.tableColumns[e.tableDepth]).length){for(e.output("\n|"),r=0,i=n.length;r<i;r++){switch(t=n[r]){case"right":e.output("----:");break;case"center":e.output(":----:");break;default:e.output(":----")}e.output("|")}delete e.tableColumns[e.tableDepth--]}return e.output("\n")}},HtmlParser.prototype.code=function(){var e,t=this;return e=this.inCode,this.inCode=!0,function(){return t.inCode=e}},HtmlParser.prototype.has=function(e,t,n){return null==n&&(n=!0),n||"function"!=typeof e.hasAttribute?e.hasOwnProperty(t):e.hasAttribute(t)},HtmlParser.prototype.inCodeProcess=function(e){return e.replace(/`/g,"\\`")},HtmlParser.prototype.isVisible=function(e){var t,n,r,i,o,a,s,l,d;if(s=!0,null!=(r=null!=(o=this.attr(e,"style",!1))&&"function"==typeof o.match?o.match(u):void 0))for(l=0,d=r.length;l<d;l++)i=r[l],s=!c.test(i);if(s&&"function"==typeof this.win.getComputedStyle)try{"function"==typeof(null!=(o=this.win.getComputedStyle(e,null))?o.getPropertyValue:void 0)&&(t=o.getPropertyValue("display"),a=o.getPropertyValue("visibility"),s="none"!==t&&"hidden"!==a)}catch(e){n=e,this.thrown(n,"getComputedStyle")}return s},HtmlParser.prototype.li=function(){var e;return e=this.inOrderedList?this.order+++". ":"* ",e=m(e,2*(this.listDepth-1)),this.append(e)},HtmlParser.prototype.nonPreProcess=function(e){var t;for(p in e=(e=(e=e.replace(/\n([ \t]*\n)+/g,"\n")).replace(/\n[ \t]+/g,"\n")).replace(/[ \t]+/g," "),l){if(!v.call(l,p))continue;t=l[p],e=e.replace(s[p],t)}return e},HtmlParser.prototype.ol=function(){var e,t,n=this;return 0===this.listDepth&&this.p(),e=this.inOrderedList,t=this.order,this.inOrderedList=!0,this.order=1,this.listDepth++,function(){return n.inOrderedList=e,n.order=t,n.listDepth--}},HtmlParser.prototype.output=function(e){if(!e)return;if(this.inPre||(e=this.atNoWS?e.replace(/^[ \t\n]+/,""):/^[ \t]*\n/.test(e)?e.replace(/^[ \t\n]+/,"\n"):e.replace(/^[ \t]+/," ")),""===e)return;return this.atP=/\n\n$/.test(e),this.atLeft=/\n$/.test(e),this.atNoWS=/[ \t\n]$/.test(e),this.append(e.replace(/\n/g,this.left))},HtmlParser.prototype.outputLater=function(e){var t=this;return function(){return t.output(e)}},HtmlParser.prototype.p=function(){if(this.atP)return;return this.atLeft||(this.append(this.left),this.atLeft=!0),this.append(this.left),this.atNoWS=this.atP=!0},HtmlParser.prototype.parse=function(){var e,t,n,r,i,o,a,s;if(this.buffer="",!this.html)return this.buffer;if(e=this.win.document.createElement("div"),"string"==typeof this.html?e.innerHTML=this.html:e.appendChild(this.html),this.process(e),this.links.length)for(this.append("\n\n"),t=o=0,a=(s=this.links).length;o<a;t=++o)(n=s[t])&&this.append("["+t+"]: "+n+"\n");return this.options.debug&&(i=function(){var e,t;for(r in t=[],e=this.unhandled){if(!v.call(e,r))continue;t.push(r)}return t}.call(this).sort(),console.log(i.length?"Ignored tags;\n"+i.join(", "):"No tags were ignored"),console.log(this.exceptions.length?"Exceptions;\n"+this.exceptions.join("\n"):"No exceptions were thrown")),this.append(""),this.buffer=this.buffer.replace(/\s+$/,"")},HtmlParser.prototype.pre=function(){var e,t=this;return e=this.inPre,this.inPre=!0,function(){return t.inPre=e}},HtmlParser.prototype.process=function(e){var t,n,r,i,o,a,s,l,u,c,p,h,m,g,v,b,y,w,x,S;if(!this.isVisible(e))return;if(e.nodeType===this.win.Node.ELEMENT_NODE){p=!1,u=!1;try{if(d.test(e.tagName))p=!0;else if(/^H[1-6]$/.test(e.tagName))c=parseInt(e.tagName.match(/([1-6])$/)[1]),this.p(),this.output(function(){var e,t;for(t=[],l=e=1;1<=c?e<=c:e>=c;l=1<=c?++e:--e)t.push("#");return t}().join("")+" ");else if(f.test(e.tagName))this.p();else switch(e.tagName){case"BODY":case"FORM":break;case"DETAILS":this.p(),this.has(e,"open",!1)||(p=!0,(g=e.getElementsByTagName("summary")[0])&&this.process(g));break;case"BR":this.br();break;case"HR":this.p(),this.output("---"),this.p();break;case"CITE":case"DFN":case"EM":case"I":case"U":case"VAR":this.output("_"),this.atNoWS=!0,t=this.outputLater("_");break;case"DT":case"B":case"STRONG":"DT"===e.tagName&&this.p(),this.output("**"),this.atNoWS=!0,t=this.outputLater("**");break;case"Q":this.output('"'),this.atNoWS=!0,t=this.outputLater('"');break;case"OL":case"UL":t="OL"===e.tagName?this.ol():this.ul();break;case"LI":this.replaceLeft("\n"),this.li();break;case"PRE":n=this.pushLeft("    "),r=this.pre(),t=function(){return n(),r()};break;case"CODE":case"KBD":case"SAMP":if(this.inPre)break;this.output("`"),n=this.code(),r=this.outputLater("`"),t=function(){return n(),r()};break;case"BLOCKQUOTE":case"DD":t=this.pushLeft("> ");break;case"A":if(!(s=this.attr(e,"href",this.options.absolute)))break;(v=this.attr(e,"title"))&&(s+=' "'+v+'"'),m=this.options.inline?"("+s+")":"["+(null!=(b=this.linkMap)[s]?(b=this.linkMap)[s]:b[s]=this.links.push(s)-1)+"]",this.output("["),this.atNoWS=!0,t=this.outputLater("]"+m);break;case"IMG":if(p=!0,!(h=this.attr(e,"src",this.options.absolute)))break;this.output("!["+this.attr(e,"alt")+"]("+h+")");break;case"FRAME":case"IFRAME":p=!0;try{(null!=(x=e.contentDocument)?x.documentElement:void 0)&&this.process(e.contentDocument.documentElement)}catch(e){a=e,this.thrown(a,"contentDocument")}break;case"TR":u=!0,t=this.tr();break;case"THEAD":case"TFOOT":case"TBODY":case"TABLE":u=!0;break;case"TH":i=e.style?e.style.textAlign:"left",this.tableColumns[this.tableDepth].push(i),t=this.outputLater("|");break;case"TD":t=this.outputLater("|");break;default:this.options.debug&&(this.unhandled[e.tagName]=null)}}catch(t){a=t,this.thrown(a,e.tagName)}if(!p)for(y=0,w=(S=e.childNodes).length;y<w;y++)o=S[y],!1!==u&&!1!==/\s+/.test(o.nodeValue)||this.process(o);return null!=t?t.call(this):void 0}if(e.nodeType===this.win.Node.TEXT_NODE)return this.output(this.inPre?e.nodeValue:this.inCode?this.inCodeProcess(e.nodeValue):this.nonPreProcess(e.nodeValue))},HtmlParser.prototype.pushLeft=function(e){var t,n=this;return t=this.left,this.left+=e,this.atP?this.append(e):this.p(),function(){return n.left=t,n.atLeft=n.atP=!1,n.p()}},HtmlParser.prototype.replaceLeft=function(e){if(!this.atLeft)return this.append(this.left.replace(/[ ]{2,4}$/,e)),this.atLeft=this.atNoWS=this.atP=!0;if(this.last)return this.last=this.last.replace(/[ ]{2,4}$/,e)},HtmlParser.prototype.thrown=function(e,t){if(this.options.debug)return this.exceptions.push(t+": "+e)},HtmlParser.prototype.ul=function(){var e,t,n=this;return 0===this.listDepth&&this.p(),e=this.inOrderedList,t=this.order,this.inOrderedList=!1,this.order=1,this.listDepth++,function(){return n.inOrderedList=e,n.order=t,n.listDepth--}},HtmlParser}(),(h=h=function(e,t){return new o(e,t).parse()}).version=h.VERSION="3.0.2",h.noConflict=function(){return b.md=a,h},(void 0!==module&&null!==module?module.exports:void 0)?module.exports=h:void 0===(r=function(){return h}.apply(exports,n=[]))||(module.exports=r)}).call(this)}).call(this,e("8oxB"),e("YuTi")(module))},IPni:function(module,exports,e){"use strict";var t,n,r,i,o;i=window,o=function init($,e,t,n,r,i,o,a){return t.defaults=$.extend(t.defaults,{"toolbar.link":!0}),t.plugin("link",function(s,l,u,c){if(c["toolbar.link"]){var d=$(n({_t:r,prefix:c["prefix.css"]}));t.insertIntoLeftToolbar(l,d,5),l.find("."+c["prefix.css"]+"-toolbar-modals").append(i({_t:o,prefix:c["prefix.css"]}));var f=l.find("[data-wysihtml5-modal-link]"),p=e(f),h=f.find("[name=url]"),m;p.on("open",function(){h.focus()}),p.on("close",function(){s.currentView.element.focus()}),f.find("form").on("submit",function(e){if(e.preventDefault(),e.stopPropagation(),s.currentView.element.focus(),""===h.val())return;void 0===m&&null===m||(s.composer.selection.setBookmark(m),m=null);var t=s.currentView.selection.getSelection(),n=h.val(),r;try{var i;r=a(n).protocol?n:"http://"+n}catch(e){r=n}t.focusNode&&t.focusNode.parentNode&&"A"==t.focusNode.parentNode.nodeName?(s.fire("beforecommand:composer"),t.focusNode.parentNode.title=null,t.focusNode.parentNode.href=r,s.fire("aftercommand:composer")):s.composer.commands.exec("createLink",{href:r,target:"_blank"}),s.fire("change").fire("change:composer")}),l.find("[data-wysihtml5-custom-command=link]").on("click",function(e){if(!$(this).hasClass("wysihtml5-command-active")&&!l.hasClass("wysihtml5-commands-disabled")){var t=s.currentView.selection&&s.currentView.selection.getSelection();t&&t.focusNode&&t.focusNode.parentNode&&"A"==t.focusNode.parentNode.nodeName?h.val(t.focusNode.parentNode.href):h.val(""),m=s.composer&&s.composer.selection.getBookmark(),p.open()}})}}),t},n=[e("oYk5"),e("r9wp"),e("exfq"),e("83gG"),e("iB6e"),e("yKLC"),e("f6NP"),e("cpML")],void 0===(r="function"==typeof(t=o)?t.apply(exports,n):t)||(module.exports=r)},IXiA:function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("iCc5")),r,i=_interopRequireDefault(e("FYw3")),o,a=_interopRequireDefault(e("mRg0")),s,l,u,c=_interopRequireWildcard(e("sbe7")),d,f=_interopRequireDefault(e("oYk5")),p,h=_interopRequireDefault(e("w/1P")),m,g=_interopRequireDefault(e("yhVA"));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var v=(l=s=function(e){function UrlEditView(){var t,r,o;(0,n.default)(this,UrlEditView);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return t=r=(0,i.default)(this,e.call.apply(e,[this].concat(s))),r.onChangeUrl=function(e){var t=r.props,n=t.submissionPart,i=t.update,o=f.default.extend(!0,{},n);o.definition.url=e.target.value,i(o)},r.onChangeTitle=function(e){var t=r.props,n=t.submissionPart,i=t.update,o=f.default.extend(!0,{},n);o.definition.title=e.target.value,i(o)},r.onChangeCaption=function(e){var t=r.props,n=t.submissionPart,i=t.update,o=f.default.extend(!0,{},n);o.definition.caption=e.target.value,i(o)},o=t,(0,i.default)(r,o)}return(0,a.default)(UrlEditView,e),UrlEditView.prototype.render=function render(){var e=this.props.submissionPart;if("url"!==e.typeName)return null;return c.createElement("div",{className:"rc-UrlEditView"},c.createElement("input",{className:"c-peer-review-submit-text-field c-peer-review-submit-text-field-group-top bt3-form-control",type:"text",placeholder:(0,g.default)("URL"),defaultValue:e.definition.url,onChange:this.onChangeUrl,disabled:this.props.disabled}),e.definition.url&&c.createElement("div",null,c.createElement("div",{className:"c-peer-review-submit-text-field-container"},c.createElement("input",{className:(0,h.default)("c-peer-review-submit-text-field","c-peer-review-submit-text-field-group-middle","bt3-form-control"),type:"text",placeholder:(0,g.default)("Title"),defaultValue:e.definition.title,onChange:this.onChangeTitle,disabled:this.props.disabled}),!e.definition.title&&c.createElement("div",{className:"c-peer-review-submit-text-field-annotation"},(0,g.default)("optional"))),c.createElement("div",{className:"c-peer-review-submit-text-field-container"},c.createElement("textarea",{className:(0,h.default)("c-peer-review-submit-text-field","c-peer-review-submit-text-field-group-bottom","bt3-form-control"),placeholder:(0,g.default)("Caption"),defaultValue:e.definition.caption,onChange:this.onChangeCaption,disabled:this.props.disabled}),!e.definition.caption&&c.createElement("div",{className:"c-peer-review-submit-text-field-annotation"},(0,g.default)("optional")))))},UrlEditView}(c.Component),s.propTypes={submissionPart:c.PropTypes.object.isRequired,update:c.PropTypes.func,disabled:c.PropTypes.bool.isRequired},l);module.exports=v},JOPA:function(module,exports,e){var t=e("r4OL"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},KDBu:function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("iCc5")),r,i=_interopRequireDefault(e("FYw3")),o,a=_interopRequireDefault(e("mRg0")),s,l,u,c=_interopRequireWildcard(e("sbe7")),d=e("MnCE"),f,p=_interopRequireDefault(e("BN6r")),h,m=_interopRequireDefault(e("w/1P")),g,v=_interopRequireDefault(e("34yi")),b,y=_interopRequireDefault(e("y1LI")),w,x=_interopRequireDefault(e("wO3E")),S=e("C+yd"),E,C=_interopRequireDefault(e("8cuT")),T,R=_interopRequireDefault(e("yhVA")),N=e("kvW3");function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e("ZAK3");var A=(l=s=function(e){function AssignmentSubmitControls(){return(0,n.default)(this,AssignmentSubmitControls),(0,i.default)(this,e.apply(this,arguments))}return(0,a.default)(AssignmentSubmitControls,e),AssignmentSubmitControls.prototype.render=function render(){var e=(0,m.default)("rc-AssignmentSubmitControls","horizontal-box","align-items-right","align-items-vertical-center"),t=this.props,n=t.computedItem,r=t.courseId,i=(0,S.getIsLockedForPremiumGrading)(n);return c.createElement("div",{className:e},c.createElement("div",{className:"save-state-display horizontal-box"},this.props.lastSaveTime&&this.props.lastSaveTime>0?c.createElement("div",{className:"color-secondary-text caption-text"},c.createElement(N.FormattedMessage,{message:(0,R.default)("Last saved on {lastSaveDate} at {lastSaveTime}"),lastSaveDate:(0,p.default)(this.props.lastSaveTime).format("LL"),lastSaveTime:(0,p.default)(this.props.lastSaveTime).format("h:mma")})):c.createElement("div",{className:"color-secondary caption-text"},(0,R.default)("This project has not been saved."))),i&&c.createElement(v.default,{courseId:r,itemId:n.id}),!i&&c.createElement("div",null,c.createElement(x.default,{className:"passive save-draft",disabled:this.props.isSaving||this.props.isSubmitting,onClick:this.props.onSave,trackingName:"save"},this.props.isSaving?c.createElement(y.default,{name:"spinner",className:"cif-spin"}):(0,R.default)("Save draft")),c.createElement(x.default,{className:"primary preview",onClick:this.props.onSubmit,disabled:this.props.isSaving||this.props.isSubmitting||this.props.isSubmitDisabled,trackingName:"submit"},this.props.isSubmitting?c.createElement(y.default,{name:"spinner",className:"cif-spin"}):this.props.submitMessage)))},AssignmentSubmitControls}(c.Component),s.defaultProps={submitMessage:(0,R.default)("Submit for review"),isSubmitDisabled:!1},l);module.exports=(0,d.compose)((0,C.default)(["CourseStore"],function(e){var t;return{courseId:e.CourseStore.getCourseId()}}))(A)},KcZu:function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("EJiy")),r,i=_interopRequireDefault(e("iCc5")),o,a=_interopRequireDefault(e("FYw3")),s,l=_interopRequireDefault(e("mRg0")),u,c=_interopRequireWildcard(e("sbe7")),d,f=_interopRequireDefault(e("oYk5")),p,h=_interopRequireDefault(e("+mb6"));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e("zEMx");var m=function(e){function RichTextHTMLEditor(){var t,n,r;(0,i.default)(this,RichTextHTMLEditor);for(var o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];return t=n=(0,a.default)(this,e.call.apply(e,[this].concat(s))),n.handleChange=function(e){(e.target.value||""===e.target.value)&&n.props.onChange(e.target.value)},r=t,(0,a.default)(n,r)}return(0,l.default)(RichTextHTMLEditor,e),RichTextHTMLEditor.prototype.componentDidMount=function componentDidMount(){this.wysihtml5=(0,h.default)((0,f.default)(this.input),{"toolbar.modes":!1,"toolbar.image":!1}),"object"===(0,n.default)(this.input)&&(0,f.default)(this.input).val(this.props.content),this.wysihtml5.editor.setValue(this.props.content),(0,f.default)(this.input).on("keyup paste change:composer",this.handleChange)},RichTextHTMLEditor.prototype.shouldComponentUpdate=function shouldComponentUpdate(){return!1},RichTextHTMLEditor.prototype.componentWillUnmount=function componentWillUnmount(){(0,f.default)(this.input).off("keyup paste"),(0,f.default)(this.container).empty()},RichTextHTMLEditor.prototype.render=function render(){var e=this;return c.createElement("div",{className:"rc-RichTextHtmlEditor",ref:function ref(t){e.container=t}},c.createElement("textarea",{ref:function ref(t){e.input=t},style:{visibility:"hidden"},className:"bt3-form-control c-peer-review-submit-text-field","data-js":"text-input"}))},RichTextHTMLEditor}(c.Component);module.exports=m},Kqlr:function(module,exports,e){"use strict";exports.default={"ar":true,"de":true,"es":true,"fr":true,"ja":true,"ko":true,"pseudo":true,"pt":true,"ru":true,"tr":true,"zh":true,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":true}},MDsP:function(module,exports,e){"use strict";(function(t){var n,r,i=_interopRequireDefault(e("EJiy"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(function(){var t={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:noop,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:noop,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:noop,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};function Lexer(e){this.tokens=[],this.tokens.links={},this.options=e||marked.defaults,this.rules=t.normal,this.options.gfm&&(this.options.tables?this.rules=t.tables:this.rules=t.gfm)}t.bullet=/(?:[*+-]|\d+\.)/,t.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,t.item=replace(t.item,"gm")(/bull/g,t.bullet)(),t.list=replace(t.list)(/bull/g,t.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)(),t._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b",t.html=replace(t.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,t._tag)(),t.paragraph=replace(t.paragraph)("hr",t.hr)("heading",t.heading)("lheading",t.lheading)("blockquote",t.blockquote)("tag","<"+t._tag)("def",t.def)(),t.normal=merge({},t),t.gfm=merge({},t.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),t.gfm.paragraph=replace(t.paragraph)("(?!","(?!"+t.gfm.fences.source.replace("\\1","\\2")+"|"+t.list.source.replace("\\1","\\3")+"|")(),t.tables=merge({},t.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),Lexer.rules=t,Lexer.lex=function(e,t){var n;return new Lexer(t).lex(e)},Lexer.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},Lexer.prototype.token=function(e,n){for(var e=e.replace(/^ +$/gm,""),r,i,o,a,s,l,u,c,d;e;){if((o=this.rules.newline.exec(e))&&(e=e.substring(o[0].length),o[0].length>1&&this.tokens.push({type:"space"})),o=this.rules.code.exec(e)){e=e.substring(o[0].length),o=o[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?o:o.replace(/\n+$/,"")});continue}if(o=this.rules.fences.exec(e)){e=e.substring(o[0].length),this.tokens.push({type:"code",lang:o[2],text:o[3]});continue}if(o=this.rules.heading.exec(e)){e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:o[1].length,text:o[2]});continue}if(n&&(o=this.rules.nptable.exec(e))){for(e=e.substring(o[0].length),l={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/\n$/,"").split("\n")},c=0;c<l.align.length;c++)/^ *-+: *$/.test(l.align[c])?l.align[c]="right":/^ *:-+: *$/.test(l.align[c])?l.align[c]="center":/^ *:-+ *$/.test(l.align[c])?l.align[c]="left":l.align[c]=null;for(c=0;c<l.cells.length;c++)l.cells[c]=l.cells[c].split(/ *\| */);this.tokens.push(l);continue}if(o=this.rules.lheading.exec(e)){e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:"="===o[2]?1:2,text:o[1]});continue}if(o=this.rules.hr.exec(e)){e=e.substring(o[0].length),this.tokens.push({type:"hr"});continue}if(o=this.rules.blockquote.exec(e)){e=e.substring(o[0].length),this.tokens.push({type:"blockquote_start"}),o=o[0].replace(/^ *> ?/gm,""),this.token(o,n),this.tokens.push({type:"blockquote_end"});continue}if(o=this.rules.list.exec(e)){for(e=e.substring(o[0].length),a=o[2],this.tokens.push({type:"list_start",ordered:a.length>1}),r=!1,d=(o=o[0].match(this.rules.item)).length,c=0;c<d;c++)u=(l=o[c]).length,~(l=l.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(u-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+u+"}","gm"),"")),this.options.smartLists&&c!==d-1&&(a===(s=t.bullet.exec(o[c+1])[0])||a.length>1&&s.length>1||(e=o.slice(c+1).join("\n")+e,c=d-1)),i=r||/\n\n(?!\s*$)/.test(l),c!==d-1&&(r="\n"===l.charAt(l.length-1),i||(i=r)),this.tokens.push({type:i?"loose_item_start":"list_item_start"}),this.token(l,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"});continue}if(o=this.rules.html.exec(e)){e=e.substring(o[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===o[1]||"script"===o[1]||"style"===o[1],text:o[0]});continue}if(n&&(o=this.rules.def.exec(e))){e=e.substring(o[0].length),this.tokens.links[o[1].toLowerCase()]={href:o[2],title:o[3]};continue}if(n&&(o=this.rules.table.exec(e))){for(e=e.substring(o[0].length),l={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/(?: *\| *)?\n$/,"").split("\n")},c=0;c<l.align.length;c++)/^ *-+: *$/.test(l.align[c])?l.align[c]="right":/^ *:-+: *$/.test(l.align[c])?l.align[c]="center":/^ *:-+ *$/.test(l.align[c])?l.align[c]="left":l.align[c]=null;for(c=0;c<l.cells.length;c++)l.cells[c]=l.cells[c].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(l);continue}if(n&&(o=this.rules.paragraph.exec(e))){e=e.substring(o[0].length),this.tokens.push({type:"paragraph",text:"\n"===o[1].charAt(o[1].length-1)?o[1].slice(0,-1):o[1]});continue}if(o=this.rules.text.exec(e)){e=e.substring(o[0].length),this.tokens.push({type:"text",text:o[0]});continue}if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}return this.tokens};var r={escape:/^\\([\\`*{}\[\]()#+\-.!_>\$])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:noop,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:noop,text:/^[\s\S]+?(?=[\$\\<!\[_*`]| {2,}\n|$)/,math:/^\$\$([^ \t\n\$][^\$]*[^ \t\n\$])\$\$/};function InlineLexer(e,t){if(this.options=t||marked.defaults,this.links=e,this.rules=r.normal,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=r.breaks:this.rules=r.gfm:this.options.pedantic&&(this.rules=r.pedantic)}function Parser(e){this.tokens=[],this.token=null,this.options=e||marked.defaults}function escape(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function replace(e,t){return e=e.source,t=t||"",function self(n,r){if(!n)return new RegExp(e,t);return r=(r=r.source||r).replace(/(^|[^\[])\^/g,"$1"),e=e.replace(n,r),self}}function noop(){}function merge(e){for(var t=1,n,r;t<arguments.length;t++)for(r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}function marked(e,t,n){if(n||"function"==typeof t){n||(n=t,t=null);var r=(t=merge({},marked.defaults,t||{})).highlight,i,o,a=0;try{i=Lexer.lex(e,t)}catch(e){return n(e)}o=i.length;var s=function done(){var e,o;try{e=Parser.parse(i,t)}catch(e){o=e}return t.highlight=r,o?n(o):n(null,e)};if(!r||r.length<3)return s();if(delete t.highlight,!o)return s();for(;a<i.length;a++)!function(e){if("code"!==e.type)return--o||s();r(e.text,e.lang,function(t,n){if(null==n||n===e.text)return--o||s();e.text=n,e.escaped=!0,--o||s()})}(i[a]);return}try{return t&&(t=merge({},marked.defaults,t)),Parser.parse(Lexer.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/chjj/marked.",(t||marked.defaults).silent)return"<p>An error occured:</p><pre>"+escape(e.message+"",!0)+"</pre>";throw e}}r._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,r._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,r.link=replace(r.link)("inside",r._inside)("href",r._href)(),r.reflink=replace(r.reflink)("inside",r._inside)(),r.normal=merge({},r),r.pedantic=merge({},r.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,math:noop}),r.gfm=merge({},r.normal,{escape:replace(r.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:replace(r.text)("]|","~]|")("|","|https?://|")()}),r.breaks=merge({},r.gfm,{br:replace(r.br)("{2,}","*")(),text:replace(r.gfm.text)("{2,}","*")()}),InlineLexer.rules=r,InlineLexer.output=function(e,t,n){var r;return new InlineLexer(t,n).output(e)},InlineLexer.prototype.output=function(e){for(var t="",n,r,i,o;e;){if(o=this.rules.escape.exec(e)){e=e.substring(o[0].length),t+=o[1];continue}if(this.options.math&&(o=this.rules.math.exec(e))){e=e.substring(o[0].length),t+="$$"+o[1]+"$$";continue}if(o=this.rules.autolink.exec(e)){e=e.substring(o[0].length),"@"===o[2]?(r=":"===o[1].charAt(6)?this.mangle(o[1].substring(7)):this.mangle(o[1]),i=this.mangle("mailto:")+r):i=r=escape(o[1]),t+='<a href="'+i+'">'+r+"</a>";continue}if(o=this.rules.url.exec(e)){e=e.substring(o[0].length),t+='<a href="'+(i=r=escape(o[1]))+'">'+r+"</a>";continue}if(o=this.rules.tag.exec(e)){e=e.substring(o[0].length),t+=this.options.sanitize?escape(o[0]):o[0];continue}if(o=this.rules.link.exec(e)){e=e.substring(o[0].length),t+=this.outputLink(o,{href:o[2],title:o[3]});continue}if((o=this.rules.reflink.exec(e))||(o=this.rules.nolink.exec(e))){if(e=e.substring(o[0].length),n=(o[2]||o[1]).replace(/\s+/g," "),!(n=this.links[n.toLowerCase()])||!n.href){t+=o[0].charAt(0),e=o[0].substring(1)+e;continue}t+=this.outputLink(o,n);continue}if(o=this.rules.strong.exec(e)){e=e.substring(o[0].length),t+="<strong>"+this.output(o[2]||o[1])+"</strong>";continue}if(o=this.rules.em.exec(e)){e=e.substring(o[0].length),t+="<em>"+this.output(o[2]||o[1])+"</em>";continue}if(o=this.rules.code.exec(e)){e=e.substring(o[0].length),t+="<code>"+escape(o[2],!0)+"</code>";continue}if(o=this.rules.br.exec(e)){e=e.substring(o[0].length),t+="<br>";continue}if(o=this.rules.del.exec(e)){e=e.substring(o[0].length),t+="<del>"+this.output(o[1])+"</del>";continue}if(o=this.rules.text.exec(e)){e=e.substring(o[0].length),t+=escape(this.smartypants(o[0]));continue}if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}return t},InlineLexer.prototype.outputLink=function(e,t){return"!"!==e[0].charAt(0)?'<a href="'+escape(t.href)+'"'+(t.title?' title="'+escape(t.title)+'"':"")+">"+this.output(e[1])+"</a>":'<img src="'+escape(t.href)+'" alt="'+escape(e[1])+'"'+(t.title?' title="'+escape(t.title)+'"':"")+">"},InlineLexer.prototype.smartypants=function(e){if(!this.options.smartypants)return e;return e.replace(/--/g,"—").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")},InlineLexer.prototype.mangle=function(e){for(var t="",n=e.length,r=0,i;r<n;r++)i=e.charCodeAt(r),Math.random()>.5&&(i="x"+i.toString(16)),t+="&#"+i+";";return t},Parser.parse=function(e,t){var n;return new Parser(t).parse(e)},Parser.prototype.parse=function(e){this.inline=new InlineLexer(e.links,this.options),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},Parser.prototype.next=function(){return this.token=this.tokens.pop()},Parser.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},Parser.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},Parser.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return"<hr>\n";case"heading":return"<h"+this.token.depth+' id="'+this.options.headerPrefix+this.token.text.toLowerCase().replace(/[^\w]+/g,"-")+'">'+this.inline.output(this.token.text)+"</h"+this.token.depth+">\n";case"code":if(this.options.highlight){var e=this.options.highlight(this.token.text,this.token.lang);null!=e&&e!==this.token.text&&(this.token.escaped=!0,this.token.text=e)}return this.token.escaped||(this.token.text=escape(this.token.text,!0)),"<pre><code"+(this.token.lang?' class="'+this.options.langPrefix+this.token.lang+'"':"")+">"+this.token.text+"</code></pre>\n";case"table":var t="",n,r,i,o,a;for(t+="<thead>\n<tr>\n",r=0;r<this.token.header.length;r++)n=this.inline.output(this.token.header[r]),t+="<th",this.token.align[r]&&(t+=' style="text-align:'+this.token.align[r]+'"'),t+=">"+n+"</th>\n";for(t+="</tr>\n</thead>\n",t+="<tbody>\n",r=0;r<this.token.cells.length;r++){for(i=this.token.cells[r],t+="<tr>\n",a=0;a<i.length;a++)o=this.inline.output(i[a]),t+="<td",this.token.align[a]&&(t+=' style="text-align:'+this.token.align[a]+'"'),t+=">"+o+"</td>\n";t+="</tr>\n"}return"<table>\n"+(t+="</tbody>\n")+"</table>\n";case"blockquote_start":for(var t="";"blockquote_end"!==this.next().type;)t+=this.tok();return"<blockquote>\n"+t+"</blockquote>\n";case"list_start":for(var s=this.token.ordered?"ol":"ul",t="";"list_end"!==this.next().type;)t+=this.tok();return"<"+s+">\n"+t+"</"+s+">\n";case"list_item_start":for(var t="";"list_item_end"!==this.next().type;)t+="text"===this.token.type?this.parseText():this.tok();return"<li>"+t+"</li>\n";case"loose_item_start":for(var t="";"list_item_end"!==this.next().type;)t+=this.tok();return"<li>"+t+"</li>\n";case"html":return this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);case"paragraph":return"<p>"+this.inline.output(this.token.text)+"</p>\n";case"text":return"<p>"+this.parseText()+"</p>\n"}},noop.exec=noop,marked.options=marked.setOptions=function(e){return merge(marked.defaults,e),marked},marked.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:""},marked.Parser=Parser,marked.parser=Parser.parse,marked.Lexer=Lexer,marked.lexer=Lexer.lex,marked.InlineLexer=InlineLexer,marked.inlineLexer=InlineLexer.output,marked.parse=marked,"object"===(0,i.default)(exports)?module.exports=marked:void 0===(n=function(){return marked}.call(exports,e,exports,module))||(module.exports=n)}).call(function(){return this||("undefined"!=typeof window?window:t)}())}).call(this,e("yLpj"))},Mxyi:function(module,exports,e){var t=e("VAxF"),n=t.default?t.default:{},r,i=e("HdzH")(n);i.getLocale=function(){return"en"},module.exports=i},"P+jP":function(module,exports,e){var t=e("mQnx"),n=t.default?t.default:{},r,i=e("HdzH")(n);i.getLocale=function(){return"en"},module.exports=i},PmkO:function(module,exports,e){var t=e("C1Du"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},QVL6:function(module,exports,e){},QgSF:function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("iCc5")),r,i=_interopRequireDefault(e("FYw3")),o,a=_interopRequireDefault(e("mRg0")),s,l=_interopRequireWildcard(e("sbe7")),u,c=_interopRequireDefault(e("9can")),d,f=_interopRequireDefault(e("fK8H")),p,h=_interopRequireDefault(e("lSMu")),m,g=_interopRequireDefault(e("IXiA")),v,b=_interopRequireDefault(e("w4G/")),y,w=_interopRequireDefault(e("Ej69")),x,S=_interopRequireDefault(e("3aOx"));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e("C6SX");var E=function(e){function SubmissionPartEditView(){return(0,n.default)(this,SubmissionPartEditView),(0,i.default)(this,e.apply(this,arguments))}return(0,a.default)(SubmissionPartEditView,e),SubmissionPartEditView.prototype.renderEditor=function renderEditor(){var e=this.props,t=e.courseId,n=e.partId,r=e.submissionPart,i=e.update,o=e.blockSubmit,a=e.disabled,s=e.isPartReceivingInlineFeedback;switch(r.typeName){case"plainText":return l.createElement(h.default,{submissionPart:r,update:i,disabled:a});case"richText":return l.createElement(f.default,{submissionPart:r,update:i,disabled:a,partId:n,courseId:t});case"url":return l.createElement(g.default,{submissionPart:r,update:i,disabled:a});case"fileUpload":return l.createElement(b.default,{submissionPart:r,update:i,blockSubmit:o,disabled:a,isPartReceivingInlineFeedback:s});case"offPlatform":return l.createElement(w.default,null);default:return!1}},SubmissionPartEditView.prototype.render=function render(){var e=this.props,t=e.submissionSchemaPart,n=e.errorTree,r=e.showValidation,i=e.renderInlineNode,o=e.partId;return l.createElement("div",{className:"rc-SubmissionPartEditView"},l.createElement("div",{className:"c-peer-review-submit-prompt"},l.createElement(c.default,{content:t.prompt,assumeStringIsHtml:!0}),i&&i(o)),r&&n&&l.createElement(S.default,{errorTree:n}),this.renderEditor())},SubmissionPartEditView}(l.Component);module.exports=E},R6Zj:function(module,exports,e){var t=e("QVL6"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},T3t0:function(module,exports,e){var t,n,r,i;r=window,i=function(e,t,n){var r=function template(n){var r=[],i,o=n||{};return function(t,n){r.push('<button data-wysihtml5-custom-command="image" data-wysihtml5-order=\'7\' type="button" unselectable="on" title="Insert image"'+e.cls([t+"-toolbar-item"],[!0])+'><i class="cif-file-picture-o"></i> '+e.escape(null==(i=n("Pic"))?"":i)+"</button>")}.call(this,"prefix"in o?o.prefix:"undefined"!=typeof prefix?prefix:void 0,"_t"in o?o._t:void 0!==t?t:void 0),r.join("")};return function(e){return e&&"_t"in e&&(t=e._t.merge(t)),r(e)}},t=[e("xgPa"),e("+IeG")],void 0===(n=function(e,t){var n;return i(e,t,n)}.apply(exports,t))||(module.exports=n)},TqgJ:function(module,exports,e){"use strict";var t,n,r,i;r=window,i=function init($,e,t,n,r,i,o,a){var s=function TransloaditUploader(e,t){var n=this;this.modal=e,this.$element=this.modal.$el.find(".transloadit-uploader"),this.$preview=this.$element.find(".uploader-preview"),this.$button=this.$element.find(".uploader-button"),this.$progress=this.$element.find(".uploader-progress"),this.$input=this.$element.find(".uploader-input-url");var r={max_size:t["transloadit.max_size"]||1048576,auth:{key:t["transloadit.key"]},template_id:t["transloadit.template"],steps:{store:{}}};this.$element.transloadit({params:r,wait:!0,modal:!1,autoSubmit:!1,processZeroFiles:!1,onPick:function onPick(e){n.$element.find(".help-inline.errror").remove(),n.$progress.show(),n.$progress.find(".bar").css("width","0%")},onStart:function onStart(e){n.$button.hide()},onProgress:function onProgress(e,t){var r=(e/t*100).toFixed(2);r=Math.min(95,r),isNaN(r)||n.$progress.find(".bar").css("width",r+"%")},onSuccess:function onSuccess(e){function makeHttps(e){return e.replace(/^http:\/\//i,"https://")}function getResultForStep(t){var n=e.results[t][0];return n.value=makeHttps(n.url),"image"==n.type&&(n.image=n.value),n}n.$progress.fadeOut();var t=0,r;$.each(e.results,function(e,n){t++,r=e}),e.results[":original"]&&t>1&&(r=":original");var i=getResultForStep(r);n.$input.val(i.value).trigger("change"),n.updatePreview(!0),n.$preview.show(),n.$element.find('input[name="uploader_file_input"]').val("")},onError:function onError(e){var t=$('<span class="help-inline error"></span>').append(e);n.$button.show(),n.$element.find(".uploader-side").append(t),n.$element.find('input[name="uploader_file_input"]').val("")}}),this.updatePreview()};return s.prototype.updatePreview=function(){var e=this;if(e.$width=e.$element.find(".uploader-input-width"),e.$height=e.$element.find(".uploader-input-height"),this.$input.val()){var t=this.$preview.find("img");t.attr("src",this.$input.val()).show(),this.$preview.show(),t.on("load",function(){e.$width.val(t.width()),e.$height.val(t.height()),e.modal.reposition(),e.$width.on("keyup",function(){var n=Math.round(t.height()/t.width()*e.$width.val());e.$height.val(n)}),e.$height.on("keyup",function(){var n=Math.round(t.width()/t.height()*e.$height.val());e.$width.val(n)})})}else this.$preview.hide(),this.modal.reposition()},s.prototype.reset=function(){this.$input.val(""),this.updatePreview(),this.$button.show()},e.defaults=$.extend(e.defaults,{"toolbar.image":!1,"transloadit.key":"","transloadit.template":""}),e.plugin("transloadit",function(a,l,u,c){if(c["toolbar.image"]){var d=$(n({_t:r,prefix:c["prefix.css"]}));e.insertIntoLeftToolbar(l,d,7),l.find("."+c["prefix.css"]+"-toolbar-modals").append(i({_t:o,prefix:c["prefix.css"]}));var f=l.find("[data-wysihtml5-modal-image]"),p=f.find("[type=submit]"),h=t(f),m,g=new s(h,c),v=f.find("[name=result]");h.on("close",function(){a.currentView.element.focus()}),v.bind("change input textinput blur",function(){v.val().indexOf("http")>-1&&p.removeAttr("disabled").show()}),f.find("form").on("submit",function(e){e.preventDefault(),e.stopPropagation(),a.currentView.element.focus(),void 0===m&&null===m||(a.composer.selection.setBookmark(m),m=null);var t=v.val();if(t){var n=f.find(".uploader-input-width").val(),r=f.find(".uploader-input-height").val(),i=r||n?"width:"+n+"px;height:"+r+"px;":"";a.composer.commands.exec("insertImage",{src:t,style:i}),a.fire("change").fire("change:composer")}}),l.find("[data-wysihtml5-custom-command=image]").on("click",function(e){$(this).hasClass("wysihtml5-command-active")||l.hasClass("wysihtml5-commands-disabled")||(m=a.composer&&a.composer.selection.getBookmark(),g.reset(),p.attr("disabled","").hide(),h.open())})}}),e},t=[e("oYk5"),e("exfq"),e("r9wp"),e("T3t0"),e("+IeG"),e("nfrN"),e("Gmd3"),e("66YO")],void 0===(n=function($,e,t,n,r,o,a,s){return i($,e,t,n,r,o,a,s)}.apply(exports,t))||(module.exports=n)},UhgZ:function(module,exports,e){"use strict";var t,n;!function(){function trim(e){return e.replace(/^\s+|\s+$/g,"")}function ltrim(e){return e.replace(/^\s+/g,"")}function rtrim(e){return e.replace(/\s+$/g,"")}function style_html(e,t,n,r){var i,o,a,s,l,u,c,d,f;function Parser(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.newlines=0,this.indent_content=o,this.Utils={whitespace:"\n\r\t ".split(""),single_token:"br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed,?php,?,?=".split(","),extra_liners:"head,body,/html".split(","),in_array:function in_array(e,t){for(var n=0;n<t.length;n++)if(e===t[n])return!0;return!1}},this.is_whitespace=function(e){for(var t=0;0<e.length;e++)if(!this.Utils.in_array(e.charAt(0),this.Utils.whitespace))return!1;return!0},this.traverse_whitespace=function(){var e="";if(e=this.input.charAt(this.pos),this.Utils.in_array(e,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(e,this.Utils.whitespace);)d&&"\n"===e&&this.newlines<=f&&(this.newlines+=1),this.pos++,e=this.input.charAt(this.pos);return!0}return!1},this.space_or_wrap=function(e){this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,e),this.print_indentation(e)):(this.line_char_count++,e.push(" "))},this.get_content=function(){for(var e="",t=[],n=!1;"<"!==this.input.charAt(this.pos);){if(this.pos>=this.input.length)return t.length?t.join(""):["","TK_EOF"];if(this.traverse_whitespace()){this.space_or_wrap(t);continue}if(indent_handlebars){var r=this.input.substr(this.pos,3);if("{{#"===r||"{{/"===r)break;if("{{"===this.input.substr(this.pos,2)&&"{{else}}"===this.get_tag(!0))break}e=this.input.charAt(this.pos),this.pos++,this.line_char_count++,t.push(e)}return t.length?t.join(""):""},this.get_contents_to=function(e){if(this.pos===this.input.length)return["","TK_EOF"];var t="",n="",r=new RegExp("</"+e+"\\s*>","igm");r.lastIndex=this.pos;var i=r.exec(this.input),o=i?i.index:this.input.length;return this.pos<o&&(n=this.input.substring(this.pos,o),this.pos=o),n},this.record_tag=function(e){this.tags[e+"count"]?(this.tags[e+"count"]++,this.tags[e+this.tags[e+"count"]]=this.indent_level):(this.tags[e+"count"]=1,this.tags[e+this.tags[e+"count"]]=this.indent_level),this.tags[e+this.tags[e+"count"]+"parent"]=this.tags.parent,this.tags.parent=e+this.tags[e+"count"]},this.retrieve_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!==t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]],this.tags.parent=this.tags[t+"parent"]),delete this.tags[e+this.tags[e+"count"]+"parent"],delete this.tags[e+this.tags[e+"count"]],1===this.tags[e+"count"]?delete this.tags[e+"count"]:this.tags[e+"count"]--}},this.indent_to_tag=function(e){if(!this.tags[e+"count"])return;for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!==t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]])},this.get_tag=function(e){var t="",n=[],r="",i=!1,o,a,s,l=this.pos,u=this.line_char_count;e=void 0!==e&&e;do{if(this.pos>=this.input.length)return e&&(this.pos=l,this.line_char_count=u),n.length?n.join(""):["","TK_EOF"];if(t=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(t,this.Utils.whitespace)){i=!0;continue}if("'"!==t&&'"'!==t||(t+=this.get_unformatted(t),i=!0),"="===t&&(i=!1),n.length&&"="!==n[n.length-1]&&">"!==t&&i&&(this.space_or_wrap(n),i=!1),indent_handlebars&&"<"===s&&t+this.input.charAt(this.pos)==="{{"&&(t+=this.get_unformatted("}}"),n.length&&" "!==n[n.length-1]&&"<"!==n[n.length-1]&&(t=" "+t),i=!0),"<"!==t||s||(o=this.pos-1,s="<"),indent_handlebars&&!s&&n.length>=2&&"{"===n[n.length-1]&&"{"==n[n.length-2]&&(o="#"===t||"/"===t?this.pos-3:this.pos-2,s="{"),this.line_char_count++,n.push(t),n[1]&&"!"===n[1]){n=[this.get_comment(o)];break}if(indent_handlebars&&"{"===s&&n.length>2&&"}"===n[n.length-2]&&"}"===n[n.length-1])break}while(">"!==t);var d=n.join(""),f,p;f=-1!==d.indexOf(" ")?d.indexOf(" "):"{"===d[0]?d.indexOf("}"):d.indexOf(">"),p="<"!==d[0]&&indent_handlebars?"#"===d[2]?3:2:1;var h=d.substring(p,f).toLowerCase();return"/"===d.charAt(d.length-2)||this.Utils.in_array(h,this.Utils.single_token)?e||(this.tag_type="SINGLE"):indent_handlebars&&"{"===d[0]&&"else"===h?e||(this.indent_to_tag("if"),this.tag_type="HANDLEBARS_ELSE",this.indent_content=!0,this.traverse_whitespace()):"script"===h?e||(this.record_tag(h),this.tag_type="SCRIPT"):"style"===h?e||(this.record_tag(h),this.tag_type="STYLE"):this.is_unformatted(h,c)?(r=this.get_unformatted("</"+h+">",d),n.push(r),a=this.pos-1,this.tag_type="SINGLE"):"!"===h.charAt(0)?e||(this.tag_type="SINGLE",this.traverse_whitespace()):e||("/"===h.charAt(0)?(this.retrieve_tag(h.substring(1)),this.tag_type="END",this.traverse_whitespace()&&this.space_or_wrap(n)):(this.record_tag(h),"html"!==h.toLowerCase()&&(this.indent_content=!0),this.tag_type="START",this.traverse_whitespace()&&this.space_or_wrap(n)),this.Utils.in_array(h,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!==this.output[this.output.length-2]&&this.print_newline(!0,this.output))),e&&(this.pos=l,this.line_char_count=u),n.join("")},this.get_comment=function(e){var t="",n=">",r=!1;for(this.pos=e,input_char=this.input.charAt(this.pos),this.pos++;this.pos<=this.input.length&&((t+=input_char)[t.length-1]!==n[n.length-1]||-1===t.indexOf(n));)!r&&t.length<10&&(0===t.indexOf("<![if")?(n="<![endif]>",r=!0):0===t.indexOf("<![cdata[")?(n="]]>",r=!0):0===t.indexOf("<![")?(n="]>",r=!0):0===t.indexOf("\x3c!--")&&(n="--\x3e",r=!0)),input_char=this.input.charAt(this.pos),this.pos++;return t},this.get_unformatted=function(e,t){if(t&&-1!==t.toLowerCase().indexOf(e))return"";var n="",r="",i=0,o=!0;do{if(this.pos>=this.input.length)return r;if(n=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(n,this.Utils.whitespace)){if(!o){this.line_char_count--;continue}if("\n"===n||"\r"===n){r+="\n",this.line_char_count=0;continue}}r+=n,this.line_char_count++,o=!0,indent_handlebars&&"{"===n&&r.length&&"{"===r[r.length-2]&&(i=(r+=this.get_unformatted("}}")).length)}while(-1===r.toLowerCase().indexOf(e,i));return r},this.get_token=function(){var e;if("TK_TAG_SCRIPT"===this.last_token||"TK_TAG_STYLE"===this.last_token){var t=this.last_token.substr(7);if("string"!=typeof(e=this.get_contents_to(t)))return e;return[e,"TK_"+t]}if("CONTENT"===this.current_mode)return"string"!=typeof(e=this.get_content())?e:[e,"TK_CONTENT"];if("TAG"===this.current_mode){if("string"!=typeof(e=this.get_tag()))return e;var n;return[e,"TK_TAG_"+this.tag_type]}},this.get_full_indent=function(e){if((e=this.indent_level+e||0)<1)return"";return Array(e+1).join(this.indent_string)},this.is_unformatted=function(e,t){if(!this.Utils.in_array(e,t))return!1;if("a"!==e.toLowerCase()||!this.Utils.in_array("a",t))return!0;var n,r=(this.get_tag(!0)||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!(r&&!this.Utils.in_array(r,t))},this.printer=function(e,t,n,r,i){this.input=e||"",this.output=[],this.indent_character=t,this.indent_string="",this.indent_size=n,this.brace_style=i,this.indent_level=0,this.wrap_line_length=r,this.line_char_count=0;for(var o=0;o<this.indent_size;o++)this.indent_string+=this.indent_character;this.print_newline=function(e,t){if(this.line_char_count=0,!t||!t.length)return;(e||"\n"!==t[t.length-1])&&t.push("\n")},this.print_indentation=function(e){for(var t=0;t<this.indent_level;t++)e.push(this.indent_string),this.line_char_count+=this.indent_string.length},this.print_token=function(e){if(this.is_whitespace(e)&&!this.output.length)return;(e||""!==e)&&this.output.length&&"\n"===this.output[this.output.length-1]&&(this.print_indentation(this.output),e=ltrim(e)),this.print_token_raw(e)},this.print_token_raw=function(e){this.newlines>0&&(e=rtrim(e)),e&&""!==e&&(e.length>1&&"\n"===e[e.length-1]?(this.output.push(e.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(e));for(var t=0;t<this.newlines;t++)this.print_newline(t>0,this.output);this.newlines=0},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this}for(void 0!==(t=t||{}).wrap_line_length&&0!==parseInt(t.wrap_line_length,10)||void 0!==t.max_char&&0!==parseInt(t.max_char,10)||(t.wrap_line_length=t.max_char),o=t.indent_inner_html||!1,a=parseInt(t.indent_size||4,10),s=t.indent_char||" ",u=t.brace_style||"collapse",l=0===parseInt(t.wrap_line_length,10)?32786:parseInt(t.wrap_line_length||250,10),c=t.unformatted||["a","span","img","bdo","em","strong","dfn","code","samp","kbd","var","cite","abbr","acronym","q","sub","sup","tt","i","b","big","small","u","s","strike","font","ins","del","pre","address","dt","h1","h2","h3","h4","h5","h6"],d=t.preserve_newlines||!0,f=d?parseInt(t.max_preserve_newlines||32786,10):0,indent_handlebars=t.indent_handlebars||!1,(i=new Parser).printer(e,s,a,l,u);;){var p=i.get_token();if(i.token_text=p[0],i.token_type=p[1],"TK_EOF"===i.token_type)break;switch(i.token_type){case"TK_TAG_START":i.print_newline(!1,i.output),i.print_token(i.token_text),i.indent_content&&(i.indent(),i.indent_content=!1),i.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":i.print_newline(!1,i.output),i.print_token(i.token_text),i.current_mode="CONTENT";break;case"TK_TAG_END":if("TK_CONTENT"===i.last_token&&""===i.last_text){var h=i.token_text.match(/\w+/)[0],m=null;i.output.length&&(m=i.output[i.output.length-1].match(/(?:<|{{#)\s*(\w+)/)),null!==m&&m[1]===h||i.print_newline(!1,i.output)}i.print_token(i.token_text),i.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var g=i.token_text.match(/^\s*<([a-z]+)/i);g&&i.Utils.in_array(g[1],c)||i.print_newline(!1,i.output),i.print_token(i.token_text),i.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_ELSE":i.print_token(i.token_text),i.indent_content&&(i.indent(),i.indent_content=!1),i.current_mode="CONTENT";break;case"TK_CONTENT":i.print_token(i.token_text),i.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(""!==i.token_text){i.print_newline(!1,i.output);var v=i.token_text,b,y=1;"TK_SCRIPT"===i.token_type?b="function"==typeof n&&n:"TK_STYLE"===i.token_type&&(b="function"==typeof r&&r),"keep"===t.indent_scripts?y=0:"separate"===t.indent_scripts&&(y=-i.indent_level);var w=i.get_full_indent(y);if(b)v=b(v.replace(/^\s*/,w),t);else{var x,S=v.match(/^\s*/)[0].match(/[^\n\r]*$/)[0].split(i.indent_string).length-1,E=i.get_full_indent(y-S);v=v.replace(/^\s*/,w).replace(/\r\n|\r|\n/g,"\n"+E).replace(/\s+$/,"")}v&&(i.print_token_raw(w+trim(v)),i.print_newline(!1,i.output))}i.current_mode="TAG"}i.last_token=i.token_type,i.last_text=i.token_text}return i.output.join("")}var r,i;t=[e("wTGU"),e("kD95")],void 0===(n=function(e,t){return{html_beautify:function html_beautify(n,r){return style_html(n,r,e,t)}}}.apply(exports,t))||(module.exports=n)}()},VAxF:function(module,exports,e){"use strict";exports.default={"ar":true,"de":true,"es":true,"fr":true,"ja":true,"ko":true,"pseudo":true,"pt":true,"ru":true,"tr":true,"zh":true,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":true}},VE4c:function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("iCc5")),r,i=_interopRequireDefault(e("FYw3")),o,a=_interopRequireDefault(e("mRg0")),s,l,u,c=_interopRequireWildcard(e("sbe7")),d,f=_interopRequireDefault(e("w/1P")),p,h=_interopRequireDefault(e("9can")),m,g=_interopRequireDefault(e("37kS"));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e("1Nwa");var v=(l=s=function(e){function AssignmentUpgradeChanges(){var t,r,o;(0,n.default)(this,AssignmentUpgradeChanges);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return t=r=(0,i.default)(this,e.call.apply(e,[this].concat(s))),r.renderChange=function(e,t){if("AddsPart"===e.typeName)return r.renderChangeItem(t,"cif-plus-square",(0,g.default)("Added question."),c.createElement("tr",{className:"bt3-success"},c.createElement("th",null,(0,g.default)("Added")),c.createElement("td",{className:"change-contents"},c.createElement("div",null,c.createElement(h.default,{assumeStringIsHtml:!0,content:e.definition.prompt})))));if("RemovesPart"===e.typeName)return r.renderChangeItem(t,"cif-minus-square",(0,g.default)("Removed question."),c.createElement("tr",{className:"bt3-danger"},c.createElement("th",null,(0,g.default)("Removed")),c.createElement("td",{className:"change-contents"},c.createElement("div",null,c.createElement(h.default,{assumeStringIsHtml:!0,content:e.definition.prompt})))));if("ChangesPart"===e.typeName){var n=e.definition.changes,i=n.find(function(e){return"ChangesPrompt"===e.typeName}),o=n.filter(function(e){return"ChangesPrompt"!==e.typeName});return r.renderChangeItem(t,"cif-square",(0,g.default)("Changed question."),[c.createElement("tr",{className:(0,f.default)({"bt3-danger":!!i}),key:"changedQuestionPrompt"},c.createElement("th",null,(0,g.default)("Original")),c.createElement("td",{className:"change-contents"},c.createElement("div",null,c.createElement(h.default,{assumeStringIsHtml:!0,content:e.definition.prompt})))),i&&r.renderPartChange(i,"promptChange"),o.map(r.renderPartChange),0===n.length&&(0,g.default)("Unknown change.")])}return null},r.renderPartChange=function(e,t){var n="ChangesPrompt"===e.typeName?(0,g.default)("New"):"",r=!1;return"ChangesPrompt"===e.typeName?r=c.createElement("div",{key:t},c.createElement(h.default,{assumeStringIsHtml:!0,content:e.definition.newPrompt})):"ChangesPoints"===e.typeName?r=(0,g.default)("The new version of this question has different point values."):"ChangesOptions"===e.typeName?r=(0,g.default)("The new version of this multiple choice question has different options."):"ChangesValidationRules"===e.typeName&&(r=(0,g.default)("The new version of this question allows a different set of responses.")),c.createElement("tr",{className:"ChangesPrompt"===e.typeName?"bt3-success":"bt3-warning",key:t},c.createElement("th",null,n),c.createElement("td",{className:"change-contents"},r))},o=t,(0,i.default)(r,o)}return(0,a.default)(AssignmentUpgradeChanges,e),AssignmentUpgradeChanges.prototype.excludeNoChangeChanges=function excludeNoChangeChanges(e){return e.filter(function(e){return"NoChange"!==e.typeName})},AssignmentUpgradeChanges.prototype.renderChangeGroup=function renderChangeGroup(e,t){var n=this.excludeNoChangeChanges(e);return 0!==n.length&&c.createElement("div",null,c.createElement("h2",null,t),c.createElement("ul",{className:"cif-list-ul"},n.map(this.renderChange)))},AssignmentUpgradeChanges.prototype.renderChangeItem=function renderChangeItem(e,t,n,r){return c.createElement("li",{className:"change-item",key:e},c.createElement("i",{className:t}),c.createElement("span",{className:"type-of-change"},n),c.createElement("div",{className:"change-table-container"},c.createElement("table",{className:"bt3-table"},c.createElement("tbody",null,r))))},AssignmentUpgradeChanges.prototype.render=function render(){return c.createElement("div",{className:"rc-AssignmentUpgradeChanges"},this.renderChangeGroup(this.props.upgradeToCurrentAssignment.submissionSchemaChanges,(0,g.default)("Assignment question changes")),this.renderChangeGroup(this.props.upgradeToCurrentAssignment.reviewSchemaChanges,(0,g.default)("Review question changes")))},AssignmentUpgradeChanges}(c.Component),s.propTypes={upgradeToCurrentAssignment:c.PropTypes.object.isRequired},l);module.exports=v},VQpe:function(module,exports,e){},Wvy5:function(module,exports,e){var t,n;
/** @license jQuery JSONP Core Plugin 2.1.2: Copyright (c) 2010 Julian Aubourg | MIT License: http://www.opensource.org/licenses/mit-license.php
*/t=[e("oYk5")],void 0===(n=function($){function noop(){}function genericCallback(e){b=[e]}function appendScript(e){m.insertBefore(e,m.firstChild)}function callIfDefined(e,t,n){return e&&e.apply(t.context||t,n)}function qMarkOrAmp(e){return/\?/.test(e)?"&":"?"}var e="async",t="charset",n="",r="error",i="_jqjsp",o="on",a="onclick",s="on"+r,l="onload",u="onreadystatechange",c="removeChild",d="<script/>",f="success",p="timeout",h=$.browser,m=$("head")[0]||document.documentElement,g={},v=0,b,y={callback:i,url:location.href};function jsonp(o){var w=(o=$.extend({},y,o)).complete,x=o.dataFilter,S=o.callbackParameter,E=o.callback,C=o.cache,T=o.pageCache,R=o.charset,N=o.url,A=o.data,k=o.timeout,I,P=0,D=noop;if(o.abort=function(){!P++&&D()},!1===callIfDefined(o.beforeSend,o,[o])||P)return o;function notifySuccess(e){!P++&&setTimeout(function(){D(),T&&(g[N]={s:[e]}),x&&(e=x.apply(o,[e])),callIfDefined(o.success,o,[e,f]),callIfDefined(w,o,[o,f])},0)}function notifyError(e){!P++&&setTimeout(function(){D(),T&&e!=p&&(g[N]=e),callIfDefined(o.error,o,[o,e]),callIfDefined(w,o,[o,e])},0)}return N=N||n,A=A?"string"==typeof A?A:$.param(A,o.traditional):n,N+=A?qMarkOrAmp(N)+A:n,S&&(N+=qMarkOrAmp(N)+escape(S)+"=?"),!C&&!T&&(N+=qMarkOrAmp(N)+"_"+(new Date).getTime()+"="),N=N.replace(/=\?(&|$)/,"="+E+"$1"),T&&(I=g[N])?I.s?notifySuccess(I.s[0]):notifyError(I):setTimeout(function(n,o,f){if(!P){function callback(e){(n[a]||noop)(),e=b,b=void 0,e?notifySuccess(e[0]):notifyError(r)}f=k>0&&setTimeout(function(){notifyError(p)},k),D=function(){f&&clearTimeout(f),n[u]=n[a]=n[l]=n[s]=null,m[c](n),o&&m[c](o)},window[E]=genericCallback,(n=$(d)[0]).id=i+v++,R&&(n[t]=R),h.msie?(n.event=a,n.htmlFor=n.id,n[u]=function(){"loaded"==n.readyState&&callback()}):(n[s]=n[l]=callback,h.opera?(o=$(d)[0]).text="jQuery('#"+n.id+"')[0]."+s+"()":n[e]=e),n.src=N,appendScript(n),o&&appendScript(o)}},0),o}jsonp.setup=function(e){$.extend(y,e)},$.jsonp=jsonp}.apply(exports,t))||(module.exports=n)},XgYJ:function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("iCc5")),r,i=_interopRequireDefault(e("FYw3")),o,a=_interopRequireDefault(e("mRg0")),s,l=_interopRequireDefault(e("SDZF")),u=e("QjDL");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function AlicePeerReviewSubmitEvent(t){var r=t.courseBranchId,o=t.itemId;(0,n.default)(this,AlicePeerReviewSubmitEvent);var a=(0,i.default)(this,e.call(this,{type:u.PEER_REVIEW_SUBMIT,courseBranchId:r}));return a.itemId=o,a.id=u.PEER_REVIEW_SUBMIT+"~"+r+"~"+o,a}return(0,a.default)(AlicePeerReviewSubmitEvent,e),AlicePeerReviewSubmitEvent}(l.default);module.exports=c},YDiF:function(module,exports,e){},YTO1:function(module,exports,e){},YWYk:function(module,exports,e){},ZAK3:function(module,exports,e){var t=e("VQpe"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},a4VX:function(module,exports,e){var t,n,r,i;r=window,i=function(e,t,n){var r=function template(n){var r=[],i,o=n||{};return function(t,n,o){r.push('<div style="display:none;position:relative;" role="toolbar" tabindex="0" title="HTML editing toolbar"'+e.cls([t+"-toolbar"],[!0])+'><div style="overflow:auto;"><div style="float:left;"'+e.cls(["left",t+"-commands"],[null,!0])+"><span data-wysihtml5-order='0' class=\"hide\"></span>"),n["toolbar.b"]&&r.push('<button data-wysihtml5-order=\'1\' data-wysihtml5-command="bold" aria-pressed="false" style="font-weight:bold; width: 30px;" type="button" title="Make text bold"'+e.cls([t+"-toolbar-item"],[!0])+">"+e.escape(null==(i=o("B"))?"":i)+"</button>"),n["toolbar.strong"]&&r.push('<button data-wysihtml5-order=\'1\' data-wysihtml5-command="formatInline" data-wysihtml5-command-value="strong" aria-pressed="false" style="font-weight:bold; width: 30px;" type="button" title="Make text bold"'+e.cls([t+"-toolbar-item"],[!0])+">"+e.escape(null==(i=o("B"))?"":i)+"</button>"),n["toolbar.i"]&&r.push('<button data-wysihtml5-order=\'2\' data-wysihtml5-command="italic" aria-pressed="false" style="font-style:italic; font-family: serif; width: 30px;" type="button" title="Make text italic"'+e.cls([t+"-toolbar-item"],[!0])+">"+e.escape(null==(i=o("I"))?"":i)+"</button>"),n["toolbar.em"]&&r.push('<button data-wysihtml5-order=\'2\' data-wysihtml5-command="formatInline" data-wysihtml5-command-value="em" aria-pressed="false" style="font-style:italic; font-family: serif; width: 30px;" type="button" title="Make text italic"'+e.cls([t+"-toolbar-item"],[!0])+">"+e.escape(null==(i=o("I"))?"":i)+"</button>"),n["toolbar.ul"]&&r.push('<button data-wysihtml5-order=\'3\' data-wysihtml5-command="insertUnOrderedList" aria-pressed="false" type="button" title="Insert bullets" style="width:30px;"'+e.cls([t+"-toolbar-item"],[!0])+'><span class="cif-list-ul"></span></button>'),n["toolbar.ol"]&&r.push('<button data-wysihtml5-order=\'4\' data-wysihtml5-command="insertOrderedList" aria-pressed="false" type="button" title="Insert numbered bullets" style="width:30px;"'+e.cls([t+"-toolbar-item"],[!0])+'><span class="cif-list-ol"></span></button>'),r.push('</div><div style="float:right;"'+e.cls(["right",t+"-command-view"],[null,!0])+'><span data-wysihtml5-order=\'0\' class="hide"></span></div><div style="clear:both;"></div></div><div'+e.cls([t+"-toolbar-modals"],[!0])+"></div></div>")}.call(this,"prefix"in o?o.prefix:"undefined"!=typeof prefix?prefix:void 0,"options"in o?o.options:"undefined"!=typeof options?options:void 0,"_t"in o?o._t:void 0!==t?t:void 0),r.join("")};return function(e){return e&&"_t"in e&&(t=e._t.merge(t)),r(e)}},t=[e("xgPa"),e("84XT")],void 0===(n=function(e,t){var n;return i(e,t,n)}.apply(exports,t))||(module.exports=n)},brxL:function(module,exports,e){"use strict";exports.default={"ar":true,"de":true,"es":true,"fr":true,"ja":true,"ko":true,"pseudo":true,"pt":true,"ru":true,"tr":true,"zh":true,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":true}},cbTo:function(module,exports,e){var t=e("F6wr"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},dN2h:function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("iCc5")),r,i=_interopRequireDefault(e("FYw3")),o,a=_interopRequireDefault(e("mRg0")),s,l=_interopRequireDefault(e("SDZF")),u=e("QjDL");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function AlicePeerReviewSaveEvent(t){var r=t.courseBranchId,o=t.itemId;(0,n.default)(this,AlicePeerReviewSaveEvent);var a=(0,i.default)(this,e.call(this,{type:u.PEER_REVIEW_SAVE,courseBranchId:r}));return a.itemId=o,a.id=u.PEER_REVIEW_SAVE+"~"+r+"~"+o,a}return(0,a.default)(AlicePeerReviewSaveEvent,e),AlicePeerReviewSaveEvent}(l.default);module.exports=c},dPJa:function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("iCc5")),r,i=_interopRequireDefault(e("FYw3")),o,a=_interopRequireDefault(e("mRg0")),s,l,u,c=_interopRequireDefault(e("welz")),d,f=_interopRequireWildcard(e("sbe7")),p,h=_interopRequireDefault(e("9can")),m,g=_interopRequireDefault(e("CQyo")),v,b=_interopRequireDefault(e("37kS"));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e("cbTo");var y=(l=s=function(e){function GradingCriteriaPreviewModal(){var t,r,o;(0,n.default)(this,GradingCriteriaPreviewModal);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return t=r=(0,i.default)(this,e.call.apply(e,[this].concat(s))),r.state={showModal:!1},r.onClickModalOpen=function(e){e.preventDefault(),r.setState({showModal:!0})},r.onClickModalClose=function(){r.setState({showModal:!1})},o=t,(0,i.default)(r,o)}return(0,a.default)(GradingCriteriaPreviewModal,e),GradingCriteriaPreviewModal.prototype.render=function render(){if(0===this.props.criteria.length)return null;return f.createElement("div",{className:"rc-GradingCriteriaPreviewModal"},f.createElement("button",{onClick:this.onClickModalOpen,className:"button-link"},(0,b.default)("Preview grading criteria")),this.state.showModal&&f.createElement(g.default,{handleClose:this.onClickModalClose,modalName:(0,b.default)("Preview grading criteria")},f.createElement("h1",null,(0,b.default)("Preview grading criteria")),this.props.privilegedRoleViewReviewSchema&&f.createElement("div",{className:"criteria-warning color-warn-dark"},(0,b.default)("You can preview the grading criteria because you have a privileged role in this course. Normal\n                  learners cannot see the grading criteria until they submit a submission.")),this.props.criteria.map(function(e){return f.createElement("div",{className:"criterion card-no-action compact",key:e.get("id")},f.createElement(h.default,{content:e.get("prompt"),assumeStringIsHtml:!1}))})))},GradingCriteriaPreviewModal}(f.Component),s.propTypes={criteria:f.PropTypes.arrayOf(f.PropTypes.instanceOf(c.default.Model)).isRequired,privilegedRoleViewReviewSchema:f.PropTypes.bool.isRequired},l);module.exports=y},dUKX:function(module,exports,e){var t,n,r,i;r=window,i=function(e,t,n){var r=function template(n){var r=[],i,o=n||{};return function(t,n){r.push('<button data-wysihtml5-command="code" data-wysihtml5-order=\'6\' type="button" title="Format text as code"'+e.cls([t+"-toolbar-item"],[!0])+">"+(null==(i=n("&lt;code&gt;"))?"":i)+"</button>")}.call(this,"prefix"in o?o.prefix:"undefined"!=typeof prefix?prefix:void 0,"_t"in o?o._t:void 0!==t?t:void 0),r.join("")};return function(e){return e&&"_t"in e&&(t=e._t.merge(t)),r(e)}},t=[e("xgPa"),e("P+jP")],void 0===(n=function(e,t){var n;return i(e,t,n)}.apply(exports,t))||(module.exports=n)},exfq:function(module,exports,e){"use strict";var t,n,r,i;r=window,i=function init($,_,e,t,n,r){var i={"prefix.css":"","prefix.data":"data-wysihtml5","composer.class":"wysihtml5","composer.stylesheet":"editor.css","toolbar.enabled":!0,"toolbar.separate":!1,"toolbar.b":!0,"toolbar.strong":!1,"toolbar.i":!0,"toolbar.em":!1,"toolbar.ul":!0,"toolbar.ol":!0,useLineBreaks:!0,parserRules:{tags:{b:1,i:1,p:1,ul:1,li:1,ol:1,u:1,br:1,a:{check_attributes:{href:"url",target:"allow"}}}}},o=function setupAutoResizeTextarea(e){var t=function resize(){var t=parseInt(e.css("height"),10)||0,n=parseInt(e.css("min-height"),10)||0,r=parseInt(e.css("max-height"),10)||0,i=parseInt(e.css("padding-top"),10)||0,o=parseInt(e.css("padding-bottom"),10)||0,a=parseInt(e.css("border-top"),10)||0,s=parseInt(e.css("border-bottom"),10)||0,l=function adjust(e){var l=n?Math.max(parseInt(e,10)+a+s+i+o||0,n):t+a+s+i+o;return r?Math.min(l,r):Math.max(l,e+a+s+i+o)},u=e.get(0).scrollHeight-i-o,c=l(u);e.css({height:c}),c<u?e.css({"overflow-y":"auto"}):e.css({"overflow-y":"hidden"})};e.on("keyup focus",t),t()},a=function setupAutoResize(e){var t=$(e.textareaElement);e.on("load",function(){if(e.composer){var n=$(e.composer.iframe),r,i=$(n[0].contentWindow.document).find("html").css({height:"100%",width:"100%",margin:0,padding:0}).find("body").css({height:"auto",width:"100%",margin:0,padding:0}),o=parseInt(t.css("height"),10)||0,a=parseInt(t.css("min-height"),10)||0,s=parseInt(t.css("max-height"),10)||0,l=parseInt(n.css("padding-top"),10)||0,u=parseInt(n.css("padding-bottom"),10)||0,c=parseInt(n.css("border-top"),10)||0,d=parseInt(n.css("border-bottom"),10)||0,f=function adjust(e){var t=a?Math.max(parseInt(e,10)+c+d+l+u||0,a):o+c+d+l+u;return s?Math.min(t,s):Math.max(t,e+c+d+l+u)},p=function resize(){var e=n;if($(n).is(":visible")){e.height(f(i.outerHeight()));var t=i.children(),r=t.length&&1==t.get(0).nodeType?t.get(0).offsetTop:0;e.height(f(i.get(0).scrollHeight+r)+2),i.height()<parseInt(i.css("line-height"),10)&&e.height(f(i.css("line-height")))}i.find("img").off("load",resize),i.find("img").on("load",resize)};n.css({height:t.css("height")}),e.on("keyup",p),e.on("aftercommand:composer",p),e.on("change_view",p),p()}})},s=function customize(e,t){var n=_.defaults(t,c.defaults),i,o;return _(["composer.stylesheet"]).each(function(e){_(t).has(e)&&(n[e]=_.union(c.defaults[e],t[e]))}),_(["parser"]).each(function(e){_(t).has(e)&&(n[e]=t[e])}),r.parse(e,n,c.defaults["prefix.data"]+"-")},l={},u=function wysiEditorBase(t,n,r,i){var s=$(t);n["toolbar.separate"]||(r.insertBefore(s[0]),"100%"!=s[0].style.width&&r.css("width",s[0].style.width)),s.after(i);var u={toolbar:!0===n["toolbar.enabled"]&&r[0],parserRules:n.parserRules,composerClassName:n["composer.class"],stylesheets:_.isArray(n["composer.stylesheet"])?n["composer.stylesheet"]:[n["composer.stylesheet"]],useLineBreaks:n.useLineBreaks};_(n).has("parser")&&(u.parser=n.parser);var c=new e.Editor(s[0],u);for(var d in _.each(["change","input","paste","keyup","keydown"],function(e){c.on(e,function(t){s.trigger(e,t)})}),a(c),o($(c.textareaElement).addClass(n["prefix.css"]+"-rich-editor")),l)"function"==typeof l[d]&&(c.uid=_.uniqueId(),l[d](c,r,i,n));return c},c=function wysiEditor(e,t){return wysiEditor.constructAndReturnElements(e,t).editor};return c.constructAndReturnElements=function(e,r){var i=$(e),o=s(i,r||{}),a=$(t({_t:n,prefix:o["prefix.css"],options:o})),l=$("<div>").addClass(o["prefix.css"]+"-footer"),c;return{editor:new u(e,o,a,l),$toolbar:a,$footer:l}},c.defaults=i,c.setupSecondaryTextarea=function(t,n){e.dom.copyStyles(["overflow-y","width"]).from(t.textareaElement).to(n[0]),o(n),n.on("input keyup keydown focus blur click mouseover mouseup",function(e){$(t.textarea.element).trigger(e.type)})},c.insertIntoLeftToolbar=function(e,t,n){var r=!1,i=e.find(".left").find("[data-wysihtml5-order]");i.each(function(e){var r=$(this);n<r.attr("data-wysihtml5-order")?t.insertBefore(r).attr({"data-wysihtml5-order":n}):i.length==e+1&&t.insertAfter(r).attr({"data-wysihtml5-order":n})})},c.insertIntoRightToolbar=function(e,t,n){var r=!1,i=e.find(".right").find("[data-wysihtml5-order]");i.each(function(e){var r=$(this);n<r.attr("data-wysihtml5-order")?t.insertBefore(r).attr({"data-wysihtml5-order":n}):i.length==e+1&&t.insertAfter(r).attr({"data-wysihtml5-order":n})})},c.updateFooter=function(e,t){e.html(t)},c.plugin=function(e,t){l[e]=t},c},t=[e("oYk5"),e("VYij"),e("qIWe"),e("a4VX"),e("84XT"),e("HTi0")],void 0===(n=function($,_,e,t,n,r){return i($,_,e,t,n,r)}.apply(exports,t))||(module.exports=n)},f6NP:function(module,exports,e){var t=e("fHto"),n=t.default?t.default:{},r,i=e("HdzH")(n);i.getLocale=function(){return"en"},module.exports=i},f8IG:function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("iCc5")),r,i=_interopRequireDefault(e("FYw3")),o,a=_interopRequireDefault(e("mRg0")),s,l,u,c=_interopRequireWildcard(e("sbe7")),d=e("MnCE"),f,p=_interopRequireDefault(e("8cuT")),h,m=_interopRequireDefault(e("pNKQ")),g=e("ih6J"),v,b=_interopRequireDefault(e("sQ/U"));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var y=(l=s=function(e){function PeerItemUpgradeNotification(){var t,r,o;(0,n.default)(this,PeerItemUpgradeNotification);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return t=r=(0,i.default)(this,e.call.apply(e,[this].concat(s))),r.onRequestUpgrade=function(){var e=r.props,t=e.courseId,n=e.computedItem.id,i=e.submission,o=e.assignmentVersion,a=e.forceUpgradeToAssignmentVersion;r.context.executeAction(g.upgradeSubmission,{itemId:n,submission:i,assignmentVersion:o,forceUpgradeToAssignmentVersion:a,courseId:t,userId:b.default.get().id})},o=t,(0,i.default)(r,o)}return(0,a.default)(PeerItemUpgradeNotification,e),PeerItemUpgradeNotification.prototype.render=function render(){if(null==this.props.upgradeToCurrentAssignment)return null;return c.createElement("div",{className:"rc-PeerItemUpgradeNotification"},c.createElement(m.default,{onRequestUpgrade:this.onRequestUpgrade,upgradeToCurrentAssignment:this.props.upgradeToCurrentAssignment,showStaleAssignmentVersionError:this.props.showStaleAssignmentVersionError}))},PeerItemUpgradeNotification}(c.Component),s.contextTypes={executeAction:c.PropTypes.func.isRequired},l);module.exports=(0,d.compose)((0,p.default)(["PeerSubmissionDraftStore","CourseStore"],function(e){var t=e.PeerSubmissionDraftStore,n=e.CourseStore,r,i=t.getState().latestSubmissionAndRelated,o=null,a=null,s=null;return null!=i&&(o=i.upgradeToCurrentAssignment,a=i.submissionSchema.assignmentVersion,s=i.upgradeToCurrentAssignment&&i.upgradeToCurrentAssignment.upgradeToVersion),{submission:i&&i.submission,upgradeToCurrentAssignment:o,assignmentVersion:a,forceUpgradeToAssignmentVersion:s,courseId:n.getCourseId()}}))(y)},fHto:function(module,exports,e){"use strict";exports.default={"ar":true,"de":true,"es":true,"fr":true,"ja":true,"ko":true,"pseudo":true,"pt":true,"ru":true,"tr":true,"zh":true,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":true}},fK8H:function(module,exports,e){"use strict";var t,n=_interopRequireWildcard(e("sbe7")),r,i=_interopRequireDefault(e("oYk5")),o,a=_interopRequireDefault(e("sIXp")),s,l=_interopRequireDefault(e("KcZu"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var u=function RichTextEditView(e){var t=e.courseId,r=e.submissionPart,o=e.update,s=e.disabled,u=e.partId;if("richText"!==r.typeName)return null;var c="cml"===r.definition.richText.typeName?a.default:l.default,d=function mapContentFn(e){return e},f=r.definition.richText;return"html"===r.definition.richText.typeName&&(f=r.definition.richText.definition,d=function mapContentFn(e){return{typeName:"html",definition:e}}),n.createElement("div",{className:"rc-RichTextEditView"},!s&&n.createElement(c,{content:f,courseId:t,itemId:u,onChange:function onChange(e){var t=i.default.extend(!0,{},r);t.definition.richText=d(e),o(t)}}),s&&n.createElement(c,{content:f,courseId:t,itemId:u,onChange:function onChange(e){var t=i.default.extend(!0,{},r);t.definition.richText=d(e),o(t)}}))};module.exports=u},fRls:function(module,exports,e){"use strict";exports.default={"es":true,"fr":true,"pseudo":true,"pt":true,"ru":true,"tr":true,"zh":true,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":true}},"fd/V":function(module,exports,e){var t=e("EbrD"),n=t.default?t.default:{},r,i=e("HdzH")(n);i.getLocale=function(){return"en"},module.exports=i},gtDW:function(module,exports,e){"use strict";exports.default={"ar":true,"de":true,"es":true,"fr":true,"ja":true,"ko":true,"pseudo":true,"pt":true,"ru":true,"tr":true,"zh":true,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":true}},i5JE:function(module,exports,e){var t=e("YDiF"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},iB6e:function(module,exports,e){var t=e("brxL"),n=t.default?t.default:{},r,i=e("HdzH")(n);i.getLocale=function(){return"en"},module.exports=i},ih6J:function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("y2bh")),r,i=_interopRequireDefault(e("Xl8Z")),o=e("6iKz"),a=e("wi/V"),s=e("oucI");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.onSaveSuccess=function(e){return function(t){return e.dispatch(s.ActionNames.PEER_SUBMIT_UPDATE_ALERTS,{severity:"warning"}),e.dispatch(s.ActionNames.PEER_SUBMIT_UPDATE_LATEST_SUBMISSION_DRAFT,{latestSubmissionAndRelated:t}),e.dispatch(s.ActionNames.PEER_SUBMISSION_APP_STATE_SAVE_SUCCESS),t}},exports.onSaveFailure=function(e){return function(t){if(t.responseJSON||t.status)return e.dispatch(s.ActionNames.PEER_SUBMISSION_APP_STATE_SAVE_ERROR,{statusCode:t.status,response:t.responseJSON}),null;throw t}},exports.localUpdateSubmission=function(e,t){var n=t.submission;e.dispatch(s.ActionNames.PEER_SUBMIT_LOCAL_UPDATE_DRAFT_SUBMISSION,{submission:n})};var l=function updateSubmissionDraft(e){var t=e.userId,r=e.courseId,i=e.itemId,o=e.submission;if(null==o.versionedAssignmentId)throw new Error("Error saving draft submission: could not find existing assignment id");return n.default.updateSubmissionDraft({userId:t,courseId:r,itemId:i,submissionDraftUpdate:{submission:{title:o.definition.title,parts:o.definition.parts},attachedAssignmentId:o.versionedAssignmentId}})};exports.saveSubmission=function(e,t){var n=t.userId,r=t.courseId,i=t.itemId,o=t.submission,u=t.assignmentVersion;return e.dispatch(s.ActionNames.PEER_SUBMISSION_APP_STATE_SAVING),l({userId:n,courseId:r,itemId:i,submission:o}).then(function(e){return(0,a.convertNaptimeSubmissionDraftToOwnSubmission)(e)}).then(exports.onSaveSuccess(e),exports.onSaveFailure(e))},exports.resetSubmission=function(e,t){var n=t.courseId,r=t.userId,a=t.itemId,s=t.submissionId;return i.default.deleteSubmission({userId:r,courseId:n,itemId:a,submissionId:s}).then(function(){return e.executeAction(o.refreshSubmissionAndProgress,{itemId:a,userId:r,courseId:n})})},exports.upgradeSubmission=function(e,t){var r=t.assignmentVersion,i=t.forceUpgradeToAssignmentVersion,s=t.itemId,u=t.courseId,c=t.userId,d=t.submission;if(null==d.versionedAssignmentId)throw new Error("Error upgrading assignment: could not find existing assignment id");var f=d.versionedAssignmentId.split("@")[0]+"@"+i;return n.default.forceUpgradedSubmissionDraft({userId:c,courseId:u,itemId:s,forceUpgradeToAssignmentId:f}).then(function(e){return(0,a.convertRawSubmissionDraft)(e)}).then(function(e){return l({itemId:s,submission:e,courseId:u,userId:c})}).then(function(e){return(0,a.convertNaptimeSubmissionDraftToOwnSubmission)(e)}).catch(exports.onSaveFailure(e)).then(function(){return e.executeAction(o.refreshSubmissionAndProgress,{itemId:s,userId:c,courseId:u})})},exports.submitSubmission=function(e,t){var n=t.itemId,r=t.submission,u=t.assignmentVersion,c=t.verifiableId,d=t.courseId,f=t.userId;return e.dispatch(s.ActionNames.PEER_SUBMISSION_APP_STATE_SUBMITTING),l({itemId:n,submission:r,courseId:d,userId:f}).then(function(e){return(0,a.convertNaptimeSubmissionDraftToOwnSubmission)(e)}).then(exports.onSaveSuccess(e),exports.onSaveFailure(e)).then(function(e){var t=!1;if(e&&e.errorTree&&e.errorTree.errors&&(t=!!e.errorTree.errors.find(function(e){return e.blocksSubmit})),t||!e)throw new Error("submit blocked by errors");return e}).then(function(e){return i.default.submitSubmission({courseId:d,itemId:n,verifiableId:c,draftCreatedAt:e.submission.createdAt})}).then(function(){return e.dispatch(s.ActionNames.PEER_SUBMISSION_APP_STATE_SUBMIT_SUCCESS),e.executeAction(o.refreshSubmissionAndProgress,{itemId:n,userId:f,courseId:d})}).catch(function(){return e.dispatch(s.ActionNames.PEER_SUBMISSION_APP_STATE_SUBMIT_ERROR)})}},kD95:function(module,exports,e){"use strict";var t,n;!function(){function css_beautify(e,t){var n=(t=t||{}).indent_size||4,r=t.indent_char||" ";"string"==typeof n&&(n=parseInt(n,10));var i=/^\s+$/,o=/[\w$\-_]/,a=-1,s;function next(){return s=e.charAt(++a)}function peek(){return e.charAt(a+1)}function eatString(t){for(var n=a;next();)if("\\"===s)next(),next();else{if(s===t)break;if("\n"===s)break}return e.substring(n,a+1)}function eatWhitespace(){for(var e=a;i.test(peek());)a++;return a!==e}function skipWhitespace(){var e=a;do{}while(i.test(next()));return a!==e+1}function eatComment(){var t=a;for(next();next();)if("*"===s&&"/"===peek()){a++;break}return e.substring(t,a+1)}function lookBack(t){return e.substring(a-t.length,a).toLowerCase()===t}var l=e.match(/^[\r\n]*[\t ]*/)[0],u=Array(n+1).join(r),c=0;function indent(){c++,l+=u}function outdent(){c--,l=l.slice(0,-n)}var d={"{":function(e){d.singleSpace(),f.push(e),d.newLine()},"}":function(e){d.newLine(),f.push(e),d.newLine()},newLine:function(e){if(!e)for(;i.test(f[f.length-1]);)f.pop();f.length&&f.push("\n"),l&&f.push(l)},singleSpace:function(){f.length&&!i.test(f[f.length-1])&&f.push(" ")}},f=[],p;for(l&&f.push(l);;){var h=skipWhitespace();if(!s)break;"{"===s?(indent(),d["{"](s)):"}"===s?(outdent(),d["}"](s)):'"'===s||"'"===s?f.push(eatString(s)):";"===s?f.push(s,"\n",l):"/"===s&&"*"===peek()?(d.newLine(),f.push(eatComment(),"\n",l)):"("===s?lookBack("url")?(f.push(s),eatWhitespace(),next()&&(")"!==s&&'"'!==s&&"'"!==s?f.push(eatString(")")):a--)):(h&&d.singleSpace(),f.push(s),eatWhitespace()):")"===s?f.push(s):","===s?(eatWhitespace(),f.push(s),d.singleSpace()):"]"===s?f.push(s):"["===s||"="===s?(eatWhitespace(),f.push(s)):(h&&d.singleSpace(),f.push(s))}return f.join("").replace(/[\n ]+$/,"")}void 0===(n=function(){return{css_beautify:css_beautify}}.apply(exports,t=[]))||(module.exports=n)}()},kFiP:function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("8cuT")),r,i=_interopRequireWildcard(e("sbe7")),o,a=_interopRequireDefault(e("VYij")),s,l=_interopRequireDefault(e("L1vm")),u,c=_interopRequireDefault(e("vPwT")),d,f=_interopRequireDefault(e("jsrg")),p,h=_interopRequireDefault(e("0xvN")),m,g=_interopRequireDefault(e("UjVa")),v,b=_interopRequireDefault(e("s2tf")),y,w=_interopRequireDefault(e("9zHD")),x,S=_interopRequireDefault(e("4qA7"));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var E=function PeerItemSubmittedView(e){var t=e.lastSaveTime,n=e.computedItem,r=e.title,o=e.submissionId,a=e.courseBranchId,s=e.courseId;return i.createElement("div",{className:"rc-PeerItemSubmittedView rc-AssignmentSubmit"},i.createElement(b.default,{itemId:n.id,courseBranchId:a,courseId:s,hasSubmitted:!0}),i.createElement(h.default,{title:r,createdAt:t,shareableLink:i.createElement(g.default,{computedItem:n,submissionId:o})}),i.createElement(c.default,{courseId:s,computedItem:n}))};module.exports=a.default.compose((0,n.default)(["PeerViewSubmissionStore",w.default,S.default],function(e){var t=e.PeerViewSubmissionStore,n=e.CourseStore,r=e.SessionStore,i=void 0,o=void 0,a=void 0;return t.getState().submissionAndRelated&&(a=t.getState().submissionAndRelated.submission.definition.title,o=t.getState().submissionAndRelated.submission.id,i=t.getState().submissionAndRelated.submission.createdAt),{title:a,submissionId:o,lastSaveTime:i,courseId:n.getCourseId(),courseBranchId:r.getBranchId()||n.getCourseId()}}),(0,f.default)(function(e){return e.submissionId}),l.default.createTrackedContainer(function(){return{namespace:{page:"peer_review_my_project_review"}}}))(E)},l4kk:function(module,exports,e){var t,n,r,i;r=window,i=function(e,t,n){var r=function template(t){var n=[],r,i=t||{};return function(t){n.push("<div"+e.cls([t+"-footer-rich"],[!0])+'><div style="float:left;"></div><div style="float:right;"></div></div>')}.call(this,"prefix"in i?i.prefix:"undefined"!=typeof prefix?prefix:void 0),n.join("")};return function(e){return e&&"_t"in e&&(t=e._t.merge(t)),r(e)}},t=[e("xgPa"),e("tslM")],void 0===(n=function(e,t){var n;return i(e,t,n)}.apply(exports,t))||(module.exports=n)},lSMu:function(module,exports,e){"use strict";var t,n=_interopRequireWildcard(e("sbe7")),r,i=_interopRequireDefault(e("oYk5"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var o=function PlainTextEditView(e){var t=e.submissionPart,r=e.update,o=e.disabled;if("plainText"!==t.typeName)return null;return n.createElement("textarea",{defaultValue:t.definition.plainText,className:"c-peer-review-submit-text-field bt3-form-control",onChange:function onChange(e){var n=i.default.extend(!0,{},t);n.definition.plainText=e.target.value,r(n)},disabled:o})};module.exports=o},mQnx:function(module,exports,e){"use strict";exports.default={"ar":true,"de":true,"es":true,"fr":true,"ja":true,"ko":true,"pseudo":true,"pt":true,"ru":true,"tr":true,"zh":true,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":true}},men7:function(module,exports,e){"use strict";exports.default={"ar":true,"de":true,"es":true,"fr":true,"ja":true,"ko":true,"pseudo":true,"pt":true,"ru":true,"tr":true,"zh":true,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":true}},nfrN:function(module,exports,e){var t,n,r,i;r=window,i=function(e,t,n){var r=function template(n){var r=[],i,o=n||{};return function(t,n){r.push('<div data-wysihtml5-modal-image="data-wysihtml5-modal-image"'+e.attr("data-modal-overlay-class",t+"-overlay",!0,!1)+' role="dialog" aria-label="Create Image" tabindex="-1" class="modal hide"><form><div class="modal-body"><div class="control-group bootstrap-wysihtml5-upload-image"><div style="text-align:center;" class="uploader-controls transloadit-uploader"><div class="uploader-preview"><div><img src=""/></div><div style="margin-top:10px;"><span>'+e.escape(null==(i=n("What size would you like to embed it at?"))?"":i)+' </span><input type="text" style="width:50px;margin-left: 5px; margin-right:5px;" class="uploader-input-width"/><span>'+e.escape(null==(i=n("x"))?"":i)+'</span><input type="text" style="width:50px;margin-left:5px;" class="uploader-input-height"/></div></div><div class="uploader-side"><button type="button" class="btn uploader-button">'+e.escape(null==(i=n("Pick File"))?"":i)+'</button><div class="uploader-file-input"><input type="file" name="my_file" accept="image/png,image/jpeg,image/gif,image/jpg"/></div><div style="display:none;" class="progress progress-striped active uploader-progress"><div style="width:0%" class="bar"></div></div><div class="uploader-input hide"><input type="text" value="" name="result" class="uploader-input-url"/></div></div></div></div></div><div class="modal-footer"><button type="submit" data-modal-close="data-modal-close" style="margin-right:10px;"'+e.cls(["btn","hide",t+"-modal-image-submit"],[null,null,!0])+">"+e.escape(null==(i=n("Insert"))?"":i)+'</button><a data-modal-close="data-modal-close" href="javascript:;">'+e.escape(null==(i=n("Cancel"))?"":i)+"</a></div></form></div>")}.call(this,"prefix"in o?o.prefix:"undefined"!=typeof prefix?prefix:void 0,"_t"in o?o._t:void 0!==t?t:void 0),r.join("")};return function(e){return e&&"_t"in e&&(t=e._t.merge(t)),r(e)}},t=[e("xgPa"),e("Gmd3")],void 0===(n=function(e,t){var n;return i(e,t,n)}.apply(exports,t))||(module.exports=n)},pNKQ:function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("iCc5")),r,i=_interopRequireDefault(e("FYw3")),o,a=_interopRequireDefault(e("mRg0")),s,l,u,c=_interopRequireDefault(e("w/1P")),d,f=_interopRequireWildcard(e("sbe7")),p,h=_interopRequireDefault(e("CQyo")),m,g=_interopRequireDefault(e("VE4c")),v,b=_interopRequireDefault(e("37kS"));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var y=(l=s=function(e){function AssignmentUpgradeNotification(){var t,r,o;(0,n.default)(this,AssignmentUpgradeNotification);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return t=r=(0,i.default)(this,e.call.apply(e,[this].concat(s))),r.state={modalOpen:!1},r.onClickSeeChanges=function(){r.setState({modalOpen:!0})},r.onClickUpgrade=function(){r.onModalClose(),r.props.onRequestUpgrade()},r.onModalClose=function(){r.setState({modalOpen:!1})},o=t,(0,i.default)(r,o)}return(0,a.default)(AssignmentUpgradeNotification,e),AssignmentUpgradeNotification.prototype.renderAlert=function renderAlert(){var e=(0,c.default)({"bt3-alert":!0,"bt3-alert-info":!this.props.showStaleAssignmentVersionError,"bt3-alert-danger":this.props.showStaleAssignmentVersionError});return f.createElement("div",{className:e},(0,b.default)("A new version of this assignment exists.")," ",f.createElement("button",{className:"button-link",onClick:this.onClickSeeChanges},(0,b.default)("Click here to see the changes and get the new version.")))},AssignmentUpgradeNotification.prototype.renderModal=function renderModal(){if(this.state.modalOpen){var e=this.props.upgradeToCurrentAssignment,t=!1,n=!1;return null!=e&&("NotifiesUser"===e.severity?(t=(0,b.default)("Upgrade assignment"),n=f.createElement("p",null,(0,b.default)('\n                The assignment changed since you started working on it. Click\n                "Upgrade assignment" to get the new assignment. Please read the\n                new assignment carefully and update your submission to follow\n                the new instructions.\n              '))):"ClearsSubmission"===e.severity&&(t=(0,b.default)("Delete draft and upgrade assignment"),n=f.createElement("p",null,(0,b.default)("\n                The assignment changed since you started working on it. We need\n                to delete your draft to give you the new assignment.\n              ")," ",f.createElement("strong",null,(0,b.default)("\n                  Please save a copy of your submission outside Coursera before\n                  continuing.\n                "))," ",(0,b.default)('\n                Click "Delete draft and upgrade assignment" to get the new\n                assignment.\n              ')))),f.createElement(h.default,{handleClose:this.onModalClose,modalName:(0,b.default)("New assignment version")},f.createElement("div",{className:"rc-AssignmentUpgradeNotification assignment-upgrade-explanation"},f.createElement("h3",null,(0,b.default)("New assignment version")),n,null!=this.props.upgradeToCurrentAssignment&&f.createElement(g.default,{upgradeToCurrentAssignment:this.props.upgradeToCurrentAssignment}),f.createElement("div",{className:"c-modal-action-bar"},f.createElement("button",{className:"bt3-btn c-modal-action-button",onClick:this.onModalClose},(0,b.default)("Cancel")),f.createElement("button",{className:"bt3-btn bt3-btn-success c-modal-action-button",onClick:this.onClickUpgrade},t))))}return null},AssignmentUpgradeNotification.prototype.render=function render(){var e=this.props.upgradeToCurrentAssignment;return e&&"AutomaticallyUpgrades"!==e.severity?f.createElement("div",{className:"rc-AssignmentUpgradeNotification"},this.renderAlert(),this.renderModal()):null},AssignmentUpgradeNotification}(f.Component),s.propTypes={onRequestUpgrade:f.PropTypes.func.isRequired,showStaleAssignmentVersionError:f.PropTypes.bool.isRequired,upgradeToCurrentAssignment:f.PropTypes.object},l);module.exports=y},q8VC:function(module,exports,e){"use strict";exports.default={"ar":true,"de":true,"es":true,"fr":true,"ja":true,"ko":true,"pseudo":true,"pt":true,"ru":true,"tr":true,"zh":true,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":true}},qDrG:function(module,exports,e){var t=e("YWYk"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},qIWe:function(module,exports,e){var t,n,r,i;r=window,i=function(){var e=r.document,t={version:"0.4.0pre",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"\ufeff",EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,DELETE_KEY:46},n=function(){var t="object",n="function",i="undefined",o=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],a=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],s=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],l=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"];function isHostMethod(e,r){var i=typeof e[r];return i==n||!(i!=t||!e[r])||"unknown"==i}function isHostObject(e,n){return!(typeof e[n]!=t||!e[n])}function isHostProperty(e,t){return typeof e[t]!=i}function createMultiplePropertyTest(e){return function(t,n){for(var r=n.length;r--;)if(!e(t,n[r]))return!1;return!0}}var u=createMultiplePropertyTest(isHostMethod),c=createMultiplePropertyTest(isHostObject),d=createMultiplePropertyTest(isHostProperty);function isTextRange(e){return e&&u(e,l)&&d(e,s)}var f={version:"1.2.2",initialized:!1,supported:!0,util:{isHostMethod:isHostMethod,isHostObject:isHostObject,isHostProperty:isHostProperty,areHostMethods:u,areHostObjects:c,areHostProperties:d,isTextRange:isTextRange},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};function fail(e){r.alert("Rangy not supported in your browser. Reason: "+e),f.initialized=!0,f.supported=!1}function warn(e){var t="Rangy warning: "+e;f.config.alertOnWarn?r.alert(t):typeof r.console!=i&&typeof window.console.log!=i&&r.console.log(t)}f.fail=fail,f.warn=warn,!{}.hasOwnProperty?fail("hasOwnProperty not supported"):f.util.extend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};var p=[],h=[];function init(){if(f.initialized)return;var t,n=!1,i=!1;isHostMethod(e,"createRange")&&(t=e.createRange(),u(t,a)&&d(t,o)&&(n=!0),t.detach());var s=isHostObject(e,"body")?e.body:e.getElementsByTagName("body")[0];s&&isHostMethod(s,"createTextRange")&&isTextRange(t=s.createTextRange())&&(i=!0),n||i||fail("Neither Range nor TextRange are implemented"),f.initialized=!0,f.features={implementsDomRange:n,implementsTextRange:i};for(var l=h.concat(p),c=0,m=l.length;c<m;++c)try{l[c](f)}catch(e){isHostObject(r,"console")&&isHostMethod(window.console,"log")&&r.console.log("Init listener threw an exception. Continuing.",e)}}f.init=init,f.addInitListener=function(e){f.initialized?e(f):p.push(e)};var m=[];function createMissingNativeApi(e){e=e||r,init();for(var t=0,n=m.length;t<n;++t)m[t](e)}function Module(e){this.name=e,this.initialized=!1,this.supported=!1}f.addCreateMissingNativeApiListener=function(e){m.push(e)},f.createMissingNativeApi=createMissingNativeApi,Module.prototype.fail=function(e){throw this.initialized=!0,this.supported=!1,new Error("Module '"+this.name+"' failed to load: "+e)},Module.prototype.warn=function(e){f.warn("Module "+this.name+": "+e)},Module.prototype.createError=function(e){return new Error("Error in Rangy "+this.name+" module: "+e)},f.createModule=function(e,t){var module=new Module(e);f.modules[e]=module,h.push(function(e){t(e,module),module.initialized=!0,module.supported=!0})},f.requireModules=function(e){for(var t=0,n=e.length,module,r;t<n;++t){if(r=e[t],!((module=f.modules[r])&&module instanceof Module))throw new Error("Module '"+r+"' not found");if(!module.supported)throw new Error("Module '"+r+"' not supported")}};var g=!1,v=function(e){g||(g=!0,f.initialized||init())};if(typeof r==i)return void fail("No window found");if(typeof e==i)return void fail("No document found");return isHostMethod(e,"addEventListener")&&e.addEventListener("DOMContentLoaded",v,!1),isHostMethod(r,"addEventListener")?r.addEventListener("load",v,!1):isHostMethod(r,"attachEvent")?r.attachEvent("onload",v):fail("Window does not have required addEventListener or attachEvent method"),f}();
/**
     * @license wysihtml5 v0.4.0pre
     * https://github.com/xing/wysihtml5
     *
     * Author: Christopher Blum (https://github.com/tiff)
     *
     * Copyright (C) 2012 XING AG
     * Licensed under the MIT license (MIT)
     *
     */n.createModule("DomUtil",function(t,module){var n="undefined",r=t.util;r.areHostMethods(e,["createDocumentFragment","createElement","createTextNode"])||module.fail("document missing a Node creation method"),r.isHostMethod(e,"getElementsByTagName")||module.fail("document missing getElementsByTagName method");var i=e.createElement("div");r.areHostMethods(i,["insertBefore","appendChild","cloneNode"]||!r.areHostObjects(i,["previousSibling","nextSibling","childNodes","parentNode"]))||module.fail("Incomplete Element implementation"),r.isHostProperty(i,"innerHTML")||module.fail("Element is missing innerHTML property");var o=e.createTextNode("test");r.areHostMethods(o,["splitText","deleteData","insertData","appendData","cloneNode"]||!r.areHostObjects(i,["previousSibling","nextSibling","childNodes","parentNode"])||!r.areHostProperties(o,["data"]))||module.fail("Incomplete Text Node implementation");var a=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1};function isHtmlNamespace(e){var t;return typeof e.namespaceURI==n||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function parentElement(e){var t=e.parentNode;return 1==t.nodeType?t:null}function getNodeIndex(e){for(var t=0;e=e.previousSibling;)t++;return t}function getNodeLength(e){var t;return isCharacterDataNode(e)?e.length:(t=e.childNodes)?t.length:0}function getCommonAncestor(e,t){var n=[],r;for(r=e;r;r=r.parentNode)n.push(r);for(r=t;r;r=r.parentNode)if(a(n,r))return r;return null}function isAncestorOf(e,t,n){for(var r=n?t:t.parentNode;r;){if(r===e)return!0;r=r.parentNode}return!1}function getClosestAncestorIn(e,t,n){for(var r,i=n?e:e.parentNode;i;){if((r=i.parentNode)===t)return i;i=r}return null}function isCharacterDataNode(e){var t=e.nodeType;return 3==t||4==t||8==t}function insertAfter(e,t){var n=t.nextSibling,r=t.parentNode;return n?r.insertBefore(e,n):r.appendChild(e),e}function splitDataNode(e,t){var n=e.cloneNode(!1);return n.deleteData(0,t),e.deleteData(t,e.length-t),insertAfter(n,e),n}function getDocument(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=n)return e.ownerDocument;if(typeof e.document!=n)return e.document;if(e.parentNode)return getDocument(e.parentNode);throw new Error("getDocument: no document found for node")}function getWindow(e){var t=getDocument(e);if(typeof t.defaultView!=n)return t.defaultView;if(typeof t.parentWindow!=n)return t.parentWindow;throw new Error("Cannot get a window object for node")}function getIframeDocument(e){if(typeof e.contentDocument!=n)return e.contentDocument;if(typeof e.contentWindow!=n)return e.contentWindow.document;throw new Error("getIframeWindow: No Document object found for iframe element")}function getIframeWindow(e){if(typeof e.contentWindow!=n)return e.contentWindow;if(typeof e.contentDocument!=n)return e.contentDocument.defaultView;throw new Error("getIframeWindow: No Window object found for iframe element")}function getBody(e){return r.isHostObject(e,"body")?e.body:e.getElementsByTagName("body")[0]}function getRootContainer(e){for(var t;t=e.parentNode;)e=t;return e}function comparePoints(e,t,n,r){var i,o,a,s,l;if(e==n)return t===r?0:t<r?-1:1;if(i=getClosestAncestorIn(n,e,!0))return t<=getNodeIndex(i)?-1:1;if(i=getClosestAncestorIn(e,n,!0))return getNodeIndex(i)<r?-1:1;if((a=e===(o=getCommonAncestor(e,n))?o:getClosestAncestorIn(e,o,!0))===(s=n===o?o:getClosestAncestorIn(n,o,!0)))throw new Error("comparePoints got to case 4 and childA and childB are the same!");for(l=o.firstChild;l;){if(l===a)return-1;if(l===s)return 1;l=l.nextSibling}throw new Error("Should not be here!")}function fragmentFromNodeChildren(e){for(var t=getDocument(e).createDocumentFragment(),n;n=e.firstChild;)t.appendChild(n);return t}function inspectNode(e){if(!e)return"[No node]";if(isCharacterDataNode(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">["+e.childNodes.length+"]"}return e.nodeName}function NodeIterator(e){this.root=e,this._next=e}function createIterator(e){return new NodeIterator(e)}function DomPosition(e,t){this.node=e,this.offset=t}function DOMException(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}NodeIterator.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next,t,n;if(this._current)if(t=e.firstChild)this._next=t;else{for(n=null;e!==this.root&&!(n=e.nextSibling);)e=e.parentNode;this._next=n}return this._current},detach:function(){this._current=this._next=this.root=null}},DomPosition.prototype={equals:function(e){return this.node===e.node&this.offset==e.offset},inspect:function(){return"[DomPosition("+inspectNode(this.node)+":"+this.offset+")]"}},DOMException.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},DOMException.prototype.toString=function(){return this.message},t.dom={arrayContains:a,isHtmlNamespace:isHtmlNamespace,parentElement:parentElement,getNodeIndex:getNodeIndex,getNodeLength:getNodeLength,getCommonAncestor:getCommonAncestor,isAncestorOf:isAncestorOf,getClosestAncestorIn:getClosestAncestorIn,isCharacterDataNode:isCharacterDataNode,insertAfter:insertAfter,splitDataNode:splitDataNode,getDocument:getDocument,getWindow:getWindow,getIframeWindow:getIframeWindow,getIframeDocument:getIframeDocument,getBody:getBody,getRootContainer:getRootContainer,comparePoints:comparePoints,inspectNode:inspectNode,fragmentFromNodeChildren:fragmentFromNodeChildren,createIterator:createIterator,DomPosition:DomPosition},t.DOMException=DOMException}),n.createModule("DomRange",function(t,module){t.requireModules(["DomUtil"]);var n=t.dom,r=n.DomPosition,i=t.DOMException;function isNonTextPartiallySelected(e,t){return 3!=e.nodeType&&(n.isAncestorOf(e,t.startContainer,!0)||n.isAncestorOf(e,t.endContainer,!0))}function getRangeDocument(e){return n.getDocument(e.startContainer)}function dispatchEvent(e,t,n){var r=e._listeners[t];if(r)for(var i=0,o=r.length;i<o;++i)r[i].call(e,{target:e,args:n})}function getBoundaryBeforeNode(e){return new r(e.parentNode,n.getNodeIndex(e))}function getBoundaryAfterNode(e){return new r(e.parentNode,n.getNodeIndex(e)+1)}function insertNodeAtPosition(e,t,r){var i=11==e.nodeType?e.firstChild:e;return n.isCharacterDataNode(t)?r==t.length?n.insertAfter(e,t):t.parentNode.insertBefore(e,0===r?t:n.splitDataNode(t,r)):r>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[r]),i}function cloneSubtree(e){for(var t,n,r=getRangeDocument(e.range).createDocumentFragment(),o;n=e.next();){if(t=e.isPartiallySelectedSubtree(),n=n.cloneNode(!t),t&&(o=e.getSubtreeIterator(),n.appendChild(cloneSubtree(o)),o.detach(!0)),10==n.nodeType)throw new i("HIERARCHY_REQUEST_ERR");r.appendChild(n)}return r}function iterateSubtree(e,t,r){var i,o,a,s;for(r=r||{stop:!1};a=e.next();)if(e.isPartiallySelectedSubtree()){if(!1===t(a))return void(r.stop=!0);if(iterateSubtree(s=e.getSubtreeIterator(),t,r),s.detach(!0),r.stop)return}else for(i=n.createIterator(a);o=i.next();)if(!1===t(o))return void(r.stop=!0)}function deleteSubtree(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(deleteSubtree(t=e.getSubtreeIterator()),t.detach(!0)):e.remove()}function extractSubtree(e){for(var t,n=getRangeDocument(e.range).createDocumentFragment(),r;t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),r=e.getSubtreeIterator(),t.appendChild(extractSubtree(r)),r.detach(!0)):e.remove(),10==t.nodeType)throw new i("HIERARCHY_REQUEST_ERR");n.appendChild(t)}return n}function getNodesInRange(e,t,n){var r=!(!t||!t.length),i,o=!!n;r&&(i=new RegExp("^("+t.join("|")+")$"));var a=[];return iterateSubtree(new RangeIterator(e,!1),function(e){r&&!i.test(e.nodeType)||o&&!n(e)||a.push(e)}),a}function inspect(e){var t;return"["+(void 0===e.getName?"Range":e.getName())+"("+n.inspectNode(e.startContainer)+":"+e.startOffset+", "+n.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function RangeIterator(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var r=e.commonAncestorContainer;this.sc===this.ec&&n.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==r||n.isCharacterDataNode(this.sc)?n.getClosestAncestorIn(this.sc,r,!0):this.sc.childNodes[this.so],this._last=this.ec!==r||n.isCharacterDataNode(this.ec)?n.getClosestAncestorIn(this.ec,r,!0):this.ec.childNodes[this.eo-1])}}function RangeException(e){this.code=this[e],this.codeName=e,this.message="RangeException: "+this.codeName}function RangeNodeIterator(e,t,n){this.nodes=getNodesInRange(e,t,n),this._next=this.nodes[0],this._position=0}RangeIterator.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,n.isCharacterDataNode(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e=this._current,t,r;!n.isCharacterDataNode(e)||e!==this.sc&&e!==this.ec?e.parentNode&&e.parentNode.removeChild(e):(t=e===this.sc?this.so:0)!=(r=e===this.ec?this.eo:e.length)&&e.deleteData(t,r-t)},isPartiallySelectedSubtree:function(){var e;return isNonTextPartiallySelected(this._current,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)(e=this.range.cloneRange()).collapse();else{e=new Range(getRangeDocument(this.range));var t=this._current,r=t,i=0,o=t,a=n.getNodeLength(t);n.isAncestorOf(t,this.sc,!0)&&(r=this.sc,i=this.so),n.isAncestorOf(t,this.ec,!0)&&(o=this.ec,a=this.eo),updateBoundaries(e,r,i,o,a)}return new RangeIterator(e,this.clonePartiallySelectedTextNodes)},detach:function(e){e&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},RangeException.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},RangeException.prototype.toString=function(){return this.message},RangeNodeIterator.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var o=[1,3,4,5,7,8,10],a=[2,9,11],s=[5,6,10,12],l=[1,3,4,5,7,8,10,11],u=[1,3,4,5,7,8];function createAncestorFinder(e){return function(t,r){for(var i,o=r?t:t.parentNode;o;){if(i=o.nodeType,n.arrayContains(e,i))return o;o=o.parentNode}return null}}var c=n.getRootContainer,d=createAncestorFinder([9,11]),f=createAncestorFinder(s),p=createAncestorFinder([6,10,12]);function assertNoDocTypeNotationEntityAncestor(e,t){if(p(e,t))throw new RangeException("INVALID_NODE_TYPE_ERR")}function assertNotDetached(e){if(!e.startContainer)throw new i("INVALID_STATE_ERR")}function assertValidNodeType(e,t){if(!n.arrayContains(t,e.nodeType))throw new RangeException("INVALID_NODE_TYPE_ERR")}function assertValidOffset(e,t){if(t<0||t>(n.isCharacterDataNode(e)?e.length:e.childNodes.length))throw new i("INDEX_SIZE_ERR")}function assertSameDocumentOrFragment(e,t){if(d(e,!0)!==d(t,!0))throw new i("WRONG_DOCUMENT_ERR")}function assertNodeNotReadOnly(e){if(f(e,!0))throw new i("NO_MODIFICATION_ALLOWED_ERR")}function assertNode(e,t){if(!e)throw new i(t)}function isOrphan(e){return!n.arrayContains(a,e.nodeType)&&!d(e,!0)}function isValidOffset(e,t){return t<=(n.isCharacterDataNode(e)?e.length:e.childNodes.length)}function assertRangeValid(e){if(assertNotDetached(e),isOrphan(e.startContainer)||isOrphan(e.endContainer)||!isValidOffset(e.startContainer,e.startOffset)||!isValidOffset(e.endContainer,e.endOffset))throw new Error("Range error: Range is no longer valid after DOM mutation ("+e.inspect()+")")}var h=e.createElement("style"),m=!1;try{h.innerHTML="<b>x</b>",m=3==h.firstChild.nodeType}catch(e){}t.features.htmlParsingConforms=m;var g=m?function(e){var t=this.startContainer,r=n.getDocument(t);if(!t)throw new i("INVALID_STATE_ERR");var o=null;return 1==t.nodeType?o=t:n.isCharacterDataNode(t)&&(o=n.parentElement(t)),(o=null===o||"HTML"==o.nodeName&&n.isHtmlNamespace(n.getDocument(o).documentElement)&&n.isHtmlNamespace(o)?r.createElement("body"):o.cloneNode(!1)).innerHTML=e,n.fragmentFromNodeChildren(o)}:function(e){assertNotDetached(this);var t,r=getRangeDocument(this).createElement("body");return r.innerHTML=e,n.fragmentFromNodeChildren(r)},v=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],b=0,y=1,w=2,x=3,S=0,E=1,C=2,T=3;function RangePrototype(){}function copyComparisonConstantsToObject(e){e.START_TO_START=b,e.START_TO_END=y,e.END_TO_END=w,e.END_TO_START=x,e.NODE_BEFORE=S,e.NODE_AFTER=E,e.NODE_BEFORE_AND_AFTER=C,e.NODE_INSIDE=T}function copyComparisonConstants(e){copyComparisonConstantsToObject(e),copyComparisonConstantsToObject(e.prototype)}function createRangeContentRemover(e,t){return function(){assertRangeValid(this);var r=this.startContainer,i=this.startOffset,o=this.commonAncestorContainer,a=new RangeIterator(this,!0),s,l;r!==o&&(r=(l=getBoundaryAfterNode(s=n.getClosestAncestorIn(r,o,!0))).node,i=l.offset),iterateSubtree(a,assertNodeNotReadOnly),a.reset();var u=e(a);return a.detach(),t(this,r,i,r,i),u}}function createPrototypeRange(e,r,i){function createBeforeAfterNodeSetter(e,t){return function(n){assertNotDetached(this),assertValidNodeType(n,o),assertValidNodeType(c(n),a);var r=(e?getBoundaryBeforeNode:getBoundaryAfterNode)(n);(t?setRangeStart:setRangeEnd)(this,r.node,r.offset)}}function setRangeStart(e,t,i){var o=e.endContainer,a=e.endOffset;t===e.startContainer&&i===e.startOffset||(c(t)==c(o)&&1!=n.comparePoints(t,i,o,a)||(o=t,a=i),r(e,t,i,o,a))}function setRangeEnd(e,t,i){var o=e.startContainer,a=e.startOffset;t===e.endContainer&&i===e.endOffset||(c(t)==c(o)&&-1!=n.comparePoints(t,i,o,a)||(o=t,a=i),r(e,o,a,t,i))}function setRangeStartAndEnd(e,t,n){t===e.startContainer&&n===e.startOffset&&t===e.endContainer&&n===e.endOffset||r(e,t,n,t,n)}e.prototype=new RangePrototype,t.util.extend(e.prototype,{setStart:function(e,t){assertNotDetached(this),assertNoDocTypeNotationEntityAncestor(e,!0),assertValidOffset(e,t),setRangeStart(this,e,t)},setEnd:function(e,t){assertNotDetached(this),assertNoDocTypeNotationEntityAncestor(e,!0),assertValidOffset(e,t),setRangeEnd(this,e,t)},setStartBefore:createBeforeAfterNodeSetter(!0,!0),setStartAfter:createBeforeAfterNodeSetter(!1,!0),setEndBefore:createBeforeAfterNodeSetter(!0,!1),setEndAfter:createBeforeAfterNodeSetter(!1,!1),collapse:function(e){assertRangeValid(this),e?r(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):r(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){assertNotDetached(this),assertNoDocTypeNotationEntityAncestor(e,!0),r(this,e,0,e,n.getNodeLength(e))},selectNode:function(e){assertNotDetached(this),assertNoDocTypeNotationEntityAncestor(e,!1),assertValidNodeType(e,o);var t=getBoundaryBeforeNode(e),n=getBoundaryAfterNode(e);r(this,t.node,t.offset,n.node,n.offset)},extractContents:createRangeContentRemover(extractSubtree,r),deleteContents:createRangeContentRemover(deleteSubtree,r),canSurroundContents:function(){assertRangeValid(this),assertNodeNotReadOnly(this.startContainer),assertNodeNotReadOnly(this.endContainer);var e=new RangeIterator(this,!0),t=e._first&&isNonTextPartiallySelected(e._first,this)||e._last&&isNonTextPartiallySelected(e._last,this);return e.detach(),!t},detach:function(){i(this)},splitBoundaries:function(){assertRangeValid(this);var e=this.startContainer,t=this.startOffset,i=this.endContainer,o=this.endOffset,a=e===i;n.isCharacterDataNode(i)&&o>0&&o<i.length&&n.splitDataNode(i,o),n.isCharacterDataNode(e)&&t>0&&t<e.length&&(e=n.splitDataNode(e,t),a?(o-=t,i=e):i==e.parentNode&&o>=n.getNodeIndex(e)&&o++,t=0),r(this,e,t,i,o)},normalizeBoundaries:function(){assertRangeValid(this);var e=this.startContainer,t=this.startOffset,i=this.endContainer,o=this.endOffset,a=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(i=e,o=e.length,e.appendData(t.data),t.parentNode.removeChild(t))},s=function(r){var a=r.previousSibling;if(a&&a.nodeType==r.nodeType){e=r;var s=r.length;if(t=a.length,r.insertData(0,a.data),a.parentNode.removeChild(a),e==i)o+=t,i=e;else if(i==r.parentNode){var l=n.getNodeIndex(r);o==l?(i=r,o=s):o>l&&o--}}},l=!0;if(n.isCharacterDataNode(i))i.length==o&&a(i);else{if(o>0){var u=i.childNodes[o-1];u&&n.isCharacterDataNode(u)&&a(u)}l=!this.collapsed}if(l){if(n.isCharacterDataNode(e))0===t&&s(e);else if(t<e.childNodes.length){var c=e.childNodes[t];c&&n.isCharacterDataNode(c)&&s(c)}}else e=i,t=o;r(this,e,t,i,o)},collapseToPoint:function(e,t){assertNotDetached(this),assertNoDocTypeNotationEntityAncestor(e,!0),assertValidOffset(e,t),setRangeStartAndEnd(this,e,t)}}),copyComparisonConstants(e)}function updateCollapsedAndCommonAncestor(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:n.getCommonAncestor(e.startContainer,e.endContainer)}function updateBoundaries(e,t,n,r,i){var o=e.startContainer!==t||e.startOffset!==n,a=e.endContainer!==r||e.endOffset!==i;e.startContainer=t,e.startOffset=n,e.endContainer=r,e.endOffset=i,updateCollapsedAndCommonAncestor(e),dispatchEvent(e,"boundarychange",{startMoved:o,endMoved:a})}function detach(e){assertNotDetached(e),e.startContainer=e.startOffset=e.endContainer=e.endOffset=null,e.collapsed=e.commonAncestorContainer=null,dispatchEvent(e,"detach",null),e._listeners=null}function Range(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},updateCollapsedAndCommonAncestor(this)}RangePrototype.prototype={attachListener:function(e,t){this._listeners[e].push(t)},compareBoundaryPoints:function(e,t){var r,i,o,a;assertRangeValid(this),assertSameDocumentOrFragment(this.startContainer,t.startContainer);var s=e==x||e==b?"start":"end",l=e==y||e==b?"start":"end";return r=this[s+"Container"],i=this[s+"Offset"],o=t[l+"Container"],a=t[l+"Offset"],n.comparePoints(r,i,o,a)},insertNode:function(e){if(assertRangeValid(this),assertValidNodeType(e,l),assertNodeNotReadOnly(this.startContainer),n.isAncestorOf(e,this.startContainer,!0))throw new i("HIERARCHY_REQUEST_ERR");var t=insertNodeAtPosition(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){var e,t;if(assertRangeValid(this),this.collapsed)return getRangeDocument(this).createDocumentFragment();if(this.startContainer===this.endContainer&&n.isCharacterDataNode(this.startContainer))return(e=this.startContainer.cloneNode(!0)).data=e.data.slice(this.startOffset,this.endOffset),(t=getRangeDocument(this).createDocumentFragment()).appendChild(e),t;var r=new RangeIterator(this,!0);return e=cloneSubtree(r),r.detach(),e},canSurroundContents:function(){assertRangeValid(this),assertNodeNotReadOnly(this.startContainer),assertNodeNotReadOnly(this.endContainer);var e=new RangeIterator(this,!0),t=e._first&&isNonTextPartiallySelected(e._first,this)||e._last&&isNonTextPartiallySelected(e._last,this);return e.detach(),!t},surroundContents:function(e){if(assertValidNodeType(e,u),!this.canSurroundContents())throw new RangeException("BAD_BOUNDARYPOINTS_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);insertNodeAtPosition(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){assertRangeValid(this);for(var e=new Range(getRangeDocument(this)),t=v.length,n;t--;)e[n=v[t]]=this[n];return e},toString:function(){assertRangeValid(this);var e=this.startContainer;if(e===this.endContainer&&n.isCharacterDataNode(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],r=new RangeIterator(this,!0);return iterateSubtree(r,function(e){3!=e.nodeType&&4!=e.nodeType||t.push(e.data)}),r.detach(),t.join("")},compareNode:function(e){assertRangeValid(this);var t=e.parentNode,r=n.getNodeIndex(e);if(!t)throw new i("NOT_FOUND_ERR");var o=this.comparePoint(t,r),a=this.comparePoint(t,r+1);return o<0?a>0?C:S:a>0?E:T},comparePoint:function(e,t){if(assertRangeValid(this),assertNode(e,"HIERARCHY_REQUEST_ERR"),assertSameDocumentOrFragment(e,this.startContainer),n.comparePoints(e,t,this.startContainer,this.startOffset)<0)return-1;if(n.comparePoints(e,t,this.endContainer,this.endOffset)>0)return 1;return 0},createContextualFragment:g,toHtml:function(){assertRangeValid(this);var e=getRangeDocument(this).createElement("div");return e.appendChild(this.cloneContents()),e.innerHTML},intersectsNode:function(e,t){if(assertRangeValid(this),assertNode(e,"NOT_FOUND_ERR"),n.getDocument(e)!==getRangeDocument(this))return!1;var r=e.parentNode,i=n.getNodeIndex(e);assertNode(r,"NOT_FOUND_ERR");var o=n.comparePoints(r,i,this.endContainer,this.endOffset),a=n.comparePoints(r,i+1,this.startContainer,this.startOffset);return t?o<=0&&a>=0:o<0&&a>0},isPointInRange:function(e,t){return assertRangeValid(this),assertNode(e,"HIERARCHY_REQUEST_ERR"),assertSameDocumentOrFragment(e,this.startContainer),n.comparePoints(e,t,this.startContainer,this.startOffset)>=0&&n.comparePoints(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e,t){if(assertRangeValid(this),getRangeDocument(e)!=getRangeDocument(this))throw new i("WRONG_DOCUMENT_ERR");var r=n.comparePoints(this.startContainer,this.startOffset,e.endContainer,e.endOffset),o=n.comparePoints(this.endContainer,this.endOffset,e.startContainer,e.startOffset);return t?r<=0&&o>=0:r<0&&o>0},intersection:function(e){if(this.intersectsRange(e)){var t=n.comparePoints(this.startContainer,this.startOffset,e.startContainer,e.startOffset),r=n.comparePoints(this.endContainer,this.endOffset,e.endContainer,e.endOffset),i=this.cloneRange();return-1==t&&i.setStart(e.startContainer,e.startOffset),1==r&&i.setEnd(e.endContainer,e.endOffset),i}return null},union:function(e){if(this.intersectsRange(e,!0)){var t=this.cloneRange();return-1==n.comparePoints(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==n.comparePoints(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new RangeException("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==T},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,n.getNodeLength(e))<=0},containsRange:function(e){return this.intersection(e).equals(e)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var r=n.pop();t.setEnd(r,r.length);var i=this.containsRange(t);return t.detach(),i}return this.containsNodeContents(e)},createNodeIterator:function(e,t){return assertRangeValid(this),new RangeNodeIterator(this,e,t)},getNodes:function(e,t){return assertRangeValid(this),getNodesInRange(this,e,t)},getDocument:function(){return getRangeDocument(this)},collapseBefore:function(e){assertNotDetached(this),this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){assertNotDetached(this),this.setStartAfter(e),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(e){return Range.rangesEqual(this,e)},inspect:function(){return inspect(this)}},createPrototypeRange(Range,updateBoundaries,detach),t.rangePrototype=RangePrototype.prototype,Range.rangeProperties=v,Range.RangeIterator=RangeIterator,Range.copyComparisonConstants=copyComparisonConstants,Range.createPrototypeRange=createPrototypeRange,Range.inspect=inspect,Range.getRangeDocument=getRangeDocument,Range.rangesEqual=function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},t.DomRange=Range,t.RangeException=RangeException}),n.createModule("WrappedRange",function(t,module){var n;t.requireModules(["DomUtil","DomRange"]);var r=t.dom,i=r.DomPosition,o=t.DomRange;function getTextRangeContainerElement(e){var t=e.parentElement(),n=e.duplicate();n.collapse(!0);var i=n.parentElement();(n=e.duplicate()).collapse(!1);var o=n.parentElement(),a=i==o?i:r.getCommonAncestor(i,o);return a==t?a:r.getCommonAncestor(t,a)}function textRangeIsCollapsed(e){return 0===e.compareEndPoints("StartToEnd",e)}function getTextRangeBoundaryPosition(e,t,n,o){var a=e.duplicate();a.collapse(n);var s=a.parentElement();if(r.isAncestorOf(t,s,!0)||(s=t),!s.canHaveHTML)return new i(s.parentNode,r.getNodeIndex(s));var l=r.getDocument(s).createElement("span"),u,c=n?"StartToStart":"StartToEnd",d,f,p,h;do{s.insertBefore(l,l.previousSibling),a.moveToElementText(l)}while((u=a.compareEndPoints(c,e))>0&&l.previousSibling);if(h=l.nextSibling,-1==u&&h&&r.isCharacterDataNode(h)){var m;if(a.setEndPoint(n?"EndToStart":"EndToEnd",e),/[\r\n]/.test(h.data)){var g=a.duplicate(),v=g.text.replace(/\r\n/g,"\r").length;for(m=g.moveStart("character",v);-1==(u=g.compareEndPoints("StartToEnd",g));)m++,g.moveStart("character",1)}else m=a.text.length;p=new i(h,m)}else d=(o||!n)&&l.previousSibling,p=(f=(o||n)&&l.nextSibling)&&r.isCharacterDataNode(f)?new i(f,0):d&&r.isCharacterDataNode(d)?new i(d,d.length):new i(s,r.getNodeIndex(l));return l.parentNode.removeChild(l),p}function createBoundaryTextRange(e,t){var n,i,o=e.offset,a=r.getDocument(e.node),s,l,u=a.body.createTextRange(),c=r.isCharacterDataNode(e.node);return c?i=(n=e.node).parentNode:(n=o<(l=e.node.childNodes).length?l[o]:null,i=e.node),(s=a.createElement("span")).innerHTML="&#feff;",n?i.insertBefore(s,n):i.appendChild(s),u.moveToElementText(s),u.collapse(!t),i.removeChild(s),c&&u[t?"moveStart":"moveEnd"]("character",o),u}if(!t.features.implementsDomRange||t.features.implementsTextRange&&t.config.preferTextRange){if(t.features.implementsTextRange){(n=function(e){this.textRange=e,this.refresh()}).prototype=new o(e),n.prototype.refresh=function(){var e,t,n=getTextRangeContainerElement(this.textRange);textRangeIsCollapsed(this.textRange)?t=e=getTextRangeBoundaryPosition(this.textRange,n,!0,!0):(e=getTextRangeBoundaryPosition(this.textRange,n,!0,!1),t=getTextRangeBoundaryPosition(this.textRange,n,!1,!1)),this.setStart(e.node,e.offset),this.setEnd(t.node,t.offset)},o.copyComparisonConstants(n);var a=function(){return this}();void 0===a.Range&&(a.Range=n),t.createNativeRange=function(t){return(t=t||e).body.createTextRange()}}}else!function(){var i,a=o.rangeProperties,s,l;function updateRangeProperties(e){for(var t=a.length,n;t--;)e[n=a[t]]=e.nativeRange[n]}function updateNativeRange(e,t,n,r,i){var o=e.startContainer!==t||e.startOffset!=n,a=e.endContainer!==r||e.endOffset!=i;(o||a)&&(e.setEnd(r,i),e.setStart(t,n))}function detach(e){e.nativeRange.detach(),e.detached=!0;for(var t=a.length,n;t--;)e[n=a[t]]=null}n=function(e){if(!e)throw new Error("Range must be specified");this.nativeRange=e,updateRangeProperties(this)},o.createPrototypeRange(n,updateNativeRange,detach),(i=n.prototype).selectNode=function(e){this.nativeRange.selectNode(e),updateRangeProperties(this)},i.deleteContents=function(){this.nativeRange.deleteContents(),updateRangeProperties(this)},i.extractContents=function(){var e=this.nativeRange.extractContents();return updateRangeProperties(this),e},i.cloneContents=function(){return this.nativeRange.cloneContents()},i.surroundContents=function(e){this.nativeRange.surroundContents(e),updateRangeProperties(this)},i.collapse=function(e){this.nativeRange.collapse(e),updateRangeProperties(this)},i.cloneRange=function(){return new n(this.nativeRange.cloneRange())},i.refresh=function(){updateRangeProperties(this)},i.toString=function(){return this.nativeRange.toString()};var u=e.createTextNode("test");r.getBody(e).appendChild(u);var c=e.createRange();c.setStart(u,0),c.setEnd(u,0);try{c.setStart(u,1),s=!0,i.setStart=function(e,t){this.nativeRange.setStart(e,t),updateRangeProperties(this)},i.setEnd=function(e,t){this.nativeRange.setEnd(e,t),updateRangeProperties(this)},l=function(e){return function(t){this.nativeRange[e](t),updateRangeProperties(this)}}}catch(e){s=!1,i.setStart=function(e,t){try{this.nativeRange.setStart(e,t)}catch(n){this.nativeRange.setEnd(e,t),this.nativeRange.setStart(e,t)}updateRangeProperties(this)},i.setEnd=function(e,t){try{this.nativeRange.setEnd(e,t)}catch(n){this.nativeRange.setStart(e,t),this.nativeRange.setEnd(e,t)}updateRangeProperties(this)},l=function(e,t){return function(n){try{this.nativeRange[e](n)}catch(r){this.nativeRange[t](n),this.nativeRange[e](n)}updateRangeProperties(this)}}}i.setStartBefore=l("setStartBefore","setEndBefore"),i.setStartAfter=l("setStartAfter","setEndAfter"),i.setEndBefore=l("setEndBefore","setStartBefore"),i.setEndAfter=l("setEndAfter","setStartAfter"),c.selectNodeContents(u),c.startContainer==u&&c.endContainer==u&&0===c.startOffset&&c.endOffset==u.length?i.selectNodeContents=function(e){this.nativeRange.selectNodeContents(e),updateRangeProperties(this)}:i.selectNodeContents=function(e){this.setStart(e,0),this.setEnd(e,o.getEndOffset(e))},c.selectNodeContents(u),c.setEnd(u,3);var d=e.createRange();d.selectNodeContents(u),d.setEnd(u,4),d.setStart(u,2),-1==c.compareBoundaryPoints(c.START_TO_END,d)&1==c.compareBoundaryPoints(c.END_TO_START,d)?i.compareBoundaryPoints=function(e,t){return e==(t=t.nativeRange||t).START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:i.compareBoundaryPoints=function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)},t.util.isHostMethod(c,"createContextualFragment")&&(i.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),r.getBody(e).removeChild(u),c.detach(),d.detach()}(),t.createNativeRange=function(t){return(t=t||e).createRange()};t.features.implementsTextRange&&(n.rangeToTextRange=function(e){var t;if(e.collapsed)return createBoundaryTextRange(new i(e.startContainer,e.startOffset),!0);var n=createBoundaryTextRange(new i(e.startContainer,e.startOffset),!0),o=createBoundaryTextRange(new i(e.endContainer,e.endOffset),!1),a=r.getDocument(e.startContainer).body.createTextRange();return a.setEndPoint("StartToStart",n),a.setEndPoint("EndToEnd",o),a}),n.prototype.getName=function(){return"WrappedRange"},t.WrappedRange=n,t.createRange=function(r){return r=r||e,new n(t.createNativeRange(r))},t.createRangyRange=function(t){return new o(t=t||e)},t.createIframeRange=function(e){return t.createRange(r.getIframeDocument(e))},t.createIframeRangyRange=function(e){return t.createRangyRange(r.getIframeDocument(e))},t.addCreateMissingNativeApiListener(function(e){var n=e.document;void 0===n.createRange&&(n.createRange=function(){return t.createRange(this)}),n=e=null})}),n.createModule("WrappedSelection",function(t,module){t.requireModules(["DomUtil","DomRange","WrappedRange"]),t.config.checkSelectionRanges=!0;var n="boolean",i="_rangySelection",o=t.dom,a=t.util,s=t.DomRange,l=t.WrappedRange,u=t.DOMException,c=o.DomPosition,d,f,p="Control";function getWinSelection(e){return(e||r).getSelection()}function getDocSelection(e){return(e||r).document.selection}var h=t.util.isHostMethod(r,"getSelection"),m=t.util.isHostObject(e,"selection"),g=m&&(!h||t.config.preferTextRange);g?(d=getDocSelection,t.isSelectionValid=function(e){var t=(e||r).document,n=t.selection;return"None"!=n.type||o.getDocument(n.createRange().parentElement())==t}):h?(d=getWinSelection,t.isSelectionValid=function(){return!0}):module.fail("Neither document.selection or window.getSelection() detected."),t.getNativeSelection=d;var v=d(),b=t.createNativeRange(e),y=o.getBody(e),w=a.areHostObjects(v,["anchorNode","focusNode"]&&a.areHostProperties(v,["anchorOffset","focusOffset"]));t.features.selectionHasAnchorAndFocus=w;var x=a.isHostMethod(v,"extend");t.features.selectionHasExtend=x;var S="number"==typeof v.rangeCount;t.features.selectionHasRangeCount=S;var E=!1,C=!0;a.areHostMethods(v,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof v.rangeCount&&t.features.implementsDomRange&&function(){var t=e.createElement("iframe");y.appendChild(t);var n=o.getIframeDocument(t);n.open(),n.write("<html><head></head><body>12</body></html>"),n.close();var r=o.getIframeWindow(t).getSelection(),i,a,s=n.documentElement.lastChild.firstChild,l=n.createRange();l.setStart(s,1),l.collapse(!0),r.addRange(l),C=1==r.rangeCount,r.removeAllRanges();var u=l.cloneRange();l.setStart(s,0),u.setEnd(s,2),r.addRange(l),r.addRange(u),E=2==r.rangeCount,l.detach(),u.detach(),y.removeChild(t)}(),t.features.selectionSupportsMultipleRanges=E,t.features.collapsedNonEditableSelectionsSupported=C;var T=!1,R,N;function updateAnchorAndFocusFromRange(e,t,n){var r=n?"end":"start",i=n?"start":"end";e.anchorNode=t[r+"Container"],e.anchorOffset=t[r+"Offset"],e.focusNode=t[i+"Container"],e.focusOffset=t[i+"Offset"]}function updateAnchorAndFocusFromNativeSelection(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}function updateEmptySelection(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function getNativeRange(e){var n;return e instanceof s?(n=e._selectionNativeRange)||((n=t.createNativeRange(o.getDocument(e.startContainer))).setEnd(e.endContainer,e.endOffset),n.setStart(e.startContainer,e.startOffset),e._selectionNativeRange=n,e.attachListener("detach",function(){this._selectionNativeRange=null})):e instanceof l?n=e.nativeRange:t.features.implementsDomRange&&e instanceof o.getWindow(e.startContainer).Range&&(n=e),n}function rangeContainsSingleElement(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;t<n;++t)if(!o.isAncestorOf(e[0],e[t]))return!1;return!0}function getSingleElementFromRange(e){var t=e.getNodes();if(!rangeContainsSingleElement(t))throw new Error("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return t[0]}function isTextRange(e){return!!e&&void 0!==e.text}function updateFromTextRange(e,t){var n=new l(t);e._ranges=[n],updateAnchorAndFocusFromRange(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function updateControlSelection(e){if(e._ranges.length=0,"None"==e.docSelection.type)updateEmptySelection(e);else{var n=e.docSelection.createRange();if(isTextRange(n))updateFromTextRange(e,n);else{e.rangeCount=n.length;for(var r,i=o.getDocument(n.item(0)),a=0;a<e.rangeCount;++a)(r=t.createRange(i)).selectNode(n.item(a)),e._ranges.push(r);e.isCollapsed=1==e.rangeCount&&e._ranges[0].collapsed,updateAnchorAndFocusFromRange(e,e._ranges[e.rangeCount-1],!1)}}}function addRangeToControlSelection(e,t){for(var n=e.docSelection.createRange(),r=getSingleElementFromRange(t),i=o.getDocument(n.item(0)),a=o.getBody(i).createControlRange(),s=0,l=n.length;s<l;++s)a.add(n.item(s));try{a.add(r)}catch(e){throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}a.select(),updateControlSelection(e)}function WrappedSelection(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}y&&a.isHostMethod(y,"createControlRange")&&(R=y.createControlRange(),a.areHostProperties(R,["item","add"])&&(T=!0)),t.features.implementsControlRange=T,f=w?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed},a.isHostMethod(v,"getRangeAt")?N=function(e,t){try{return e.getRangeAt(t)}catch(e){return null}}:w&&(N=function(e){var n=o.getDocument(e.anchorNode),r=t.createRange(n);return r.setStart(e.anchorNode,e.anchorOffset),r.setEnd(e.focusNode,e.focusOffset),r.collapsed!==this.isCollapsed&&(r.setStart(e.focusNode,e.focusOffset),r.setEnd(e.anchorNode,e.anchorOffset)),r}),t.getSelection=function(e){var t=(e=e||r)._rangySelection,n=d(e),i=m?getDocSelection(e):null;return t?(t.nativeSelection=n,t.docSelection=i,t.refresh(e)):(t=new WrappedSelection(n,i,e),e._rangySelection=t),t},t.getIframeSelection=function(e){return t.getSelection(o.getIframeWindow(e))};var A=WrappedSelection.prototype,k;function createControlSelection(e,t){for(var n=o.getDocument(t[0].startContainer),r=o.getBody(n).createControlRange(),i=0,a;i<rangeCount;++i){a=getSingleElementFromRange(t[i]);try{r.add(a)}catch(e){throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}r.select(),updateControlSelection(e)}if(!g&&w&&a.areHostMethods(v,["removeAllRanges","addRange"])){A.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),updateEmptySelection(this)};var I=function(e,n){var r=s.getRangeDocument(n),i=t.createRange(r);i.collapseToPoint(n.endContainer,n.endOffset),e.nativeSelection.addRange(getNativeRange(i)),e.nativeSelection.extend(n.startContainer,n.startOffset),e.refresh()};A.addRange=S?function(e,n){var r;if(T&&m&&this.docSelection.type==p)addRangeToControlSelection(this,e);else if(n&&x)I(this,e);else if(E?r=this.rangeCount:(this.removeAllRanges(),r=0),this.nativeSelection.addRange(getNativeRange(e)),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==r+1){if(t.config.checkSelectionRanges){var i=N(this.nativeSelection,this.rangeCount-1);i&&!s.rangesEqual(i,e)&&(e=new l(i))}this._ranges[this.rangeCount-1]=e,updateAnchorAndFocusFromRange(this,e,D(this.nativeSelection)),this.isCollapsed=f(this)}else this.refresh()}:function(e,t){t&&x?I(this,e):(this.nativeSelection.addRange(getNativeRange(e)),this.refresh())},A.setRanges=function(e){if(T&&e.length>1)createControlSelection(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)this.addRange(e[t])}}}else{if(!(a.isHostMethod(v,"empty")&&a.isHostMethod(b,"select")&&T&&g))return module.fail("No means of selecting a Range or TextRange was found"),!1;A.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e,t;if(this.anchorNode)e=o.getDocument(this.anchorNode);else if(this.docSelection.type==p){var n=this.docSelection.createRange();n.length&&(e=o.getDocument(n.item(0)).body.createTextRange())}if(e)e.body.createTextRange().select(),this.docSelection.empty()}}catch(e){}updateEmptySelection(this)},A.addRange=function(e){this.docSelection.type==p?addRangeToControlSelection(this,e):(l.rangeToTextRange(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,updateAnchorAndFocusFromRange(this,e,!1))},A.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?createControlSelection(this,e):t&&this.addRange(e[0])}}if(A.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new u("INDEX_SIZE_ERR");return this._ranges[e]},g)k=function(e){var n;t.isSelectionValid(e.win)?n=e.docSelection.createRange():(n=o.getBody(e.win.document).createTextRange()).collapse(!0),e.docSelection.type==p?updateControlSelection(e):isTextRange(n)?updateFromTextRange(e,n):updateEmptySelection(e)};else if(a.isHostMethod(v,"getRangeAt")&&"number"==typeof v.rangeCount)k=function(e){if(T&&m&&e.docSelection.type==p)updateControlSelection(e);else if(e&&e.nativeSelection&&(e._ranges.length=e.rangeCount=e.nativeSelection.rangeCount),e.rangeCount){for(var n=0,r=e.rangeCount;n<r;++n)e._ranges[n]=new t.WrappedRange(e.nativeSelection.getRangeAt(n));updateAnchorAndFocusFromRange(e,e._ranges[e.rangeCount-1],D(e.nativeSelection)),e.isCollapsed=f(e)}else updateEmptySelection(e)};else{if(!w||typeof v.isCollapsed!=n||typeof b.collapsed!=n||!t.features.implementsDomRange)return module.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;k=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=N(n,0),e._ranges=[t],e.rangeCount=1,updateAnchorAndFocusFromNativeSelection(e),e.isCollapsed=f(e)):updateEmptySelection(e)}}A.refresh=function(e){var t=e?this._ranges.slice(0):null;if(k(this),e){var n=t.length;if(n!=this._ranges.length)return!1;for(;n--;)if(!s.rangesEqual(t[n],this._ranges[n]))return!1;return!0}};var P=function(e,t){var n=e.getAllRanges(),r=!1;e.removeAllRanges();for(var i=0,o=n.length;i<o;++i)r||t!==n[i]?e.addRange(n[i]):r=!0;e.rangeCount||updateEmptySelection(e)},D;function assertNodeInSameDocument(e,t){if(e.anchorNode&&o.getDocument(e.anchorNode)!==o.getDocument(t))throw new u("WRONG_DOCUMENT_ERR")}function inspect(e){var t=[],n=new c(e.anchorNode,e.anchorOffset),r=new c(e.focusNode,e.focusOffset),i="function"==typeof e.getName?e.getName():"Selection";if(void 0!==e.rangeCount)for(var o=0,a=e.rangeCount;o<a;++o)t[o]=s.inspect(e.getRangeAt(o));return"["+i+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+r.inspect()+"]"}A.removeRange=T?function(e){if(this.docSelection.type==p){for(var t=this.docSelection.createRange(),n=getSingleElementFromRange(e),r=o.getDocument(t.item(0)),i=o.getBody(r).createControlRange(),a,s=!1,l=0,u=t.length;l<u;++l)(a=t.item(l))!==n||s?i.add(t.item(l)):s=!0;i.select(),updateControlSelection(this)}else P(this,e)}:function(e){P(this,e)},!g&&w&&t.features.implementsDomRange?(D=function(e){var t=!1;return e.anchorNode&&(t=1==o.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t},A.isBackwards=function(){return D(this)}):D=A.isBackwards=function(){return!1},A.toString=function(){for(var e=[],t=0,n=this.rangeCount;t<n;++t)e[t]=""+this._ranges[t];return e.join("")},A.collapse=function(e,n){assertNodeInSameDocument(this,e);var r=t.createRange(o.getDocument(e));r.collapseToPoint(e,n),this.removeAllRanges(),this.addRange(r),this.isCollapsed=!0},A.collapseToStart=function(){if(!this.rangeCount)throw new u("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},A.collapseToEnd=function(){if(!this.rangeCount)throw new u("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},A.selectAllChildren=function(e){assertNodeInSameDocument(this,e);var n=t.createRange(o.getDocument(e));n.selectNodeContents(e),this.removeAllRanges(),this.addRange(n)},A.deleteFromDocument=function(){if(T&&m&&this.docSelection.type==p){for(var e=this.docSelection.createRange(),t;e.length;)t=e.item(0),e.remove(t),t.parentNode.removeChild(t);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();this.removeAllRanges();for(var r=0,i=n.length;r<i;++r)n[r].deleteContents();this.addRange(n[i-1])}},A.getAllRanges=function(){return this._ranges.slice(0)},A.setSingleRange=function(e){this.setRanges([e])},A.containsNode=function(e,t){for(var n=0,r=this._ranges.length;n<r;++n)if(this._ranges[n].containsNode(e,t))return!0;return!1},A.toHtml=function(){var e="";if(this.rangeCount){for(var t=s.getRangeDocument(this._ranges[0]).createElement("div"),n=0,r=this._ranges.length;n<r;++n)t.appendChild(this._ranges[n].cloneContents());e=t.innerHTML}return e},A.getName=function(){return"WrappedSelection"},A.inspect=function(){return inspect(this)},A.detach=function(){this.win._rangySelection=null,this.win=this.anchorNode=this.focusNode=null},WrappedSelection.inspect=inspect,t.Selection=WrappedSelection,t.selectionPrototype=A,t.addCreateMissingNativeApiListener(function(e){void 0===e.getSelection&&(e.getSelection=function(){return t.getSelection(this)}),e=null})});var i=function(){},o,a,s,l,u,c,d,f,p,h,m;return i.extend=function(e,t){var n=i.prototype.extend;i._prototyping=!0;var r=new this;n.call(r,e),r.base=function(){},delete i._prototyping;var o=r.constructor,a=r.constructor=function(){if(!i._prototyping)if(this._constructing||this.constructor==a)this._constructing=!0,o.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||n).call(arguments[0],r)};return a.ancestor=this,a.extend=this.extend,a.forEach=this.forEach,a.implement=this.implement,a.prototype=r,a.toString=this.toString,a.valueOf=function(e){return"object"==e?a:o.valueOf()},n.call(a,t),"function"==typeof a.init&&a.init(),a},i.prototype={extend:function(e,t){if(arguments.length>1){var n=this[e];if(n&&"function"==typeof t&&(!n.valueOf||n.valueOf()!=t.valueOf())&&/\bbase\b/.test(t)){var r=t.valueOf();(t=function(){var e=this.base||i.prototype.base;this.base=n;var t=r.apply(this,arguments);return this.base=e,t}).valueOf=function(e){return"object"==e?t:r},t.toString=i.toString}this[e]=t}else if(e){var o=i.prototype.extend;i._prototyping||"function"==typeof this||(o=this.extend||o);for(var a={toSource:null},s=["constructor","toString","valueOf"],l=i._prototyping?0:1;u=s[l++];)e[u]!=a[u]&&o.call(this,u,e[u]);for(var u in e)a[u]||o.call(this,u,e[u])}return this}},i=i.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(e,t,n){for(var r in e)void 0===this.prototype[r]&&t.call(n,e[r],r,e)},implement:function(){for(var e=0;e<arguments.length;e++)"function"==typeof arguments[e]?arguments[e](this.prototype):this.prototype.extend(arguments[e]);return this},toString:function(){return String(this.valueOf())}}),t.browser=function(){var t=navigator.userAgent,n=e.createElement("div"),i=-1!==t.indexOf("MSIE")&&-1===t.indexOf("Opera"),o=-1!==t.indexOf("Gecko")&&-1===t.indexOf("KHTML"),a=-1!==t.indexOf("AppleWebKit/"),s=-1!==t.indexOf("Chrome/"),l=-1!==t.indexOf("Opera/"),u,c;function iosVersion(e){return+(/ipad|iphone|ipod/.test(e)&&e.match(/ os (\d+).+? like mac os x/)||[void 0,0])[1]}function androidVersion(e){return+(e.match(/android (\d+)/)||[void 0,0])[1]}return{USER_AGENT:t,supported:function(){var t=this.USER_AGENT.toLowerCase(),r="contentEditable"in n,i=e.execCommand&&e.queryCommandSupported&&e.queryCommandState,o=e.querySelector&&e.querySelectorAll,a=this.isIos()&&iosVersion(t)<5||this.isAndroid()&&androidVersion(t)<4||-1!==t.indexOf("opera mobi")||-1!==t.indexOf("hpwos/");return r&&i&&o&&!a},isTouchDevice:function(){return this.supportsEvent("touchmove")},isIos:function(){return/ipad|iphone|ipod/i.test(this.USER_AGENT)},isAndroid:function(){return-1!==this.USER_AGENT.indexOf("Android")},supportsSandboxedIframes:function(){return i},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return!("querySelector"in e)},displaysCaretInEmptyContentEditableCorrectly:function(){return i},hasCurrentStyleProperty:function(){return"currentStyle"in n},hasHistoryIssue:function(){return o},insertsLineBreaksOnReturn:function(){return o},supportsPlaceholderAttributeOn:function(e){return"placeholder"in e},supportsEvent:function(e){return"on"+e in n||(n.setAttribute("on"+e,"return;"),"function"==typeof n["on"+e])},supportsEventsInIframeCorrectly:function(){return!l},supportsHTML5Tags:function(e){var t=e.createElement("div"),n="<article>foo</article>";return t.innerHTML=n,t.innerHTML.toLowerCase()===n},supportsCommand:(u={formatBlock:i,insertUnorderedList:i||a,insertOrderedList:i||a},c={insertHTML:o},function(e,t){var n;if(!u[t]){try{return e.queryCommandSupported(t)}catch(e){}try{return e.queryCommandEnabled(t)}catch(e){return!!c[t]}}return!1}),doesAutoLinkingInContentEditable:function(){return i},canDisableAutoLinking:function(){return this.supportsCommand(e,"AutoUrlDetect")},clearsContentEditableCorrectly:function(){return o||l||a},supportsGetAttributeCorrectly:function(){var t;return"1"!=e.createElement("td").getAttribute("rowspan")},canSelectImagesInContentEditable:function(){return o||i||l},autoScrollsToCaret:function(){return!a},autoClosesUnclosedTags:function(){var e=n.cloneNode(!1),t,r;return e.innerHTML="<p><div></div>",r=e.innerHTML.toLowerCase(),t="<p></p><div></div>"===r||"<p><div></div></p>"===r,this.autoClosesUnclosedTags=function(){return t},t},supportsNativeGetElementsByClassName:function(){return-1!==String(e.getElementsByClassName).indexOf("[native code]")},supportsSelectionModify:function(){return"getSelection"in r&&"modify"in window.getSelection()},needsSpaceAfterLineBreak:function(){return l},supportsSpeechApiOn:function(e){var n;return(t.match(/Chrome\/(\d+)/)||[void 0,0])[1]>=11&&("onwebkitspeechchange"in e||"speech"in e)},crashesWhenDefineProperty:function(e){return i&&("XMLHttpRequest"===e||"XDomainRequest"===e)},doesAsyncFocus:function(){return i},hasProblemsSettingCaretAfterImg:function(){return i},hasUndoInContextMenu:function(){return o||s||l},hasInsertNodeIssue:function(){return l},hasIframeFocusIssue:function(){return i}}}(),t.lang.array=function(e){return{contains:function(t){if(e.indexOf)return-1!==e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return!0;return!1},without:function(n){n=t.lang.array(n);for(var r=[],i=0,o=e.length;i<o;i++)n.contains(e[i])||r.push(e[i]);return r},get:function(){for(var t=0,n=e.length,r=[];t<n;t++)r.push(e[t]);return r}}},t.lang.Dispatcher=i.extend({on:function(e,t){return this.events=this.events||{},this.events[e]=this.events[e]||[],this.events[e].push(t),this},off:function(e,t){this.events=this.events||{};var n=0,r,i;if(e){for(r=this.events[e]||[],i=[];n<r.length;n++)r[n]!==t&&t&&i.push(r[n]);this.events[e]=i}else this.events={};return this},fire:function(e,t,n){this.events=this.events||{};for(var r=this.events[e]||[],i=0;i<r.length;i++)r[i].call(this,t,n);return this},observe:function(){return this.on.apply(this,arguments)},stopObserving:function(){return this.off.apply(this,arguments)}}),t.lang.object=function(e){return{merge:function(t){for(var n in t)e[n]=t[n];return this},get:function(){return e},clone:function(){var t={},n;for(n in e)t[n]=e[n];return t},isArray:function(){return"[object Array]"===Object.prototype.toString.call(e)}}},o=/^\s+/,a=/\s+$/,t.lang.string=function(e){return e=String(e),{trim:function(){return e.replace(o,"").replace(a,"")},interpolate:function(t){for(var n in t)e=this.replace("#{"+n+"}").by(t[n]);return e},replace:function(t){return{by:function(n){return e.split(t).join(n)}}}}},function(e){var t=e.lang.array(["CODE","PRE","A","SCRIPT","HEAD","TITLE","STYLE"]),n=/((https?:\/\/|www\.)[^\s<]{3,})/gi,r=/([^\w\/\-](,?))$/i,i=100,o={")":"(","]":"[","}":"{"};function autoLink(e){if(_hasParentThatShouldBeIgnored(e))return e;return e===e.ownerDocument.documentElement&&(e=e.ownerDocument.body),_parseNode(e)}function _convertUrlsToLinks(e){return e.replace(n,function(e,t){var n=(t.match(r)||[])[1]||"",a=o[n];(t=t.replace(r,"")).split(a).length>t.split(n).length&&(t+=n,n="");var s=t,l=t;return t.length>i&&(l=l.substr(0,i)+"..."),"www."===s.substr(0,4)&&(s="http://"+s),'<a href="'+s+'">'+l+"</a>"+n})}function _getTempElement(e){var t=e._wysihtml5_tempElement;return t||(t=e._wysihtml5_tempElement=e.createElement("div")),t}function _wrapMatchesInNode(e){var t=e.parentNode,n=_getTempElement(t.ownerDocument);for(n.innerHTML="<span></span>"+_convertUrlsToLinks(e.data),n.removeChild(n.firstChild);n.firstChild;)t.insertBefore(n.firstChild,e);t.removeChild(e)}function _hasParentThatShouldBeIgnored(e){for(var n;e.parentNode;){if(n=(e=e.parentNode).nodeName,t.contains(n))return!0;if("body"===n)return!1}return!1}function _parseNode(r){if(t.contains(r.nodeName))return;if(r.nodeType===e.TEXT_NODE&&r.data.match(n))return void _wrapMatchesInNode(r);for(var i=e.lang.array(r.childNodes).get(),o=i.length,a=0;a<o;a++)_parseNode(i[a]);return r}e.dom.autoLink=autoLink,e.dom.autoLink.URL_REG_EXP=n}(t),function(e){var t=e.dom;t.addClass=function(e,n){var r=e.classList;if(r)return r.add(n);if(t.hasClass(e,n))return;e.className+=" "+n},t.removeClass=function(e,t){var n=e.classList;if(n)return n.remove(t);e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ")},t.hasClass=function(e,t){var n=e.classList;if(n)return n.contains(t);var r=e.className;return r.length>0&&(r==t||new RegExp("(^|\\s)"+t+"(\\s|$)").test(r))}}(t),t.dom.contains=function(){var n=e.documentElement;if(n.contains)return function(e,n){return n.nodeType!==t.ELEMENT_NODE&&(n=n.parentNode),e!==n&&e.contains(n)};if(n.compareDocumentPosition)return function(e,t){return!!(16&e.compareDocumentPosition(t))}}(),t.dom.convertToList=function(){function _createListItem(e,t){var n=e.createElement("li");return t.appendChild(n),n}function _createList(e,t){return e.createElement(t)}function convertToList(e,n){if("UL"===e.nodeName||"OL"===e.nodeName||"MENU"===e.nodeName)return e;var r=e.ownerDocument,i=_createList(r,n),o=e.querySelectorAll("br"),a=o.length,s,l,u,c,d,f,p,h,m;for(m=0;m<a;m++)for(c=o[m];(d=c.parentNode)&&d!==e&&d.lastChild===c;){if("block"===t.dom.getStyle("display").from(d)){d.removeChild(c);break}t.dom.insert(c).after(c.parentNode)}for(l=(s=t.lang.array(e.childNodes).get()).length,m=0;m<l;m++){if(h=h||_createListItem(r,i),u=s[m],f="block"===t.dom.getStyle("display").from(u),p="BR"===u.nodeName,f){(h=h.firstChild?_createListItem(r,i):h).appendChild(u),h=null;continue}if(p){h=h.firstChild?null:h;continue}h.appendChild(u)}return 0===s.length&&_createListItem(r,i),e.parentNode.replaceChild(i,e),i}return convertToList}(),t.dom.copyAttributes=function(e){return{from:function(t){return{to:function(n){for(var r,i=0,o=e.length;i<o;i++)r=e[i],void 0!==t[r]&&""!==t[r]&&(n[r]=t[r]);return{andTo:arguments.callee}}}}}},s=t.dom,l=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"],u=function(e){if(c(e))return parseInt(s.getStyle("width").from(e),10)<e.offsetWidth;return!1},c=function(e){for(var t=0,n=l.length;t<n;t++)if("border-box"===s.getStyle(l[t]).from(e))return l[t]},s.copyStyles=function(e){return{from:function(n){u(n)&&(e=t.lang.array(e).without(l));for(var r="",i=e.length,o=0,a;o<i;o++)a=e[o],r+=a+":"+s.getStyle(a).from(n)+";";return{to:function(e){return s.setStyles(r).on(e),{andTo:arguments.callee}}}}}},function(e){e.dom.delegate=function(t,n,r,i){return e.dom.observe(t,r,function(r){for(var o=r.target,a=e.lang.array(t.querySelectorAll(n));o&&o!==t;){if(a.contains(o)){i.call(o,r);break}o=o.parentNode}})}}(t),t.dom.getAsDom=(d=function(e,t){var n=t.createElement("div");n.style.display="none",t.body.appendChild(n);try{n.innerHTML=e}catch(e){}return t.body.removeChild(n),n},f=function(e){if(e._wysihtml5_supportsHTML5Tags)return;for(var t=0,n=p.length;t<n;t++)e.createElement(p[t]);e._wysihtml5_supportsHTML5Tags=!0},p=["abbr","article","aside","audio","bdi","canvas","command","datalist","details","figcaption","figure","footer","header","hgroup","keygen","mark","meter","nav","output","progress","rp","rt","ruby","svg","section","source","summary","time","track","video","wbr"],function(n,r){var i;return r=r||e,"object"==typeof n&&n.nodeType?(i=r.createElement("div")).appendChild(n):t.browser.supportsHTML5Tags(r)?(i=r.createElement("div")).innerHTML=n:(f(r),i=d(n,r)),i}),t.dom.getParentElement=function(){function _isSameNodeName(e,n){if(!n||!n.length)return!0;return"string"==typeof n?e===n:t.lang.array(n).contains(e)}function _isElement(e){return e.nodeType===t.ELEMENT_NODE}function _hasClassName(e,t,n){var r=(e.className||"").match(n)||[];if(!t)return!!r.length;return r[r.length-1]===t}function _getParentElementWithNodeName(e,t,n){for(;n--&&e&&"BODY"!==e.nodeName;){if(_isSameNodeName(e.nodeName,t))return e;e=e.parentNode}return null}function _getParentElementWithNodeNameAndClassName(e,t,n,r,i){for(;i--&&e&&"BODY"!==e.nodeName;){if(_isElement(e)&&_isSameNodeName(e.nodeName,t)&&_hasClassName(e,n,r))return e;e=e.parentNode}return null}return function(e,t,n){return n=n||50,t.className||t.classRegExp?_getParentElementWithNodeNameAndClassName(e,t.nodeName,t.className,t.classRegExp,n):_getParentElementWithNodeName(e,t.nodeName,n)}}(),t.dom.getStyle=function(){var n={float:"styleFloat"in e.createElement("div").style?"styleFloat":"cssFloat"},r=/\-[a-z]/g;function camelize(e){return e.replace(r,function(e){return e.charAt(1).toUpperCase()})}return function(e){return{from:function(r){if(r.nodeType!==t.ELEMENT_NODE)return;var i=r.ownerDocument,o=n[e]||camelize(e),a=r.style,s=r.currentStyle,l=a[o];if(l)return l;if(s)try{return s[o]}catch(e){}var u=i.defaultView||i.parentWindow,c=("height"===e||"width"===e)&&"TEXTAREA"===r.nodeName,d,f;if(u.getComputedStyle)return c&&(d=a.overflow,a.overflow="hidden"),f=u.getComputedStyle(r,null).getPropertyValue(e),0===e.indexOf("border")&&-1!==e.indexOf("width")&&(f=Math.round(parseFloat(f))+"px"),c&&(a.overflow=d||""),f}}}}(),t.dom.hasElementWithTagName=function(){var e={},t=1;function _getDocumentIdentifier(e){return e._wysihtml5_identifier||(e._wysihtml5_identifier=t++)}return function(t,n){var r=_getDocumentIdentifier(t)+":"+n,i=e[r];return i||(i=e[r]=t.getElementsByTagName(n)),i.length>0}}(),function(e){var t={},n=1;function _getDocumentIdentifier(e){return e._wysihtml5_identifier||(e._wysihtml5_identifier=n++)}e.dom.hasElementWithClassName=function(n,r){if(!e.browser.supportsNativeGetElementsByClassName())return!!n.querySelector("."+r);var i=_getDocumentIdentifier(n)+":"+r,o=t[i];return o||(o=t[i]=n.getElementsByClassName(r)),o.length>0}}(t),t.dom.insert=function(e){return{after:function(t){t.parentNode.insertBefore(e,t.nextSibling)},before:function(t){t.parentNode.insertBefore(e,t)},into:function(t){t.appendChild(e)}}},t.dom.insertCSS=function(e){return e=e.join("\n"),{into:function(t){var n=t.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(t.createTextNode(e));var r=t.querySelector("head link");if(r)return void r.parentNode.insertBefore(n,r);var i=t.querySelector("head");i&&i.appendChild(n)}}},t.dom.observe=function(e,t,n){for(var r,i,o=0,a=(t="string"==typeof t?[t]:t).length;o<a;o++){var s;if(i=t[o],e.addEventListener)if("DOMNodeRemoved"==i)(function(){var e=window.MutationObserver||window.WebKitMutationObserver,t=window.addEventListener;return function(n,r){var i;e?new e(function(e,t){e[0].removedNodes.length&&r()}).observe(n,{childList:!0,subtree:!0}):t&&n.addEventListener("DOMNodeRemoved",r,!1)}})()(e,n);else e.addEventListener(i,n,!1);else r=function(t){"target"in t||(t.target=t.srcElement),t.preventDefault=t.preventDefault||function(){this.returnValue=!1},t.stopPropagation=t.stopPropagation||function(){this.cancelBubble=!0},n.call(e,t)},e.attachEvent("on"+i,r)}return{stop:function(){for(var i,o=0,a=t.length;o<a;o++)i=t[o],e.removeEventListener?e.removeEventListener(i,n,!1):e.detachEvent("on"+i,r)}}},t.dom.parse=function(){var n={1:_handleElement,3:_handleText},r="span",i=/\s+/,o={tags:{},classes:{}},a={};function parse(n,r,i,s){t.lang.object(a).merge(o).merge(r).get();var l=(i=i||n.ownerDocument||e).createDocumentFragment(),u="string"==typeof n,c,d,f;for(c=u?t.dom.getAsDom(n,i):n;c.firstChild;)f=c.firstChild,c.removeChild(f),(d=a.disable?f:_convert(f,s))&&l.appendChild(d);return c.innerHTML="",c.appendChild(l),u?t.quirks.getCorrectInnerHTML(c):c}function _convert(e,t){var i=e.nodeType,o=e.childNodes,a=o.length,s=n[i],l=0,u,c;if(!(u=s&&s(e)))return null;for(l=0;l<a;l++)(c=_convert(o[l],t))&&u.appendChild(c);if(t&&u.childNodes.length<=1&&u.nodeName.toLowerCase()===r&&!u.attributes.length)return u.firstChild;return u}function _handleElement(e){var n,i,o=a.tags,s=e.nodeName.toLowerCase(),l=e.scopeName;if(e._wysihtml5)return null;if(e._wysihtml5=1,"wysihtml5-temp"===e.className)return null;if(l&&"HTML"!=l&&(s=l+":"+s),"outerHTML"in e&&(t.browser.autoClosesUnclosedTags()||"P"!==e.nodeName||"</p>"===e.outerHTML.slice(-4).toLowerCase()||(s="div")),a.disable)_handleAttributes(e,i=e.ownerDocument.createElement(s),{disable:!0});else{if(s in o){if(!(n=o[s])||n.remove)return null;n="string"==typeof n?{rename_tag:n}:n}else{if(!e.firstChild)return null;n={rename_tag:r}}_handleAttributes(e,i=e.ownerDocument.createElement(n.rename_tag||s),n)}return e=null,i}function _handleAttributes(e,n,r){var o={},s=r.set_class,u=r.add_class,d=r.set_attributes,f=r.check_attributes,p=a.classes,h=0,m=[],g=[],v=[],b=[],y,w,x,S,E,C,T;if(d&&(o=t.lang.object(d).clone()),f&&!r.disable)for(E in f){if(!(T=l[f[E]]))continue;"string"==typeof(C=T(_getAttribute(e,E)))&&(o[E]=C)}else if(r.disable){var R=e.attributes,N=R.length;for(h=0;h<N;h++)"string"==typeof(C=R[h].value)&&(o[R[h].name]=C)}if(s&&m.push(s),u)for(E in u){if(!(T=c[u[E]]))continue;"string"==typeof(S=T(_getAttribute(e,E)))&&m.push(S)}for(p["_wysihtml5-temp-placeholder"]=1,(b=e.getAttribute("class"))&&(m=m.concat(b.split(i))),y=m.length,h=0;h<y;h++)p[x=m[h]]&&g.push(x);for(w=g.length;w--;)x=g[w],t.lang.array(v).contains(x)||v.unshift(x);for(E in v.length&&(o.class=v.join(" ")),o)try{n.setAttribute(E,o[E])}catch(e){}o.src&&(void 0!==o.width&&n.setAttribute("width",o.width),void 0!==o.height&&n.setAttribute("height",o.height))}var s=!t.browser.supportsGetAttributeCorrectly();function _getAttribute(e,t){var n,r,i;if(t=t.toLowerCase(),"IMG"==e.nodeName&&"src"==t&&!0===_isLoadedImage(e))return e.src;if(s&&"outerHTML"in e)return-1!=e.outerHTML.toLowerCase().indexOf(" "+t+"=")?e.getAttribute(t):null;return e.getAttribute(t)}function _isLoadedImage(e){try{return e.complete&&!e.mozMatchesSelector(":-moz-broken")}catch(t){if(e.complete&&"complete"===e.readyState)return!0}}function _handleText(e){return e.ownerDocument.createTextNode(e.data)}var l={url:(u=/^https?:\/\//i,function(e){if(!e||!e.match(u))return null;return e.replace(u,function(e){return e.toLowerCase()})}),src:function(){var e=/^(\/|https?:\/\/)/i;return function(t){if(!t||!t.match(e))return null;return t.replace(e,function(e){return e.toLowerCase()})}}(),href:function(){var e=/^(\/|https?:\/\/|mailto:)/i;return function(t){if(!t||!t.match(e))return null;return t.replace(e,function(e){return e.toLowerCase()})}}(),allow:function(e){return e},alt:function(){var e=/[^ a-z0-9_\-]/gi;return function(t){if(!t)return"";return t.replace(e,"")}}(),numbers:function(){var e=/\D/g;return function(t){return(t=(t||"").replace(e,""))||null}}()},u,c={align_img:(d={left:"wysiwyg-float-left",right:"wysiwyg-float-right"},function(e){return d[String(e).toLowerCase()]}),align_text:function(){var e={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return function(t){return e[String(t).toLowerCase()]}}(),clear_br:function(){var e={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return function(t){return e[String(t).toLowerCase()]}}(),size_font:function(){var e={1:"wysiwyg-font-size-xx-small",2:"wysiwyg-font-size-small",3:"wysiwyg-font-size-medium",4:"wysiwyg-font-size-large",5:"wysiwyg-font-size-x-large",6:"wysiwyg-font-size-xx-large",7:"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return function(t){return e[String(t).charAt(0)]}}()},d;return parse}(),t.dom.removeEmptyTextNodes=function(e){for(var n,r=t.lang.array(e.childNodes).get(),i=r.length,o=0;o<i;o++)(n=r[o]).nodeType===t.TEXT_NODE&&""===n.data&&n.parentNode.removeChild(n)},t.dom.renameElement=function(e,n){for(var r=e.ownerDocument.createElement(n),i;i=e.firstChild;)r.appendChild(i);return t.dom.copyAttributes(["align","className"]).from(e).to(r),e.parentNode.replaceChild(r,e),r},t.dom.replaceWithChildNodes=function(e){if(!e.parentNode)return;if(!e.firstChild)return void e.parentNode.removeChild(e);for(var t=e.ownerDocument.createDocumentFragment();e.firstChild;)t.appendChild(e.firstChild);e.parentNode.replaceChild(t,e),e=t=null},function(e){function _isBlockElement(t){return"block"===e.getStyle("display").from(t)}function _isLineBreak(e){return"BR"===e.nodeName}function _appendLineBreak(e){var t=e.ownerDocument.createElement("br");e.appendChild(t)}function resolveList(e,t){if(!e.nodeName.match(/^(MENU|UL|OL)$/))return;var n=e.ownerDocument,r=n.createDocumentFragment(),i=e.previousElementSibling||e.previousSibling,o,a,s,l,u,c;if(t)for(i&&!_isBlockElement(i)&&_appendLineBreak(r);c=e.firstElementChild||e.firstChild;){for(a=c.lastChild;o=c.firstChild;)l=(s=o===a)&&!_isBlockElement(o)&&!_isLineBreak(o),r.appendChild(o),l&&_appendLineBreak(r);c.parentNode.removeChild(c)}else for(;c=e.firstElementChild||e.firstChild;){if(c.querySelector&&c.querySelector("div, p, ul, ol, menu, blockquote, h1, h2, h3, h4, h5, h6"))for(;o=c.firstChild;)r.appendChild(o);else{for(u=n.createElement("p");o=c.firstChild;)u.appendChild(o);r.appendChild(u)}c.parentNode.removeChild(c)}e.parentNode.replaceChild(r,e)}e.resolveList=resolveList}(t.dom),function(t){var n=e,r=["parent","top","opener","frameElement","frames","localStorage","globalStorage","sessionStorage","indexedDB"],o=["open","close","openDialog","showModalDialog","alert","confirm","prompt","openDatabase","postMessage","XMLHttpRequest","XDomainRequest"],a=["referrer","write","open","close"];t.dom.Sandbox=i.extend({constructor:function(e,n){this.callback=e||t.EMPTY_FUNCTION,this.config=t.lang.object({}).merge(n).get(),this.iframe=this._createIframe()},insertInto:function(e){"string"==typeof e&&(e=n.getElementById(e)),e.appendChild(this.iframe)},getIframe:function(){return this.iframe},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var e=this.getIframe();e.parentNode.removeChild(e)},_readyError:function(){throw new Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")},_createIframe:function(){var e=this,r=n.createElement("iframe");return r.className="wysihtml5-sandbox",t.dom.setAttributes({security:"restricted",allowtransparency:"true",frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(r),t.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()&&(r.src="javascript:'<html></html>'"),r.onload=function(){r.onreadystatechange=r.onload=null,e._onLoadIframe(r)},r.onreadystatechange=function(){/loaded|complete/.test(r.readyState)&&(r.onreadystatechange=r.onload=null,e._onLoadIframe(r))},r},_onLoadIframe:function(e){if(!t.dom.contains(n.documentElement,e))return;var i=this,s=e.contentWindow,l=e.contentWindow.document,u=n.characterSet||n.charset||"utf-8",c=this._getHtml({charset:u,stylesheets:this.config.stylesheets});if(l.open("text/html","replace"),l.write(c),l.close(),this.getWindow=function(){return e.contentWindow},this.getDocument=function(){return e.contentWindow.document},s.onerror=function(e,t,n){throw new Error("wysihtml5.Sandbox: "+e,t,n)},!t.browser.supportsSandboxedIframes()){var d,f;for(d=0,f=r.length;d<f;d++)this._unset(s,r[d]);for(d=0,f=o.length;d<f;d++)this._unset(s,o[d],t.EMPTY_FUNCTION);for(d=0,f=a.length;d<f;d++)this._unset(l,a[d]);this._unset(l,"cookie","",!0)}this.loaded=!0,setTimeout(function(){i.callback(i)},0)},_getHtml:function(e){var n=e.stylesheets,r="",i=0,o;if(n="string"==typeof n?[n]:n)for(o=n.length;i<o;i++)r+='<link rel="stylesheet" href="'+n[i]+'">';return e.stylesheets=r,t.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(e)},_unset:function(e,n,r,i){try{e[n]=r}catch(e){}try{e.__defineGetter__(n,function(){return r})}catch(e){}if(i)try{e.__defineSetter__(n,function(){})}catch(e){}if(!t.browser.crashesWhenDefineProperty(n))try{var o={get:function(){return r}};i&&(o.set=function(){}),Object.defineProperty(e,n,o)}catch(e){}}})}(t),h={className:"class"},t.dom.setAttributes=function(e){return{on:function(t){for(var n in e)t.setAttribute(h[n]||n,e[n])}}},t.dom.setStyles=function(e){return{on:function(t){var n=t.style;if("string"==typeof e)return void(n.cssText+=";"+e);for(var r in e)"float"===r?(n.cssFloat=e[r],n.styleFloat=e[r]):n[r]=e[r]}}},function(e){e.simulatePlaceholder=function(t,n,r){var i="placeholder",o=function(){n.hasPlaceholderSet()&&n.clear(),n.placeholderSet=!1,e.removeClass(n.element,i)},a=function(){n.isEmpty()&&(n.placeholderSet=!0,n.setValue(r),e.addClass(n.element,i))};t.on("set_placeholder",a).on("unset_placeholder",o).on("focus:composer",o).on("paste:composer",o).on("blur:composer",a),a()}}(t.dom),function(t){var n=e.documentElement;"textContent"in n?(t.setTextContent=function(e,t){e.textContent=t},t.getTextContent=function(e){return e.textContent}):"innerText"in n?(t.setTextContent=function(e,t){e.innerText=t},t.getTextContent=function(e){return e.innerText}):(t.setTextContent=function(e,t){e.nodeValue=t},t.getTextContent=function(e){return e.nodeValue})}(t.dom),t.quirks.cleanPastedHTML=function(){var n={"a u":t.dom.replaceWithChildNodes};function cleanPastedHTML(r,i,o){i=i||n,o=o||r.ownerDocument||e;var a,s="string"==typeof r,l,u,c,d,f=0;for(d in a=s?t.dom.getAsDom(r,o):r,i)for(u=a.querySelectorAll(d),l=i[d],c=u.length;f<c;f++)l(u[f]);return u=r=i=null,s?a.innerHTML:a}return cleanPastedHTML}(),t.quirks.ensureProperClearing=(m=function(){var e=this;setTimeout(function(){var t=e.innerHTML.toLowerCase();"<p>&nbsp;</p>"!=t&&"<p>&nbsp;</p><p>&nbsp;</p>"!=t||(e.innerHTML="")},0)},function(e){t.dom.observe(e.element,["cut","keydown"],m)}),function(e){var t="%7E";e.quirks.getCorrectInnerHTML=function(t){var n=t.innerHTML;if(-1===n.indexOf("%7E"))return n;var r=t.querySelectorAll("[href*='~'], [src*='~']"),i,o,a,s;for(s=0,a=r.length;s<a;s++)i=r[s].href||r[s].src,o=e.lang.string(i).replace("~").by("%7E"),n=e.lang.string(n).replace(o).by(i);return n}}(t),function(e){var t="wysihtml5-quirks-redraw";e.quirks.redraw=function(n){e.dom.addClass(n,t),e.dom.removeClass(n,t);try{var r=n.ownerDocument;r.execCommand("italic",!1,null),r.execCommand("italic",!1,null)}catch(e){}}}(t),function(e){var t=e.dom;function _getCumulativeOffsetTop(e){var t=0;if(e.parentNode)do{t+=e.offsetTop||0,e=e.offsetParent}while(e);return t}e.Selection=i.extend({constructor:function(e){n.init(),this.editor=e,this.composer=e.composer,this.doc=this.composer.doc},getBookmark:function(){var e=this.getRange();return e&&e.cloneRange()},setBookmark:function(e){if(!e)return;this.setSelection(e)},setBefore:function(e){var t=n.createRange(this.doc);return t.setStartBefore(e),t.setEndBefore(e),this.setSelection(t)},setAfter:function(e){var t=n.createRange(this.doc);return t.setStartAfter(e),t.setEndAfter(e),this.setSelection(t)},selectNode:function(r,i){var o=n.createRange(this.doc),a=r.nodeType===e.ELEMENT_NODE,s="canHaveHTML"in r?r.canHaveHTML:"IMG"!==r.nodeName,l=a?r.innerHTML:r.data,u=""===l||l===e.INVISIBLE_SPACE,c=t.getStyle("display").from(r),d="block"===c||"list-item"===c;if(u&&a&&s&&!i)try{r.innerHTML=e.INVISIBLE_SPACE}catch(e){}s?o.selectNodeContents(r):o.selectNode(r),s&&u&&a?o.collapse(d):s&&u&&(o.setStartAfter(r),o.setEndAfter(r)),this.setSelection(o)},getSelectedNode:function(e){var t,n;if(e&&this.doc.selection&&"Control"===this.doc.selection.type&&(n=this.doc.selection.createRange())&&n.length)return n.item(0);return(t=this.getSelection(this.doc)).focusNode===t.anchorNode?t.focusNode:(n=this.getRange(this.doc))?n.commonAncestorContainer:this.doc.body},executeAndRestore:function(r,i){var o=this.doc.body,a=i&&o.scrollTop,s=i&&o.scrollLeft,l="_wysihtml5-temp-placeholder",u='<span class="'+l+'">'+e.INVISIBLE_SPACE+"</span>",c=this.getRange(this.doc),d,f,p,h,m;if(!c)return void r(o,o);e.browser.hasInsertNodeIssue()?this.doc.execCommand("insertHTML",!1,u):(h=c.createContextualFragment(u),c.insertNode(h));try{r(c.startContainer,c.endContainer)}catch(e){setTimeout(function(){throw e},0)}(d=this.doc.querySelector("."+l))?(m=n.createRange(this.doc),p=d.nextSibling,e.browser.hasInsertNodeIssue()&&p&&"BR"===p.nodeName?(f=this.doc.createTextNode(e.INVISIBLE_SPACE),t.insert(f).after(d),m.setStartBefore(f),m.setEndBefore(f)):(m.selectNode(d),m.deleteContents()),this.setSelection(m)):o.focus(),i&&(o.scrollTop=a,o.scrollLeft=s);try{d.parentNode.removeChild(d)}catch(e){}},executeAndRestoreSimple:function(e){var t=this.getRange(),r=this.doc.body,i,o,a,s,l;if(!t)return void e(r,r);o=(s=t.getNodes([3]))[0]||t.startContainer,a=s[s.length-1]||t.endContainer,l={collapsed:t.collapsed,startContainer:o,startOffset:o===t.startContainer?t.startOffset:0,endContainer:a,endOffset:a===t.endContainer?t.endOffset:a.length};try{e(t.startContainer,t.endContainer)}catch(e){setTimeout(function(){throw e},0)}i=n.createRange(this.doc);try{i.setStart(l.startContainer,l.startOffset)}catch(e){}try{i.setEnd(l.endContainer,l.endOffset)}catch(e){}try{this.setSelection(i)}catch(e){}},set:function(e,t){var r=n.createRange(this.doc);r.setStart(e,t||0),this.setSelection(r)},insertHTML:function(e){var t,r=n.createRange(this.doc).createContextualFragment(e),i=r.lastChild;this.insertNode(r),i&&this.setAfter(i)},insertNode:function(e){var t=this.getRange();t&&t.insertNode(e)},surround:function(e){var t=this.getRange();if(!t)return;try{t.surroundContents(e),this.selectNode(e)}catch(n){e.appendChild(t.extractContents()),t.insertNode(e)}},scrollIntoView:function(){var t=this.doc,n=5,r=t.documentElement.scrollHeight>t.documentElement.offsetHeight,i=t._wysihtml5ScrollIntoViewElement=t._wysihtml5ScrollIntoViewElement||((a=t.createElement("span")).innerHTML=e.INVISIBLE_SPACE,a),o,a;r&&(this.insertNode(i),o=_getCumulativeOffsetTop(i),i.parentNode.removeChild(i),o>=t.body.scrollTop+t.documentElement.offsetHeight-5&&(t.body.scrollTop=o))},selectLine:function(){e.browser.supportsSelectionModify()?this._selectLine_W3C():this.doc.selection&&this._selectLine_MSIE()},_selectLine_W3C:function(){var e,t=this.doc.defaultView.getSelection();t.modify("extend","left","lineboundary"),t.modify("extend","right","lineboundary")},_selectLine_MSIE:function(){var e=this.doc.selection.createRange(),t=e.boundingTop,n=this.doc.body.scrollWidth,r,i,o,a,s;if(!e.moveToPoint)return;for(0===t&&(o=this.doc.createElement("span"),this.insertNode(o),t=o.offsetTop,o.parentNode.removeChild(o)),t+=1,a=-10;a<n;a+=2)try{e.moveToPoint(a,t);break}catch(e){}for(r=t,i=this.doc.selection.createRange(),s=n;s>=0;s--)try{i.moveToPoint(s,r);break}catch(e){}e.setEndPoint("EndToEnd",i),e.select()},getText:function(){var e=this.getSelection();return e?e.toString():""},getNodes:function(e,t){var n=this.getRange();return n?n.getNodes([e],t):[]},getRange:function(){var e=this.getSelection();return e&&e.rangeCount&&e.getRangeAt(0)},getSelection:function(){return n.getSelection(this.doc.defaultView||this.doc.parentWindow)},setSelection:function(e){var t=this.doc.defaultView||this.doc.parentWindow,r;return n.getSelection(t).setSingleRange(e)}})}(t),function(e,t){var n="span",r=/\s+/g;function hasClass(e,t,n){if(!e.className)return!1;var r=e.className.match(n)||[];return r[r.length-1]===t}function addClass(e,t,n){e.className?(removeClass(e,n),e.className+=" "+t):e.className=t}function removeClass(e,t){e.className&&(e.className=e.className.replace(t,""))}function hasSameClasses(e,t){return e.className.replace(r," ")==t.className.replace(r," ")}function replaceWithOwnChildren(e){for(var t=e.parentNode;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)}function elementsHaveSameNonClassAttributes(e,t){if(e.attributes.length!=t.attributes.length)return!1;for(var n=0,r=e.attributes.length,i,o,a;n<r;++n)if("class"!=(a=(i=e.attributes[n]).name)){if(o=t.attributes.getNamedItem(a),i.specified!=o.specified)return!1;if(i.specified&&i.nodeValue!==o.nodeValue)return!1}return!0}function isSplitPoint(e,n){if(t.dom.isCharacterDataNode(e))return 0===n?!!e.previousSibling:n!=e.length||!!e.nextSibling;return n>0&&n<e.childNodes.length}function splitNodeAt(e,n,r){var i;if(t.dom.isCharacterDataNode(n)&&(0===r?(r=t.dom.getNodeIndex(n),n=n.parentNode):r==n.length?(r=t.dom.getNodeIndex(n)+1,n=n.parentNode):i=t.dom.splitDataNode(n,r)),!i){var o;for((i=n.cloneNode(!1)).id&&i.removeAttribute("id");o=n.childNodes[r];)i.appendChild(o);t.dom.insertAfter(i,n)}return n==e?i:splitNodeAt(e,i.parentNode,t.dom.getNodeIndex(i))}function Merge(t){this.isElementMerge=t.nodeType==e.ELEMENT_NODE,this.firstTextNode=this.isElementMerge?t.lastChild:t,this.textNodes=[this.firstTextNode]}function HTMLApplier(e,t,r,i){this.tagNames=e||[n],this.cssClass=t||"",this.similarClassRegExp=r,this.normalize=i,this.applyToAnyTagName=!1}Merge.prototype={doMerge:function(){for(var e=[],t,n,r,i=0,o=this.textNodes.length;i<o;++i)n=(t=this.textNodes[i]).parentNode,e[i]=t.data,i&&(n.removeChild(t),n.hasChildNodes()||n.parentNode.removeChild(n));return this.firstTextNode.data=r=e.join(""),r},getLength:function(){for(var e=this.textNodes.length,t=0;e--;)t+=this.textNodes[e].length;return t},toString:function(){for(var e=[],t=0,n=this.textNodes.length;t<n;++t)e[t]="'"+this.textNodes[t].data+"'";return"[Merge("+e.join(",")+")]"}},HTMLApplier.prototype={getAncestorWithClass:function(n){for(var r;n;){if(r=!this.cssClass||hasClass(n,this.cssClass,this.similarClassRegExp),n.nodeType==e.ELEMENT_NODE&&t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&r)return n;n=n.parentNode}return!1},postApply:function(e,t){for(var n=e[0],r=e[e.length-1],i=[],o,a=n,s=r,l=0,u=r.length,c,d,f=0,p=e.length;f<p;++f)c=e[f],(d=this.getAdjacentMergeableTextNode(c.parentNode,!1))?(o||(o=new Merge(d),i.push(o)),o.textNodes.push(c),c===n&&(l=(a=o.firstTextNode).length),c===r&&(s=o.firstTextNode,u=o.getLength())):o=null;var h=this.getAdjacentMergeableTextNode(r.parentNode,!0);if(h&&(o||(o=new Merge(r),i.push(o)),o.textNodes.push(h)),i.length){for(f=0,p=i.length;f<p;++f)i[f].doMerge();t.setStart(a,l),t.setEnd(s,u)}},getAdjacentMergeableTextNode:function(t,n){var r=t.nodeType==e.TEXT_NODE,i=r?t.parentNode:t,o,a=n?"nextSibling":"previousSibling";if(r){if((o=t[a])&&o.nodeType==e.TEXT_NODE)return o}else if((o=i[a])&&this.areElementsMergeable(t,o))return o[n?"firstChild":"lastChild"];return null},areElementsMergeable:function(e,n){return t.dom.arrayContains(this.tagNames,(e.tagName||"").toLowerCase())&&t.dom.arrayContains(this.tagNames,(n.tagName||"").toLowerCase())&&hasSameClasses(e,n)&&elementsHaveSameNonClassAttributes(e,n)},createContainer:function(e){var t=e.createElement(this.tagNames[0]);return this.cssClass&&(t.className=this.cssClass),t},applyToTextNode:function(e){var n=e.parentNode;if(1==n.childNodes.length&&t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase()))this.cssClass&&addClass(n,this.cssClass,this.similarClassRegExp);else{var r=this.createContainer(t.dom.getDocument(e));e.parentNode.insertBefore(r,e),r.appendChild(e)}},isRemovable:function(n){return t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&e.lang.string(n.className).trim()==this.cssClass},undoToTextNode:function(e,t,n){if(!t.containsNode(n)){var r=t.cloneRange();r.selectNode(n),r.isPointInRange(t.endContainer,t.endOffset)&&isSplitPoint(t.endContainer,t.endOffset)&&(splitNodeAt(n,t.endContainer,t.endOffset),t.setEndAfter(n)),r.isPointInRange(t.startContainer,t.startOffset)&&isSplitPoint(t.startContainer,t.startOffset)&&(n=splitNodeAt(n,t.startContainer,t.startOffset))}this.similarClassRegExp&&removeClass(n,this.similarClassRegExp),this.isRemovable(n)&&replaceWithOwnChildren(n)},applyToRange:function(t){var n=t.getNodes([e.TEXT_NODE]);if(!n.length)try{var r=this.createContainer(t.endContainer.ownerDocument);return t.surroundContents(r),void this.selectNode(t,r)}catch(e){}if(t.splitBoundaries(),(n=t.getNodes([e.TEXT_NODE])).length){for(var i,o=0,a=n.length;o<a;++o)i=n[o],this.getAncestorWithClass(i)||this.applyToTextNode(i);t.setStart(n[0],0),i=n[n.length-1],t.setEnd(i,i.length),this.normalize&&this.postApply(n,t)}},undoToRange:function(t){var n=t.getNodes([e.TEXT_NODE]),r,i;if(n.length)t.splitBoundaries(),n=t.getNodes([e.TEXT_NODE]);else{var o,a=t.endContainer.ownerDocument.createTextNode(e.INVISIBLE_SPACE);t.insertNode(a),t.selectNode(a),n=[a]}for(var s=0,l=n.length;s<l;++s)r=n[s],(i=this.getAncestorWithClass(r))&&this.undoToTextNode(r,t,i);1==l?this.selectNode(t,n[0]):(t.setStart(n[0],0),r=n[n.length-1],t.setEnd(r,r.length),this.normalize&&this.postApply(n,t))},selectNode:function(t,n){var r=n.nodeType===e.ELEMENT_NODE,i=!("canHaveHTML"in n)||n.canHaveHTML,o=r?n.innerHTML:n.data,a=""===o||o===e.INVISIBLE_SPACE;if(a&&r&&i)try{n.innerHTML=e.INVISIBLE_SPACE}catch(e){}t.selectNodeContents(n),a&&r?t.collapse(!1):a&&(t.setStartAfter(n),t.setEndAfter(n))},getTextSelectedByRange:function(e,t){var n=t.cloneRange();n.selectNodeContents(e);var r=n.intersection(t),i=r?r.toString():"";return n.detach(),i},isAppliedToRange:function(t){var n=[],r,i=t.getNodes([e.TEXT_NODE]);if(!i.length)return!!(r=this.getAncestorWithClass(t.startContainer))&&[r];for(var o=0,a=i.length,s;o<a;++o){if(s=this.getTextSelectedByRange(i[o],t),r=this.getAncestorWithClass(i[o]),""!==s&&!r)return!1;n.push(r)}return n},toggleRange:function(e){this.isAppliedToRange(e)?this.undoToRange(e):this.applyToRange(e)}},e.selection.HTMLApplier=HTMLApplier}(t,n),t.Commands=i.extend({constructor:function(e){this.editor=e,this.composer=e.composer,this.doc=this.composer.doc},support:function(e){return t.browser.supportsCommand(this.doc,e)},exec:function(e,n){var r=t.commands[e],i=t.lang.array(arguments).get(),o=r&&r.exec,a=null;if(this.editor.fire("beforecommand:composer"),o)i.unshift(this.composer),a=o.apply(r,i);else try{a=this.doc.execCommand(e,!1,n)}catch(e){}return"styleWithCSS"!=e&&(this.composer.parent.synchronizer&&this.composer.parent.synchronizer.sync(),this.editor.fire("aftercommand:composer")),a},state:function(e,n){var r=t.commands[e],i=t.lang.array(arguments).get(),o=r&&r.state;if(o)return i.unshift(this.composer),o.apply(r,i);try{return this.doc.queryCommandState(e)}catch(e){return!1}}}),t.commands.bold={exec:function(e,n){return t.commands.formatInline.exec(e,n,"strong")},state:function(e,n){return t.commands.formatInline.state(e,n,"strong")}},function(e){var t,n="A",r=e.dom;function _removeFormat(e,t){for(var n=t.length,i=0,o,a,s;i<n;i++)o=t[i],a=r.getParentElement(o,{nodeName:"code"}),(s=r.getTextContent(o)).match(r.autoLink.URL_REG_EXP)&&!a?a=r.renameElement(o,"code"):r.replaceWithChildNodes(o)}function _format(i,o){var a=i.doc,s="_wysihtml5-temp-"+ +new Date,l=/non-matching-class/g,u=0,c,d,f,p,h,m,g,v,b;for(e.commands.formatInline.exec(i,t,n,s,l),c=(d=a.querySelectorAll(n+"."+s)).length;u<c;u++)for(b in(f=d[u]).removeAttribute("class"),o)f.setAttribute(b,o[b]);m=f,1===c&&(g=r.getTextContent(f),p=!!f.querySelector("*"),h=""===g||g===e.INVISIBLE_SPACE,!p&&h&&(r.setTextContent(f,o.text||f.href),v=a.createTextNode(" "),i.selection.setAfter(f),r.insert(v).after(f),m=v)),i.selection.setAfter(m)}e.commands.createLink={exec:function(e,t,n){var r=this.state(e,t);r?e.selection.executeAndRestore(function(){_removeFormat(e,r)}):_format(e,n="object"==typeof n?n:{href:n}),e.parent.synchronizer.sync()},state:function(t,n){return e.commands.formatInline.state(t,n,"A")}}}(t),function(e){var t,n=/wysiwyg-font-size-[0-9a-z\-]+/g;e.commands.fontSize={exec:function(t,r,i){return e.commands.formatInline.exec(t,r,"span","wysiwyg-font-size-"+i,n)},state:function(t,r,i){return e.commands.formatInline.state(t,r,"span","wysiwyg-font-size-"+i,n)},value:function(){return t}}}(t),function(e){var t=/wysiwyg-color-[0-9a-z]+/g;e.commands.foreColor={exec:function(n,r,i){return e.commands.formatInline.exec(n,r,"span","wysiwyg-color-"+i,t)},state:function(n,r,i){return e.commands.formatInline.state(n,r,"span","wysiwyg-color-"+i,t)}}}(t),function(e){var t=e.dom,n=["H1","H2","H3","H4","H5","H6","P","BLOCKQUOTE","DIV"];function _addClass(e,t,n){e.className?(_removeClass(e,n),e.className+=" "+t):e.className=t}function _removeClass(e,t){e.className=e.className.replace(t,"")}function _isBlankTextNode(t){return t.nodeType===e.TEXT_NODE&&!e.lang.string(t.data).trim()}function _getPreviousSiblingThatIsNotBlank(e){for(var t=e.previousSibling;t&&_isBlankTextNode(t);)t=t.previousSibling;return t}function _getNextSiblingThatIsNotBlank(e){for(var t=e.nextSibling;t&&_isBlankTextNode(t);)t=t.nextSibling;return t}function _addLineBreakBeforeAndAfter(e){var t=e.ownerDocument,n=_getNextSiblingThatIsNotBlank(e),r=_getPreviousSiblingThatIsNotBlank(e);n&&!_isLineBreakOrBlockElement(n)&&e.parentNode.insertBefore(t.createElement("br"),n),r&&!_isLineBreakOrBlockElement(r)&&e.parentNode.insertBefore(t.createElement("br"),e)}function _removeLineBreakBeforeAndAfter(e){var t=_getNextSiblingThatIsNotBlank(e),n=_getPreviousSiblingThatIsNotBlank(e);t&&_isLineBreak(t)&&t.parentNode.removeChild(t),n&&_isLineBreak(n)&&n.parentNode.removeChild(n)}function _removeLastChildIfLineBreak(e){var t=e.lastChild;t&&_isLineBreak(t)&&t.parentNode.removeChild(t)}function _isLineBreak(e){return"BR"===e.nodeName}function _isLineBreakOrBlockElement(e){if(_isLineBreak(e))return!0;if("block"===t.getStyle("display").from(e))return!0;return!1}function _execCommand(n,r,i,o){var a;o&&(a=t.observe(n,"DOMNodeInserted",function(n){var r=n.target,i;if(r.nodeType!==e.ELEMENT_NODE)return;"inline"!==(i=t.getStyle("display").from(r)).substr(0,6)&&(r.className+=" "+o)})),n.execCommand(r,!1,i),a&&a.stop()}function _selectLineAndWrap(t,n){t.selection.selectLine(),t.selection.surround(n),_removeLineBreakBeforeAndAfter(n),_removeLastChildIfLineBreak(n),t.selection.selectNode(n,e.browser.displaysCaretInEmptyContentEditableCorrectly())}function _hasClasses(t){return!!e.lang.string(t.className).trim()}e.commands.formatBlock={exec:function(r,i,o,a,s){var l=r.doc,u=this.state(r,i,o,a,s),c=r.config.useLineBreaks,d=c?"DIV":"P",f;if(o="string"==typeof o?o.toUpperCase():o,u)return void r.selection.executeAndRestoreSimple(function(){var e;s&&_removeClass(u,s),_hasClasses(u)||!c&&"P"!==o?t.renameElement(u,"P"===o?"DIV":d):(_addLineBreakBeforeAndAfter(u),t.replaceWithChildNodes(u))});if((null===o||e.lang.array(n).contains(o))&&(f=r.selection.getSelectedNode(),u=t.getParentElement(f,{nodeName:n})))return void r.selection.executeAndRestore(function(){o&&(u=t.renameElement(u,o)),a&&_addClass(u,a,s)});if(r.commands.support(i))return void _execCommand(l,i,o||d,a);u=l.createElement(o||d),a&&(u.className=a),_selectLineAndWrap(r,u)},state:function(e,n,r,i,o){r="string"==typeof r?r.toUpperCase():r;var a=e.selection.getSelectedNode();return t.getParentElement(a,{nodeName:r,className:i,classRegExp:o})}}}(t),function(e){var t={strong:"b",em:"i",b:"strong",i:"em"},n={};function _getTagNames(e){var n=t[e];return n?[e.toLowerCase(),n.toLowerCase()]:[e.toLowerCase()]}function _getApplier(t,r,i){var o=t+":"+r;return n[o]||(n[o]=new e.selection.HTMLApplier(_getTagNames(t),r,i,!0)),n[o]}e.commands.formatInline={exec:function(e,t,n,r,i){var o=e.selection.getRange();if(!o)return!1;_getApplier(n,r,i).toggleRange(o),e.selection.setSelection(o)},state:function(n,r,i,o,a){var s=n.doc,l=t[i]||i,u;if(!e.dom.hasElementWithTagName(s,i)&&!e.dom.hasElementWithTagName(s,l))return!1;if(o&&!e.dom.hasElementWithClassName(s,o))return!1;if(!(u=n.selection.getRange()))return!1;return _getApplier(i,o,a).isAppliedToRange(u)}}}(t),t.commands.insertHTML={exec:function(e,t,n){e.commands.support(t)?e.doc.execCommand(t,!1,n):e.selection.insertHTML(n),e.parent.synchronizer.sync()},state:function(){return!1}},function(e){var t="IMG";e.commands.insertImage={exec:function(t,n,r){r="object"==typeof r?r:{src:r};var i=t.doc,o=this.state(t),a,s,l;if(o)return t.selection.setBefore(o),(l=o.parentNode).removeChild(o),e.dom.removeEmptyTextNodes(l),"A"!==l.nodeName||l.firstChild||(t.selection.setAfter(l),l.parentNode.removeChild(l)),void e.quirks.redraw(t.element);for(s in o=i.createElement("IMG"),r)"className"===s&&(s="class"),o.setAttribute(s,r[s]);t.selection.insertNode(o),e.browser.hasProblemsSettingCaretAfterImg()?(a=i.createTextNode(e.INVISIBLE_SPACE),t.selection.insertNode(a),t.selection.setAfter(a)):t.selection.setAfter(o),t.parent.synchronizer.sync()},state:function(t){var n=t.doc,r,i,o;if(!e.dom.hasElementWithTagName(n,"IMG"))return!1;if(!(r=t.selection.getSelectedNode()))return!1;if("IMG"===r.nodeName)return r;if(r.nodeType!==e.ELEMENT_NODE)return!1;if(i=t.selection.getText(),i=e.lang.string(i).trim())return!1;if(1!==(o=t.selection.getNodes(e.ELEMENT_NODE,function(e){return"IMG"===e.nodeName})).length)return!1;return o[0]}}}(t),function(e){var t="<br>"+(e.browser.needsSpaceAfterLineBreak()?" ":"");e.commands.insertLineBreak={exec:function(n,r){n.commands.support(r)?(n.doc.execCommand(r,!1,null),e.browser.autoScrollsToCaret()||n.selection.scrollIntoView()):n.commands.exec("insertHTML",t)},state:function(){return!1}}}(t),t.commands.insertOrderedList={exec:function(e,n){var r=e.doc,i=e.selection.getSelectedNode(),o=t.dom.getParentElement(i,{nodeName:"OL"}),a=t.dom.getParentElement(i,{nodeName:"UL"}),s="_wysihtml5-temp-"+(new Date).getTime(),l,u;if(!o&&!a&&e.commands.support(n))return void r.execCommand(n,!1,null);o?e.selection.executeAndRestore(function(){t.dom.resolveList(o,e.config.useLineBreaks)}):a?e.selection.executeAndRestore(function(){t.dom.renameElement(a,"ol")}):(e.commands.exec("formatBlock","div",s),l=""===(u=r.querySelector("."+s)).innerHTML||u.innerHTML===t.INVISIBLE_SPACE||"<br>"===u.innerHTML,e.selection.executeAndRestore(function(){o=t.dom.convertToList(u,"ol")}),l&&e.selection.selectNode(o.querySelector("li"),!0))},state:function(e){var n=e.selection.getSelectedNode();return t.dom.getParentElement(n,{nodeName:"OL"})}},t.commands.insertUnorderedList={exec:function(e,n){var r=e.doc,i=e.selection.getSelectedNode(),o=t.dom.getParentElement(i,{nodeName:"UL"}),a=t.dom.getParentElement(i,{nodeName:"OL"}),s="_wysihtml5-temp-"+(new Date).getTime(),l,u;if(!o&&!a&&e.commands.support(n))return void r.execCommand(n,!1,null);o?e.selection.executeAndRestore(function(){t.dom.resolveList(o,e.config.useLineBreaks)}):a?e.selection.executeAndRestore(function(){t.dom.renameElement(a,"ul")}):(e.commands.exec("formatBlock","div",s),l=""===(u=r.querySelector("."+s)).innerHTML||u.innerHTML===t.INVISIBLE_SPACE||"<br>"===u.innerHTML,e.selection.executeAndRestore(function(){o=t.dom.convertToList(u,"ul")}),l&&e.selection.selectNode(o.querySelector("li"),!0))},state:function(e){var n=e.selection.getSelectedNode();return t.dom.getParentElement(n,{nodeName:"UL"})}},t.commands.italic={exec:function(e,n){return t.commands.formatInline.exec(e,n,"em")},state:function(e,n){return t.commands.formatInline.state(e,n,"em")}},function(e){var t="wysiwyg-text-align-center",n=/wysiwyg-text-align-[0-9a-z]+/g;e.commands.justifyCenter={exec:function(r,i){return e.commands.formatBlock.exec(r,"formatBlock",null,t,n)},state:function(r,i){return e.commands.formatBlock.state(r,"formatBlock",null,t,n)}}}(t),function(e){var t="wysiwyg-text-align-left",n=/wysiwyg-text-align-[0-9a-z]+/g;e.commands.justifyLeft={exec:function(r,i){return e.commands.formatBlock.exec(r,"formatBlock",null,t,n)},state:function(r,i){return e.commands.formatBlock.state(r,"formatBlock",null,t,n)}}}(t),function(e){var t="wysiwyg-text-align-right",n=/wysiwyg-text-align-[0-9a-z]+/g;e.commands.justifyRight={exec:function(r,i){return e.commands.formatBlock.exec(r,"formatBlock",null,t,n)},state:function(r,i){return e.commands.formatBlock.state(r,"formatBlock",null,t,n)}}}(t),function(e){var t="wysiwyg-text-align-justify",n=/wysiwyg-text-align-[0-9a-z]+/g;e.commands.justifyFull={exec:function(r,i){return e.commands.formatBlock.exec(r,"formatBlock",null,t,n)},state:function(r,i){return e.commands.formatBlock.state(r,"formatBlock",null,t,n)}}}(t),t.commands.redo={exec:function(e){return e.undoManager.redo()},state:function(e){return!1}},t.commands.underline={exec:function(e,n){return t.commands.formatInline.exec(e,n,"u")},state:function(e,n){return t.commands.formatInline.state(e,n,"u")}},t.commands.undo={exec:function(e){return e.undoManager.undo()},state:function(e){return!1}},function(t){var n=90,r=89,i=8,o=46,a=25,s="data-wysihtml5-selection-node",l="data-wysihtml5-selection-offset",u='<span id="_wysihtml5-undo" class="_wysihtml5-temp">'+t.INVISIBLE_SPACE+"</span>",c='<span id="_wysihtml5-redo" class="_wysihtml5-temp">'+t.INVISIBLE_SPACE+"</span>",d=t.dom;function cleanTempElements(e){for(var t;t=e.querySelector("._wysihtml5-temp");)t.parentNode.removeChild(t)}t.UndoManager=t.lang.Dispatcher.extend({constructor:function(e){this.editor=e,this.composer=e.composer,this.element=this.composer.element,this.position=0,this.historyStr=[],this.historyDom=[],this.transact(),this._observe()},_observe:function(){var n=this,r=this.composer.sandbox.getDocument(),i;if(d.observe(this.element,"keydown",function(e){if(e.altKey||!e.ctrlKey&&!e.metaKey)return;var t=e.keyCode,r=90===t&&!e.shiftKey,i=90===t&&e.shiftKey||89===t;r?(n.undo(),e.preventDefault()):i&&(n.redo(),e.preventDefault())}),d.observe(this.element,"keydown",function(e){var t=e.keyCode;if(t===i)return;i=t,8!==t&&46!==t||n.transact()}),t.browser.hasUndoInContextMenu()){var o,a,s=function(){cleanTempElements(r),clearInterval(o)};d.observe(this.element,"contextmenu",function(){s(),n.composer.selection.executeAndRestoreSimple(function(){n.element.lastChild&&n.composer.selection.setAfter(n.element.lastChild),r.execCommand("insertHTML",!1,u),r.execCommand("insertHTML",!1,c),r.execCommand("undo",!1,null)}),o=setInterval(function(){r.getElementById("_wysihtml5-redo")?(s(),n.redo()):r.getElementById("_wysihtml5-undo")||(s(),n.undo())},400),a||(a=!0,d.observe(e,"mousedown",s),d.observe(r,["mousedown","paste","cut","copy"],s))})}this.editor.on("newword:composer",function(){n.transact()}).on("beforecommand:composer",function(){n.transact()})},transact:function(){var e=this.historyStr[this.position-1],n=this.composer.getValue(),r;if(n===e)return;(this.historyStr.length=this.historyDom.length=this.position)>25&&(this.historyStr.shift(),this.historyDom.shift(),this.position--),this.position++;var i=this.composer.selection.getRange(),o=i.startContainer||this.element,a=i.startOffset||0,u,c;o.nodeType===t.ELEMENT_NODE?u=o:(u=o.parentNode,c=this.getChildNodeIndex(u,o)),u.setAttribute(l,a),void 0!==c&&u.setAttribute(s,c);var d=this.element.cloneNode(!!n);this.historyDom.push(d),this.historyStr.push(n),u.removeAttribute(l),u.removeAttribute(s)},undo:function(){if(this.transact(),!this.undoPossible())return;this.set(this.historyDom[--this.position-1]),this.editor.fire("undo:composer")},redo:function(){if(!this.redoPossible())return;this.set(this.historyDom[++this.position-1]),this.editor.fire("redo:composer")},undoPossible:function(){return this.position>1},redoPossible:function(){return this.position<this.historyStr.length},set:function(e){this.element.innerHTML="";for(var t=0,n=e.childNodes,r=e.childNodes.length,i,o,a;t<r;t++)this.element.appendChild(n[t].cloneNode(!0));e.hasAttribute(l)?(i=e.getAttribute(l),a=e.getAttribute(s),o=this.element):(i=(o=this.element.querySelector("["+l+"]")||this.element).getAttribute(l),a=o.getAttribute(s),o.removeAttribute(l),o.removeAttribute(s)),null!==a&&(o=this.getChildNodeByIndex(o,+a)),this.composer.selection.set(o,i)},getChildNodeIndex:function(e,t){for(var n=0,r=e.childNodes,i=r.length;n<i;n++)if(r[n]===t)return n},getChildNodeByIndex:function(e,t){return e.childNodes[t]}})}(t),t.views.View=i.extend({constructor:function(e,t,n){this.parent=e,this.element=t,this.config=n,this._observeViewChange()},_observeViewChange:function(){var e=this;this.parent.on("beforeload",function(){e.parent.on("change_view",function(t,n){t===e.name?(e.parent.currentView=e,e.show(),n&&setTimeout(function(){e.focus()},0)):e.hide()})})},focus:function(){if(this.element.ownerDocument.querySelector(":focus")===this.element)return;try{this.element.focus()}catch(e){}},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display=""},disable:function(){this.element.setAttribute("disabled","disabled")},enable:function(){this.element.removeAttribute("disabled")}}),function(t){var n=t.dom,r=t.browser;t.views.Composer=t.views.View.extend({name:"composer",CARET_HACK:"<br>",constructor:function(e,t,n){this.base(e,t,n),this.textarea=this.parent.textarea,this._initSandbox()},clear:function(){this.element.innerHTML=r.displaysCaretInEmptyContentEditableCorrectly()?"":this.CARET_HACK},getValue:function(e){var n=this.isEmpty()?"":t.quirks.getCorrectInnerHTML(this.element);return e&&(n=this.parent.parse(n)),n=t.lang.string(n).replace(t.INVISIBLE_SPACE).by("")},setValue:function(e,t){t&&(e=this.parent.parse(e));try{this.element.innerHTML=e}catch(t){this.element.innerText=e}},show:function(){this.iframe.style.display=this._displayStyle||"",this.textarea.element.disabled||(this.disable(),this.enable())},hide:function(){this._displayStyle=n.getStyle("display").from(this.iframe),"none"===this._displayStyle&&(this._displayStyle=null),this.iframe.style.display="none"},disable:function(){this.parent.fire("disable:composer"),this.element.removeAttribute("contentEditable")},enable:function(){this.parent.fire("enable:composer"),this.element.setAttribute("contentEditable","true")},focus:function(e){t.browser.doesAsyncFocus()&&this.hasPlaceholderSet()&&this.clear(),this.base();var n=this.element.lastChild;e&&n&&("BR"===n.nodeName?this.selection.setBefore(this.element.lastChild):this.selection.setAfter(this.element.lastChild))},getTextContent:function(){return n.getTextContent(this.element)},hasPlaceholderSet:function(){return this.getTextContent()==this.textarea.element.getAttribute("placeholder")&&this.placeholderSet},isEmpty:function(){var e=this.element.innerHTML.toLowerCase();return""===e||"<br>"===e||"<p></p>"===e||"<p><br></p>"===e||this.hasPlaceholderSet()},_initSandbox:function(){var t=this;this.sandbox=new n.Sandbox(function(){t._create()},{stylesheets:this.config.stylesheets}),this.iframe=this.sandbox.getIframe();var r=this.textarea.element;if(n.insert(this.iframe).after(r),r.form){var i=e.createElement("input");i.type="hidden",i.name="_wysihtml5_mode",i.value=1,n.insert(i).after(r)}},_create:function(){var i=this;this.doc=this.sandbox.getDocument(),this.element=this.doc.body,this.textarea=this.parent.textarea,this.element.innerHTML=this.textarea.getValue(!0),this.selection=new t.Selection(this.parent),this.commands=new t.Commands(this.parent),n.copyAttributes(["className","spellcheck","title","lang","dir","accessKey"]).from(this.textarea.element).to(this.element),n.addClass(this.element,this.config.composerClassName),this.config.style&&this.style(),this.observe();var o=this.config.name;o&&(n.addClass(this.element,o),n.addClass(this.iframe,o)),this.enable(),this.textarea.element.disabled&&this.disable();var a="string"==typeof this.config.placeholder?this.config.placeholder:this.textarea.element.getAttribute("placeholder");a&&n.simulatePlaceholder(this.parent,this,a),this.commands.exec("styleWithCSS",!1),this._initAutoLinking(),this._initObjectResizing(),this._initUndoManager(),this._initLineBreaking(),!this.textarea.element.hasAttribute("autofocus")&&e.querySelector(":focus")!=this.textarea.element||r.isIos()||setTimeout(function(){i.focus(!0)},100),r.clearsContentEditableCorrectly()||t.quirks.ensureProperClearing(this),this.initSync&&this.config.sync&&this.initSync(),this.textarea.hide(),this.parent.fire("beforeload").fire("load")},_initAutoLinking:function(){var e=this,i=r.canDisableAutoLinking(),o=r.doesAutoLinkingInContentEditable();if(i&&this.commands.exec("autoUrlDetect",!1),!this.config.autoLink)return;(!o||o&&i)&&(this.parent.on("newword:composer",function(){n.getTextContent(e.element).match(n.autoLink.URL_REG_EXP)&&e.selection.executeAndRestore(function(e,t){n.autoLink(t.parentNode)})}),n.observe(this.element,"blur",function(){n.autoLink(e.element)}));var a=this.sandbox.getDocument().getElementsByTagName("a"),s=n.autoLink.URL_REG_EXP,l=function(e){var r=t.lang.string(n.getTextContent(e)).trim();return"www."===r.substr(0,4)&&(r="http://"+r),r};n.observe(this.element,"keydown",function(t){if(!a.length)return;var r=e.selection.getSelectedNode(t.target.ownerDocument),i=n.getParentElement(r,{nodeName:"A"},4),o;if(!i)return;o=l(i),setTimeout(function(){var e=l(i);if(e===o)return;e.match(s)&&i.setAttribute("href",e)},0)})},_initObjectResizing:function(){if(this.commands.exec("enableObjectResizing",!0),r.supportsEvent("resizeend")){var e=["width","height"],i=e.length,o=this.element;n.observe(o,"resizeend",function(n){var r=n.target||n.srcElement,a=r.style,s=0,l;if("IMG"!==r.nodeName)return;for(;s<i;s++)a[l=e[s]]&&(r.setAttribute(l,parseInt(a[l],10)),a[l]="");t.quirks.redraw(o)})}},_initUndoManager:function(){this.undoManager=new t.UndoManager(this.parent)},_initLineBreaking:function(){var e=this,i=["LI","P","H1","H2","H3","H4","H5","H6"],o=["UL","OL","MENU"];function adjust(t){var r=n.getParentElement(t,{nodeName:["P","DIV"]},2);r&&e.selection.executeAndRestore(function(){e.config.useLineBreaks?n.replaceWithChildNodes(r):"P"!==r.nodeName&&n.renameElement(r,"p")})}this.config.useLineBreaks||n.observe(this.element,["focus","keydown"],function(){if(e.isEmpty()){var t=e.doc.createElement("P");e.element.innerHTML="",e.element.appendChild(t),r.displaysCaretInEmptyContentEditableCorrectly()?e.selection.selectNode(t,!0):(t.innerHTML="<br>",e.selection.setBefore(t.firstChild))}}),n.observe(this.doc,"keydown",function(r){var a=r.keyCode;if(r.shiftKey)return;if(a!==t.ENTER_KEY&&a!==t.BACKSPACE_KEY)return;var s=n.getParentElement(e.selection.getSelectedNode(),{nodeName:i},4);if(s)return void setTimeout(function(){var r=e.selection.getSelectedNode(),i;if("LI"===s.nodeName){if(!r)return;(i=n.getParentElement(r,{nodeName:o},2))||adjust(r)}a===t.ENTER_KEY&&s.nodeName.match(/^H[1-6]$/)&&adjust(r)},0);e.config.useLineBreaks&&a===t.ENTER_KEY&&!t.browser.insertsLineBreaksOnReturn()&&(e.commands.exec("insertLineBreak"),r.preventDefault())})}})}(t),function(t){var n=t.dom,i=e,o=r,a=i.createElement("div"),s=["background-color","color","cursor","font-family","font-size","font-style","font-variant","font-weight","line-height","letter-spacing","text-align","text-decoration","text-indent","text-rendering","word-break","word-wrap","word-spacing"],l=["background-color","border-collapse","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-style","border-top-width","clear","display","float","margin-bottom","margin-left","margin-right","margin-top","outline-color","outline-offset","outline-width","outline-style","padding-left","padding-right","padding-top","padding-bottom","position","top","left","right","bottom","z-index","vertical-align","text-align","-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing","-webkit-box-shadow","-moz-box-shadow","-ms-box-shadow","box-shadow","-webkit-border-top-right-radius","-moz-border-radius-topright","border-top-right-radius","-webkit-border-bottom-right-radius","-moz-border-radius-bottomright","border-bottom-right-radius","-webkit-border-bottom-left-radius","-moz-border-radius-bottomleft","border-bottom-left-radius","-webkit-border-top-left-radius","-moz-border-radius-topleft","border-top-left-radius","width","min-width","min-height","max-width","max-height"],u=["html                 { height: 100%; }","body                 { height: 100%; padding: 1px 0 0 0; margin: -1px 0 0 0; }","body > p:first-child { margin-top: 0; }","._wysihtml5-temp     { display: none; }",t.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","img:-moz-broken      { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"],c=function(e){if(e.setActive)try{e.setActive()}catch(e){}else{var t=e.style,r=i.documentElement.scrollTop||i.body.scrollTop,a=i.documentElement.scrollLeft||i.body.scrollLeft,s={position:t.position,top:t.top,left:t.left,WebkitUserSelect:t.WebkitUserSelect};n.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(e),e.focus(),n.setStyles(s).on(e),o.scrollTo&&o.scrollTo(a,r)}};t.views.Composer.prototype.style=function(){var e=this,r=i.querySelector(":focus"),o=this.textarea.element,c=o.hasAttribute("placeholder"),d=c&&o.getAttribute("placeholder"),f=o.style.display,p=o.disabled,h;this.blurStylesHost=a.cloneNode(!1),this.disabledStylesHost=a.cloneNode(!1),c&&o.removeAttribute("placeholder"),o===r&&o.blur(),o.disabled=!1,o.style.display=h="none",(o.getAttribute("rows")&&"auto"===n.getStyle("height").from(o)||o.getAttribute("cols")&&"auto"===n.getStyle("width").from(o))&&(o.style.display=h=f),n.copyStyles(l).from(o).to(this.iframe).andTo(this.blurStylesHost),n.copyStyles(s).from(o).to(this.element).andTo(this.blurStylesHost),n.insertCSS(u).into(this.element.ownerDocument),o.disabled=!0,n.copyStyles(l).from(o).to(this.disabledStylesHost),n.copyStyles(s).from(o).to(this.disabledStylesHost),o.disabled=p,o.style.display=f,n.copyStyles(["display"]).from(o).to(this.iframe);var m=t.lang.array(l).without(["display"]);return c&&o.setAttribute("placeholder",d),this.parent.on("focus:composer",function(){e.iframe.className+=" wysihtml5-sandbox-focus"}),this.parent.on("blur:composer",function(){e.iframe.className=e.iframe.className.replace("wysihtml5-sandbox-focus","").trim()}),this.parent.observe("disable:composer",function(){n.copyStyles(m).from(e.disabledStylesHost).to(e.iframe),n.copyStyles(s).from(e.disabledStylesHost).to(e.element)}),this.parent.observe("enable:composer",function(){n.copyStyles(m).from(e.blurStylesHost).to(e.iframe),n.copyStyles(s).from(e.blurStylesHost).to(e.element)}),this}}(t),function(t){var n=t.dom,r=t.browser,i={66:"bold",73:"italic",85:"underline"};t.views.Composer.prototype.observe=function(){var o=this,a=this.getValue(),s=this.sandbox.getIframe(),l=this.element,u=r.supportsEventsInIframeCorrectly()?l:this.sandbox.getWindow(),c=["drop","paste"];n.observe(s,"DOMNodeRemoved",function(){clearInterval(d),o.parent.fire("destroy:composer")});var d=setInterval(function(){n.contains(e.documentElement,s)||(clearInterval(d),o.parent.fire("destroy:composer"))},250);n.observe(u,"focus",function(){o.parent.fire("focus").fire("focus:composer"),setTimeout(function(){a=o.getValue()},0)}),n.observe(u,"blur",function(){a!==o.getValue()&&o.parent.fire("change").fire("change:composer"),o.parent.fire("blur").fire("blur:composer")}),n.observe(l,"dragenter",function(){o.parent.fire("unset_placeholder")}),n.observe(l,c,function(){setTimeout(function(){o.parent.fire("paste").fire("paste:composer")},0)}),n.observe(l,"cut",function(){setTimeout(function(){o.parent.fire("cut").fire("cut:composer")},0)}),n.observe(l,"keyup",function(e){o.parent.synchronizer.sync();var n=e.keyCode;o.parent.fire("keyup"),n!==t.SPACE_KEY&&n!==t.ENTER_KEY||o.parent.fire("newword:composer"),o.parent.fire("input")}),this.parent.on("cut:composer",function(){o.parent.synchronizer.sync()}),this.parent.on("change:composer",function(){o.parent.synchronizer.sync()}),this.parent.on("paste:composer",function(){o.parent.synchronizer.sync(),setTimeout(function(){o.parent.fire("newword:composer")},0)}),r.canSelectImagesInContentEditable()||n.observe(l,"mousedown",function(e){var t=e.target;"IMG"===t.nodeName&&(o.selection.selectNode(t),e.preventDefault())}),r.hasHistoryIssue()&&r.supportsSelectionModify()&&n.observe(l,"keydown",function(e){if(!e.metaKey&&!e.ctrlKey)return;var t=e.keyCode,n,r=l.ownerDocument.defaultView.getSelection();37!==t&&39!==t||(37===t&&(r.modify("extend","left","lineboundary"),e.shiftKey||r.collapseToStart()),39===t&&(r.modify("extend","right","lineboundary"),e.shiftKey||r.collapseToEnd()),e.preventDefault())}),n.observe(l,"keydown",function(e){o.parent.fire("keydown");var t=e.keyCode,n=i[t];(e.ctrlKey||e.metaKey)&&!e.altKey&&n&&(o.commands.exec(n),e.preventDefault())}),n.observe(l,"keydown",function(e){var n=o.selection.getSelectedNode(!0),r=e.keyCode,i;!n||"IMG"!==n.nodeName||r!==t.BACKSPACE_KEY&&r!==t.DELETE_KEY||((i=n.parentNode).removeChild(n),"A"!==i.nodeName||i.firstChild||i.parentNode.removeChild(i),setTimeout(function(){t.quirks.redraw(l)},0),e.preventDefault())}),r.hasIframeFocusIssue()&&(n.observe(this.iframe,"focus",function(){setTimeout(function(){o.doc.querySelector(":focus")!==o.element&&o.focus()},0)}),n.observe(this.element,"blur",function(){setTimeout(function(){o.selection.getSelection().removeAllRanges()},0)}));var f={IMG:"Image: ",A:"Link: "};n.observe(l,"mouseover",function(e){var t=e.target,n=t.nodeName,r,i;if("A"!==n&&"IMG"!==n)return;t.hasAttribute("title")||(r=f[n]+(t.getAttribute("href")||t.getAttribute("src")),t.setAttribute("title",r))})}}(t),function(e){var t=400;e.views.Synchronizer=i.extend({constructor:function(e,t,n){this.editor=e,this.textarea=t,this.composer=n,this._observe()},fromComposerToTextarea:function(t){this.textarea.setValue(e.lang.string(this.composer.getValue()).trim(),t)},fromTextareaToComposer:function(e){var t=this.textarea.getValue();t?this.composer.setValue(t,e):(this.composer.clear(),this.editor.fire("set_placeholder"))},sync:function(e){var t=10,n=this;this.syncTimeout&&(t=300,clearTimeout(this.syncTimeout)),this.syncTimeout=window.setTimeout(function(){"textarea"===n.editor.currentView.name?n.fromTextareaToComposer(e):n.fromComposerToTextarea(e),clearTimeout(n.syncTimeout)},t)},_observe:function(){var t=this,n=this.textarea.element.form;n&&(e.dom.observe(n,"submit",function(){t.sync(!0)}),e.dom.observe(n,"reset",function(){setTimeout(function(){t.fromTextareaToComposer()},0)})),this.editor.on("change_view",function(e){"composer"===e?t.fromTextareaToComposer(!0):t.fromComposerToTextarea(!0)})}})}(t),t.views.Textarea=t.views.View.extend({name:"textarea",constructor:function(e,t,n){this.base(e,t,n),this._observe()},clear:function(){this.element.value=""},getValue:function(e){var t=this.isEmpty()?"":this.element.value;return e&&(t=this.parent.parse(t)),t},setValue:function(e,t){t&&(e=this.parent.parse(e)),this.element.value=e},hasPlaceholderSet:function(){var e=t.browser.supportsPlaceholderAttributeOn(this.element),n=this.element.getAttribute("placeholder")||null,r=this.element.value,i;return e&&!r||r===n},isEmpty:function(){return!t.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var e=this.element,n=this.parent,r={focusin:"focus",focusout:"blur"},i=t.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];n.on("beforeload",function(){t.dom.observe(e,i,function(e){var t=r[e.type]||e.type;n.fire(t).fire(t+":textarea")}),t.dom.observe(e,["paste","drop"],function(){setTimeout(function(){n.fire("paste").fire("paste:textarea")},0)})})}}),function(t){var n=t.dom,r="wysihtml5-command-dialog-opened",i="input, select, textarea",o="[data-wysihtml5-dialog-field]",a="data-wysihtml5-dialog-field";t.toolbar.Dialog=t.lang.Dispatcher.extend({constructor:function(e,t){this.link=e,this.container=t},_observe:function(){if(this._observed)return;var e=this,o=function(t){var n=e._serialize();n==e.elementToChange?e.fire("edit",n):e.fire("save",n),e.hide(),t.preventDefault(),t.stopPropagation()};n.observe(e.link,"click",function(){n.hasClass(e.link,r)&&setTimeout(function(){e.hide()},0)}),n.observe(this.container,"keydown",function(n){var r=n.keyCode;r===t.ENTER_KEY&&o(n),r===t.ESCAPE_KEY&&e.hide()}),n.delegate(this.container,"[data-wysihtml5-dialog-action=save]","click",o),n.delegate(this.container,"[data-wysihtml5-dialog-action=cancel]","click",function(t){e.fire("cancel"),e.hide(),t.preventDefault(),t.stopPropagation()});for(var a=this.container.querySelectorAll(i),s=0,l=a.length,u=function(){clearInterval(e.interval)};s<l;s++)n.observe(a[s],"change",u);this._observed=!0},_serialize:function(){for(var e=this.elementToChange||{},t=this.container.querySelectorAll(o),n=t.length,r=0;r<n;r++)e[t[r].getAttribute(a)]=t[r].value;return e},_interpolate:function(t){for(var n,r,i,s=e.querySelector(":focus"),l=this.container.querySelectorAll(o),u=l.length,c=0;c<u;c++){if((n=l[c])===s)continue;if(t&&"hidden"===n.type)continue;r=n.getAttribute(a),i=this.elementToChange?this.elementToChange[r]||"":n.defaultValue,n.value=i}},show:function(e){if(n.hasClass(this.link,r))return;var t=this,o=this.container.querySelector(i);if(this.elementToChange=e,this._observe(),this._interpolate(),e&&(this.interval=setInterval(function(){t._interpolate(!0)},500)),n.addClass(this.link,r),this.container.style.display="",this.fire("show"),o&&!e)try{o.focus()}catch(e){}},hide:function(){clearInterval(this.interval),this.elementToChange=null,n.removeClass(this.link,r),this.container.style.display="none",this.fire("hide")}})}(t),function(t){var n=t.dom,r={position:"relative"},i={left:0,margin:0,opacity:0,overflow:"hidden",padding:0,position:"absolute",top:0,zIndex:1},o={cursor:"inherit",fontSize:"50px",height:"50px",marginTop:"-25px",outline:0,padding:0,position:"absolute",right:"-4px",top:"50%"},a={"x-webkit-speech":"",speech:""};t.toolbar.Speech=function(s,l){var u=e.createElement("input");if(!t.browser.supportsSpeechApiOn(u))return void(l.style.display="none");var c=s.editor.textarea.element.getAttribute("lang");c&&(a.lang=c);var d=e.createElement("div");t.lang.object(i).merge({width:l.offsetWidth+"px",height:l.offsetHeight+"px"}),n.insert(u).into(d),n.insert(d).into(l),n.setStyles(o).on(u),n.setAttributes(a).on(u),n.setStyles(i).on(d),n.setStyles(r).on(l);var f="onwebkitspeechchange"in u?"webkitspeechchange":"speechchange";n.observe(u,f,function(){s.execCommand("insertText",u.value),u.value=""}),n.observe(u,"click",function(e){n.hasClass(l,"wysihtml5-command-disabled")&&e.preventDefault(),e.stopPropagation()})}}(t),function(t){var n="wysihtml5-command-disabled",r="wysihtml5-commands-disabled",o="wysihtml5-command-active",a="wysihtml5-action-active",s=t.dom;t.toolbar.Toolbar=i.extend({constructor:function(n,r){this.editor=n,this.container="string"==typeof r?e.getElementById(r):r,this.composer=n.composer,this._getLinks("command"),this._getLinks("action"),this._observe(),this.show();for(var i=this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),o=i.length,a=0;a<o;a++)new t.toolbar.Speech(this,i[a])},_getLinks:function(e){for(var n=this[e+"Links"]=t.lang.array(this.container.querySelectorAll("[data-wysihtml5-"+e+"]")).get(),r=n.length,i=0,o=this[e+"Mapping"]={},a,s,l,u,c;i<r;i++)l=(a=n[i]).getAttribute("data-wysihtml5-"+e),u=a.getAttribute("data-wysihtml5-"+e+"-value"),s=this.container.querySelector("[data-wysihtml5-"+e+"-group='"+l+"']"),c=this._getDialog(a,l),o[l+":"+u]={link:a,group:s,name:l,value:u,dialog:c,state:!1}},_getDialog:function(e,n){var r=this,i=this.container.querySelector("[data-wysihtml5-dialog='"+n+"']"),o,a;return i&&((o=new t.toolbar.Dialog(e,i)).on("show",function(){a=r.composer.selection.getBookmark(),r.editor.fire("show:dialog",{command:n,dialogContainer:i,commandLink:e})}),o.on("save",function(t){a&&r.composer.selection.setBookmark(a),r._execCommand(n,t),r.editor.fire("save:dialog",{command:n,dialogContainer:i,commandLink:e})}),o.on("cancel",function(){r.editor.focus(!1),r.editor.fire("cancel:dialog",{command:n,dialogContainer:i,commandLink:e})})),o},execCommand:function(e,t){if(this.commandsDisabled)return;var n=this.commandMapping[e+":"+t];n&&n.dialog&&!n.state?n.dialog.show():this._execCommand(e,t)},_execCommand:function(e,t){this.editor.focus(!1),this.composer.commands.exec(e,t),this._updateLinkStates()},execAction:function(e){var t=this.editor;"change_view"===e&&(t.currentView===t.textarea?t.fire("change_view","composer"):t.fire("change_view","textarea"))},_observe:function(){for(var e=this,t=this.editor,n=this.container,i=this.commandLinks.concat(this.actionLinks),o=i.length,a=0;a<o;a++)s.setAttributes({href:"javascript:;",unselectable:"on"}).on(i[a]);s.delegate(n,"[data-wysihtml5-command], [data-wysihtml5-action]","mousedown",function(e){e.preventDefault()}),s.delegate(n,"[data-wysihtml5-command]","click",function(t){var n=this,r=this.getAttribute("data-wysihtml5-command"),i=this.getAttribute("data-wysihtml5-command-value");e.execCommand(r,i),t.preventDefault()}),s.delegate(n,"[data-wysihtml5-action]","click",function(t){var n=this.getAttribute("data-wysihtml5-action");e.execAction(n),t.preventDefault()}),t.on("focus:composer",function(){e.bookmark=null,clearInterval(e.interval),e.interval=setInterval(function(){e._updateLinkStates()},500)}),t.on("blur:composer",function(){clearInterval(e.interval)}),t.on("destroy:composer",function(){clearInterval(e.interval)}),t.on("change_view",function(t){setTimeout(function(){e.commandsDisabled="composer"!==t,e._updateLinkStates(),e.commandsDisabled?s.addClass(n,r):s.removeClass(n,r)},0)})},_updateLinkStates:function(){var e=this.commandMapping,r=this.actionMapping,i,l,u,c;for(i in e){if(c=e[i],this.commandsDisabled?(l=!1,s.removeClass(c.link,o),c.group&&s.removeClass(c.group,o),c.dialog&&c.dialog.hide()):(l=this.composer.commands.state(c.name,c.value),t.lang.object(l).isArray()&&(l=1!==l.length||l[0]),s.removeClass(c.link,n),c.group&&s.removeClass(c.group,n)),c.state===l)continue;c.state=l,l?(s.addClass(c.link,o),c.link.setAttribute("aria-pressed","true"),c.group&&(s.addClass(c.group,o),c.group.setAttribute("aria-pressed","true")),c.dialog&&("object"==typeof l?c.dialog.show(l):c.dialog.hide())):(s.removeClass(c.link,o),c.link.setAttribute("aria-pressed","false"),c.group&&(s.removeClass(c.group,o),c.group.setAttribute("aria-pressed","false")),c.dialog&&c.dialog.hide())}for(i in r)"change_view"===(u=r[i]).name&&(u.state=this.editor.currentView===this.editor.textarea,u.state?s.addClass(u.link,a):s.removeClass(u.link,a))},show:function(){this.container.style.display=""},hide:function(){this.container.style.display="none"}})}(t),function(t){var n,r={name:n,style:!0,toolbar:n,autoLink:!0,parserRules:{tags:{br:{},span:{},div:{},p:{}},classes:{}},parser:t.dom.parse,composerClassName:"wysihtml5-editor",bodyClassName:"wysihtml5-supported",useLineBreaks:!0,stylesheets:[],placeholderText:n,supportTouchDevices:!0};t.Editor=t.lang.Dispatcher.extend({constructor:function(n,i){if(this.textareaElement="string"==typeof n?e.getElementById(n):n,this.config=t.lang.object({}).merge(r).merge(i).get(),this.textarea=new t.views.Textarea(this,this.textareaElement,this.config),this.currentView=this.textarea,this._isCompatible=t.browser.supported(),!this._isCompatible||!this.config.supportTouchDevices&&t.browser.isTouchDevice()){var o=this;return void setTimeout(function(){o.fire("beforeload").fire("load")},0)}t.dom.addClass(e.body,this.config.bodyClassName),this.composer=new t.views.Composer(this,this.textareaElement,this.config),this.currentView=this.composer,"function"==typeof this.config.parser&&this._initParser(),this.on("beforeload",function(){this.synchronizer=new t.views.Synchronizer(this,this.textarea,this.composer),this.config.toolbar&&(this.toolbar=new t.toolbar.Toolbar(this,this.config.toolbar))})},isCompatible:function(){return this._isCompatible},clear:function(){return this.currentView.clear(),this},getValue:function(e){return this.currentView.getValue(e)},setValue:function(e,t){if(this.fire("unset_placeholder"),!e)return this.clear();return this.currentView.setValue(e,t),this},focus:function(e){return this.currentView.focus(e),this},disable:function(){return this.currentView.disable(),this},enable:function(){return this.currentView.enable(),this},isEmpty:function(){return this.currentView.isEmpty()},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()},parse:function(e){var n=this.config.parser(e,this.config.parserRules,this.composer.sandbox.getDocument(),!0);return"object"==typeof e&&t.quirks.redraw(e),n},_initParser:function(){this.on("paste:composer",function(){var e=!0,n=this;n.composer.selection.executeAndRestore(function(){t.quirks.cleanPastedHTML(n.composer.element),n.parse(n.composer.element)},!0)})}})}(t),t},void 0===(n=function(){return i()}.apply(exports,t=[]))||(module.exports=n)},"qO+6":function(module,exports,e){var t,n,r,i;r=window,i=function(e,t,n){var r=function template(n){var r=[],i,o=n||{};return function(t,n){r.push('<button data-wysihtml5-custom-command="latex" title="Equation Editor" type="button"'+e.cls([t+"-toolbar-item "+t+"-toolbar-latex"],[!0])+">"+e.escape(null==(i=n("Math"))?"":i)+"</button>")}.call(this,"prefix"in o?o.prefix:"undefined"!=typeof prefix?prefix:void 0,"_t"in o?o._t:void 0!==t?t:void 0),r.join("")};return function(e){return e&&"_t"in e&&(t=e._t.merge(t)),r(e)}},t=[e("xgPa"),e("7Z6A")],void 0===(n=function(e,t){var n;return i(e,t,n)}.apply(exports,t))||(module.exports=n)},r4OL:function(module,exports,e){},s2tf:function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("dN2h")),r,i=_interopRequireDefault(e("XgYJ")),o,a=_interopRequireDefault(e("DiLM"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}module.exports=(0,a.default)(function(e){var t=e.itemId,r=e.courseBranchId,o=e.courseId,a=e.hasSaved,s=e.hasSubmitted;if(a)return new n.default({courseBranchId:r,itemId:t});if(s)return new i.default({courseBranchId:r,itemId:t});return null},function(e){var t;return{course_id:e.courseId}})(function(){return null})},sIXp:function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("iCc5")),r,i=_interopRequireDefault(e("FYw3")),o,a=_interopRequireDefault(e("mRg0")),s,l=_interopRequireDefault(e("sbe7")),u,c=_interopRequireDefault(e("w/1P")),d,f=_interopRequireDefault(e("WSZT")),p,h=_interopRequireDefault(e("Dyy4")),m,g=_interopRequireDefault(e("JUgE"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e("R6Zj");var v=function(e){function RichTextCMLEditor(){var t,r,o;(0,n.default)(this,RichTextCMLEditor);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return t=r=(0,i.default)(this,e.call.apply(e,[this].concat(s))),r.state={isFocused:!1},r.onFocus=function(){r.setState({isFocused:!0})},r.onBlur=function(){r.setState({isFocused:!1})},o=t,(0,i.default)(r,o)}return(0,a.default)(RichTextCMLEditor,e),RichTextCMLEditor.prototype.render=function render(){if(this.props.disabled)return l.default.createElement(g.default,{cml:this.props.content});var e=this.state.isFocused;return l.default.createElement("div",{className:(0,c.default)("rc-RichTextCmlEditor",{focused:e})},l.default.createElement(f.default,{blocks:h.default.richTextBlocks,onFocus:this.onFocus,onBlur:this.onBlur,changeDelay:0,cml:this.props.content,imageUploadOptions:h.default.getImageUploadOptions(this.props.courseId,this.props.itemId),onChange:this.props.onChange}))},RichTextCMLEditor}(l.default.Component);module.exports=v},tXzP:function(module,exports,e){"use strict";var t,n,r,i;r=window,i=function init($,_,e,t,n,r,i,o,a,s,l,u,c,d,f,p){return e.defaults=$.extend(e.defaults,{"toolbar.modes":!0,"toolbar.mode.html":!0,"toolbar.mode.markdown":!1,"toolbar.mode.rich":!0,"composer.default":"rich","composer.group":"wysihtml5","composer.defaultPersist":!0,"footer.markdown":!1,"footer.html":!1,"footer.rich":!1,"toolbar.preview":!0}),e.plugin("modes",function(h,m,g,v){if(v["toolbar.modes"]){var b=v["prefix.css"]+"-toolbar-mode-html",y=v["prefix.css"]+"-toolbar-mode-rich",w=v["prefix.css"]+"-toolbar-mode-markdown",x=v["prefix.data"].replace(/-/g,".")+"default.mode."+v["composer.group"],S,E=$(t({_t:n,prefix:v["prefix.css"],editor:h,preview:v["toolbar.preview"],mode:{html:v["toolbar.mode.html"],markdown:v["toolbar.mode.markdown"],rich:v["toolbar.mode.rich"]}}));e.insertIntoRightToolbar(m,E,100);var C=y,T=null,R=function setModeDefault(e){var t=m.find("."+v["prefix.css"]+"-toolbar-mode-"+e);v["composer.defaultPersist"]&&c.set(x,e,{expires:36500}),S=e,m.find("."+v["prefix.css"]+"-toolbar-mode-editor-label").html(t.html()),m.find("[data-wysihtml5-custom-command=change-editor]").removeClass("wysihtml5-command-active"),m.find("."+v["prefix.css"]+"-toolbar-mode-"+e).addClass("wysihtml5-command-active")},N=function hideEditors(){var e=S;"html"==e?$(h.textareaElement).hide():"rich"==e?(m.addClass("wysihtml5-commands-disabled"),$(h.composer.iframe).hide()):"markdown"==e&&T.hide(),g.hide(),h.fire("modeChange","preview")},A=function showEditors(){var e=S;"html"==e?$(h.textareaElement).show().focus():"rich"==e?(m.removeClass("wysihtml5-commands-disabled"),$(h.composer.iframe).show(),h.focus()):"markdown"==e&&T.show().focus(),g.show(),$(h.textareaElement).parent().find("#"+v["prefix.css"]+"-toolbar-mode-previewer-"+h.uid).remove(),h.fire("modeChange",e)},k=function modePreview(){m.find("."+v["prefix.css"]+"-toolbar-mode-editor").hide(),m.find("."+v["prefix.css"]+"-toolbar-mode-preview-close").show(),m.find("."+v["prefix.css"]+"-toolbar-mode-preview").addClass("on").attr({"aria-pressed":"true"});var e=$(h.textareaElement),t=$(h.composer.iframe),n=t.clone().removeClass("wysihtml5-sandbox").addClass(v["prefix.css"]+"-toolbar-mode-previewer").attr({id:v["prefix.css"]+"-toolbar-mode-previewer-"+h.uid}),r=$("<div>").hide().addClass(h.config.composeClassName).appendTo(m),i=["dir"],o=["color","cursor","font-family","font-size","font-style","font-variant","font-weight","line-height","letter-spacing","text-align","text-decoration","text-indent","text-rendering","word-break","word-wrap","word-spacing"];N(),n.load(function(){var e=n[0].contentWindow.document,a=t[0].contentWindow.document,s=$(h.textareaElement),l=$("body",a),u=$("body",e);_.each(i,function(e){var t=s.attr(e);void 0!==t&&u.attr(e,t)}),_.each(o,function(e){u.css(e,l.css(e))}),u.addClass(v["prefix.css"]+"-preview");var c=$("head",e);_.each(h.config.stylesheets,function(t){$("<link>",e).attr({rel:"stylesheet",href:t}).appendTo(c)}),r.append(h.getValue(!0)).show(),h.fire("preview",r[0]),r.appendTo(u);var d=function resize(){var e=u.children(),t=e.length&&1==e.get(0).nodeType?e.get(0).offsetTop:0;n.height(u.get(0).scrollHeight+t)};window.setTimeout(function(){d(),window.setTimeout(d,200)},0)}),n.css({border:"none",padding:0}).insertBefore(e).show()},I=function modePreviewClose(){m.find("."+v["prefix.css"]+"-toolbar-mode-editor").show(),m.find("."+v["prefix.css"]+"-toolbar-mode-preview").show().removeClass("on").attr({"aria-pressed":"false"}),m.find("."+v["prefix.css"]+"-toolbar-mode-preview-close").hide(),m.find("."+v["prefix.css"]+"-toolbar-mode-previewer").remove(),A()},P=function handleWysiMode(t){var n;h.fire("change_view","composer",t),h.fire("modeChange","rich"),C=y,n=!1!==v["footer.rich"]?_.isFunction(v["footer.rich"])?$(v["footer.rich"]({options:v,editor:h})):$(v["footer.rich"]||""):$(s({_t:l,prefix:v["prefix.css"]})),R("rich"),e.updateFooter(g,n),h.fire("toggleToWysiMode")},D=function handleSourceMode(t){var n;C!=w&&h.fire("change_view","textarea",t),C=b,h.fire("modeChange","html"),!1!==v["footer.html"]?n=_.isFunction(v["footer.html"])?$(v["footer.html"]({options:v,editor:h})):$(v["footer.html"]):((n=$(r({_t:i,prefix:v["prefix.css"]}))).find("a[data-wysihtml5-link=help]").on("click",function(e){e.preventDefault(),u(n.find(".modal")).open()}),n.find("a[data-wysihtml5-link=format]").on("click",function(e){e.preventDefault(),h.setValue(d.html_beautify(h.getValue())||h.getValue()),h.fire("aftercommand:composer")})),R("html"),e.updateFooter(g,n),$(h.textareaElement).show(),h.fire("toggleToSourceMode")},O=function handleMarkdownMode(t){var n,r=!1;h.fire("modeChange","rich"),C!=b&&h.fire("change_view","textarea"),$(h.textareaElement).hide(),C=w,T||(r=!0,T=$("<textarea></textarea>").addClass(v["prefix.css"]+"-markdown-editor"),$(h.textareaElement).after(T),e.setupSecondaryTextarea(h,T)),T.val(p(h.getValue(),{inline:!0})),T.on("keyup",function(){h.setValue(f($(this).val(),{math:!0}))}),r&&e.setupSecondaryTextarea(h,T),n=!1!==v["footer.markdown"]?_.isFunction(v["footer.markdown"])?$(v["footer.markdown"]({options:v,editor:h})):$(v["footer.markdown"]):$(o({_t:a,prefix:v["prefix.css"]})),R("markdown"),e.updateFooter(g,n),t&&setTimeout(function(){T.show().focus()},0)};v["toolbar.preview"]&&(m.find("."+v["prefix.css"]+"-toolbar-mode-preview").on("click",function(e){$(this).hasClass("on")||k()}),m.find("."+v["prefix.css"]+"-toolbar-mode-preview-close").on("click",function(e){I()})),m.find("[data-wysihtml5-custom-command=change-editor]").on("click",function(t){var n=$(this);n.hasClass("wysihtml5-command-active")||(e.updateFooter(g,""),T&&T.hide(),n.hasClass(y)?P(!0):n.hasClass(b)?D(!0):n.hasClass(w)&&O(!0))}),h.on("load",function(){var t=v["composer.defaultPersist"]?c.get(x):S;if(v["toolbar.mode.markdown"]&&("markdown"==v["composer.default"]&&!t||"markdown"==t))m.find("[data-wysihtml5-custom-command=change-editor]").show().removeClass("wysihtml5-command-active"),m.find("."+w).addClass("wysihtml5-command-active"),O(!1);else if(v["toolbar.mode.html"]&&("html"==v["composer.default"]&&!t||"html"==t))m.find("[data-wysihtml5-custom-command=change-editor]").show().removeClass("wysihtml5-command-active"),m.find("."+b).addClass("wysihtml5-command-active"),D(!1);else{var n;n=!1!==v["footer.rich"]?_.isFunction(v["footer.rich"])?$(v["footer.rich"]({options:v,editor:h})):$(v["footer.rich"]):$(s({prefix:v["prefix.css"]})),R("rich"),e.updateFooter(g,n)}})}}),e},t=[e("oYk5"),e("VYij"),e("exfq"),e("xdOJ"),e("Di88"),e("CLJX"),e("zU4u"),e("F9Cc"),e("fd/V"),e("l4kk"),e("tslM"),e("r9wp"),e("VGgr"),e("UhgZ"),e("MDsP"),e("IIqh")],void 0===(n=function($,_,e,t,n,r,o,a,s,l,u,c,d,f,p,h){return i($,_,e,t,n,r,o,a,s,l,u,c,d,f,p,h)}.apply(exports,t))||(module.exports=n)},talK:function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("QbLZ")),r,i=_interopRequireDefault(e("iCc5")),o,a=_interopRequireDefault(e("FYw3")),s,l=_interopRequireDefault(e("mRg0")),u,c,d,f=_interopRequireWildcard(e("sbe7")),p,h=_interopRequireDefault(e("VXRf")),m,g=_interopRequireDefault(e("kwmr")),v,b=_interopRequireDefault(e("oYk5")),y,w=_interopRequireDefault(e("VYij")),x,S=_interopRequireDefault(e("+LJP")),E,C=_interopRequireDefault(e("jsrg")),T=e("ih6J"),R=e("0DRP"),N=e("L7AI"),A,k=_interopRequireDefault(e("paF6")),I,P=_interopRequireDefault(e("9zHD")),D,O=_interopRequireDefault(e("4qA7")),L,M=_interopRequireDefault(e("JkvR")),q,B=_interopRequireDefault(e("f8IG")),V,U=_interopRequireDefault(e("3aJm")),H,W=_interopRequireDefault(e("tvdM")),j,F=_interopRequireDefault(e("3l+J")),K,z=_interopRequireDefault(e("B2B+")),Y,G=_interopRequireDefault(e("sQ/U")),X,Q=_interopRequireDefault(e("s2tf")),J=e("C+yd");function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var Z=(c=u=function(e){function PeerItemEditView(t,n){(0,i.default)(this,PeerItemEditView);var r=(0,a.default)(this,e.call(this,t,n));return r.handleSubmit=function(e){var t=r.props,n=t.computedItem,i=t.latestSubmissionAndRelated,o=t.courseId;r.context.executeAction(T.submitSubmission,{itemId:n.id,submission:i.submission,assignmentVersion:i.submissionSchema.assignmentVersion,verifiableId:e,courseId:o,userId:G.default.get().id})},r.handleSave=function(){var e=r.props,t=e.computedItem,n=e.latestSubmissionAndRelated,i=e.courseId;r.setState({hasSaved:!0}),r.context.executeAction(T.saveSubmission,{courseId:i,userId:G.default.get().id,itemId:t.id,submission:n.submission,assignmentVersion:n.submissionSchema.assignmentVersion})},r.updateSubmissionPartGenerator=function(e){return function(t){var n=r.props.latestSubmissionAndRelated,i=b.default.extend(!0,{},n.submission);i.definition.parts[e]=t,r.context.executeAction(T.localUpdateSubmission,{submission:i})}},r.blockSubmitPartGenerator=function(e){return function(t){var n=r.state.blockSubmitParts,i=Object.assign({},n);i[e]=t,r.setState({blockSubmitParts:i})}},r.updateSubmissionTitle=function(e){var t=r.props.latestSubmissionAndRelated,n=b.default.extend(!0,{},t.submission);n.definition.title=e,r.context.executeAction(T.localUpdateSubmission,{submission:n})},r.renderPreviewGradingCriteria=function(e){var t=r.props.latestSubmissionAndRelated;return f.createElement(z.default,{reviewSchema:t.reviewSchema,partId:e})},r.state={hasSaved:!1,blockSubmitParts:{}},r}return(0,l.default)(PeerItemEditView,e),PeerItemEditView.prototype.render=function render(){var e=this.props,t=e.naptimeSubmission,n=e.naptimeSubmissionSchema,r=e.errorTree,i=e.computedItem,o=e.submissionAppState,a=e.isVerifiable,s=e.lastSaveTime,l=e.showStaleAssignmentVersionError,u=e.courseId,c=e.courseBranchId,d=i.id,p=this.state.hasSaved,h=w.default.contains(w.default.values(this.state.blockSubmitParts),!0);return f.createElement("div",{className:"rc-PeerItemEditView"},f.createElement(Q.default,{itemId:d,courseBranchId:c,courseId:u,hasSaved:p}),f.createElement(W.default,{submissionAppState:o,errorTree:r,isSubmitted:!1},f.createElement(B.default,{showStaleAssignmentVersionError:l,computedItem:i}),f.createElement(F.default,{courseId:u,submission:t,submissionSchema:n,errorTree:r,isSubmitted:!1,submissionAppState:o,updateSubmissionTitle:this.updateSubmissionTitle,updateSubmissionPartGenerator:this.updateSubmissionPartGenerator,blockSubmitPartGenerator:this.blockSubmitPartGenerator,renderInlineNode:this.renderPreviewGradingCriteria}),f.createElement(U.default,{submissionAppState:o,lastSaveTime:s,handleSave:this.handleSave,handleSubmit:this.handleSubmit,blockSubmit:h,isVerifiable:a,computedItem:i})))},PeerItemEditView}(f.Component),u.contextTypes={executeAction:f.PropTypes.func.isRequired},c);module.exports=w.default.compose((0,S.default)(function(e){return{showStaleAssignmentVersionError:!!e.location.query.showStaleAssignmentVersionError}}),(0,g.default)([R.store,N.store,k.default,P.default,O.default],function(e,t,n,r,i,o){var a=o.computedItem;return{latestSubmissionAndRelated:e.getState().latestSubmissionAndRelated,naptimeSubmission:e.getState().naptimeSubmission,naptimeSubmissionSchema:e.getState().naptimeSubmissionSchema,submissionAppState:t.getState(),isVerifiable:n.isProductVerificationEnabled()&&a&&(0,J.getIsGradable)(a),courseId:r.getCourseId(),courseBranchId:i.getBranchId()||r.getCourseId()}}),(0,C.default)(function(e){var t;return e.latestSubmissionAndRelated},f.createElement(M.default,{className:"rc-PeerItemEditView"})),(0,h.default)(function(e){return(0,n.default)({},e,{errorTree:e.latestSubmissionAndRelated.errorTree,lastSaveTime:e.latestSubmissionAndRelated.submission&&e.latestSubmissionAndRelated.submission.createdAt})}))(Z)},tslM:function(module,exports,e){var t=e("fRls"),n=t.default?t.default:{},r,i=e("HdzH")(n);i.getLocale=function(){return"en"},module.exports=i},tvdM:function(module,exports,e){"use strict";var t,n=_interopRequireWildcard(e("sbe7")),r,i=_interopRequireDefault(e("v1GV")),o,a=_interopRequireDefault(e("yhVA"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var s=function EditView(e){var t=e.submissionAppState,r=e.errorTree,o=e.isSubmitted,a=e.children;return n.createElement("div",{className:"rc-AssignmentEditView rc-AssignmentSubmit"},n.createElement(i.default,{isSubmitted:o,submissionAppState:t,errorTree:r}),n.createElement("div",null,a))};s.propTypes={submissionAppState:n.PropTypes.object,errorTree:n.PropTypes.object,isSubmitted:n.PropTypes.bool,children:n.PropTypes.node},module.exports=s},"ufF/":function(module,exports,e){var t,n,r,i;r=window,i=function(e,t,n){var r=function template(n){var r=[],i,o=n||{};return function(t,n){r.push('<div data-wysihtml5-modal-latex="data-wysihtml5-modal-latex"'+e.attr("data-modal-overlay-class",t+"-overlay",!0,!1)+' class="modal hide"><form style="margin:0px;padding:0px;"><div style="overflow:auto;"><div style="float:left;width:20%;"><label style="padding:10px;font-weight:bold;text-align:right;">'+e.escape(null==(i=n("LaTeX:"))?"":i)+'</label></div><div style="float:right;width:80%;"><textarea name="latex" placeholder="enter a latex equation"'+e.cls([t+"-modal-latex-textarea"],[!0])+'></textarea></div></div><div class="coursera-wysihtml5-latex-preview-area"><div style="float:left;width:20%;"><label style="padding:10px;font-weight:bold;text-align:right;">'+e.escape(null==(i=n("Preview:"))?"":i)+'</label></div><div style="float:right;width:80%;"><div class="coursera-wysihtml5-latex-preview"></div></div></div><div class="modal-footer"><button type="submit" data-modal-close="data-modal-close" style="margin-right:10px;"'+e.cls(["btn",t+"-modal-link-submit"],[null,!0])+">"+e.escape(null==(i=n("Create"))?"":i)+'</button><a data-modal-close="data-modal-close" href="javascript:;">'+e.escape(null==(i=n("Cancel"))?"":i)+"</a></div></form></div>")}.call(this,"prefix"in o?o.prefix:"undefined"!=typeof prefix?prefix:void 0,"_t"in o?o._t:void 0!==t?t:void 0),r.join("")};return function(e){return e&&"_t"in e&&(t=e._t.merge(t)),r(e)}},t=[e("xgPa"),e("Mxyi")],void 0===(n=function(e,t){var n;return i(e,t,n)}.apply(exports,t))||(module.exports=n)},uykG:function(module,exports,e){},v1GV:function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("iCc5")),r,i=_interopRequireDefault(e("FYw3")),o,a=_interopRequireDefault(e("mRg0")),s,l,u,c=_interopRequireWildcard(e("sbe7")),d,f=_interopRequireDefault(e("VYij")),p,h=_interopRequireDefault(e("w/1P")),m,g=_interopRequireDefault(e("yhVA"));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var v=(l=s=function(e){function AssignmentSubmitAlertsView(){return(0,n.default)(this,AssignmentSubmitAlertsView),(0,i.default)(this,e.apply(this,arguments))}return(0,a.default)(AssignmentSubmitAlertsView,e),AssignmentSubmitAlertsView.prototype.render=function render(){var e=this.props,t=e.isSubmitted,n=e.submissionAppState,r=n.submitState,i=n.saveState,o=n.showValidation,a=n.errorMessage,s=e.errorTree;if(!s||!o)return null;if(t)return c.createElement("div",{className:"rc-AssignmentSubmitAlertsView"},(0,g.default)("Your work is submitted."));var l=(0,f.default)(AssignmentSubmitAlertsView.getAllErrors(s)).some(f.default.property("blocksSubmit")),u=!!a,d=!a&&"ready"===r&&"ready"===i&&l,p=!a&&"saveError"===i&&!a,m=!a&&"submitError"===r&&"ready"===i&&l,v=!a&&"submitError"===r&&"ready"===i&&!l,b=(0,h.default)("rc-AssignmentSubmitAlertsView","bt3-alert",{"bt3-alert-warning":d,"bt3-alert-danger":u||p||m||v});if(!(u||d||p||m||v))return null;return c.createElement("div",{className:b},u&&c.createElement("span",null,a),m&&c.createElement("span",null,(0,g.default)("Error submitting assignment: please fix the errors below before submitting.")),d&&c.createElement("span",null,(0,g.default)("Your assignment was saved, but please fix the errors below before submitting.")),v&&c.createElement("span",null,(0,g.default)("Your assignment was saved, but an unknown error occurred while submitting.\n              Please refresh the page and try again.")),p&&c.createElement("span",null,(0,g.default)("Save error. Please try again.")))},AssignmentSubmitAlertsView}(c.Component),s.propTypes={errorTree:c.PropTypes.object,isSubmitted:c.PropTypes.bool.isRequired,submissionAppState:c.PropTypes.shape({saveState:c.PropTypes.oneOf(["ready","saving","saveError"]),submitState:c.PropTypes.oneOf(["ready","submitting","submitError"]),showValidation:c.PropTypes.bool})},s.getAllErrors=function(e){if(!e)return[];var t=(0,f.default)(e.children).chain().map(function(e){return v.getAllErrors(e)}).flatten().value();return e.errors.concat(t)},l);module.exports=v},vPwT:function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("iCc5")),r,i=_interopRequireDefault(e("FYw3")),o,a=_interopRequireDefault(e("mRg0")),s,l=_interopRequireWildcard(e("sbe7")),u,c=_interopRequireDefault(e("8cuT")),d,f=_interopRequireDefault(e("VYij")),p,h=_interopRequireDefault(e("yhVA")),m,g=_interopRequireDefault(e("NVuj")),v,b=_interopRequireDefault(e("Fp6O")),y,w=_interopRequireDefault(e("D1gF")),x,S=_interopRequireDefault(e("Nw0Z")),E,C=_interopRequireDefault(e("0/FW")),T,R=_interopRequireDefault(e("JkvR")),N,A=_interopRequireDefault(e("5xxS")),k,I=_interopRequireDefault(e("gZcO")),P,D=_interopRequireDefault(e("XNO9")),O,L=_interopRequireDefault(e("jsrg"));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e("PmkO");var M=function(e){function PeerSubmissionWithReviewBody(){return(0,n.default)(this,PeerSubmissionWithReviewBody),(0,i.default)(this,e.apply(this,arguments))}return(0,a.default)(PeerSubmissionWithReviewBody,e),PeerSubmissionWithReviewBody.prototype.shouldShowReviews=function shouldShowReviews(e){var t=this.props,n=t.reviewProgress,r=t.reviewSchema,i=t.reviews,o;if(0===(null!=r?(0,f.default)(r.definition.parts).filter(function(t){return t.submissionSchemaPartId===e}):[]).length)return!1;return!!i&&i.length>0&&(!n||n&&n.isComplete)},PeerSubmissionWithReviewBody.prototype.render=function render(){var e=this,t=this.props,n=t.courseId,r=t.computedItem,i=t.submission,o=t.submissionId,a=t.submissionSchema,s=t.reviewSchema,u=t.reviewsSummary,c=t.reviews,d=(0,S.default)(s);return l.createElement("div",{className:"rc-PeerSubmissionWithReviewsBody"},a.parts.map(function(t){return l.createElement(I.default,{key:t.id},l.createElement(g.default,{submissionSchemaPart:t,submissionPart:i.parts[t.id]}),e.shouldShowReviews(t.id)&&l.createElement(D.default,null,l.createElement(b.default,{reviewSchema:d,reviewsSummary:u,reviews:c,submissionSchemaPartId:t.id,submissionId:o})))}),this.shouldShowReviews()&&l.createElement(I.default,null,l.createElement(D.default,null,l.createElement(b.default,{reviewSchema:d,reviewsSummary:u,reviews:c,submissionSchemaPartId:null,submissionId:o}))),null!=o&&l.createElement(A.default,{computedItem:r,submissionId:o,className:"align-right",buttonMessage:(0,h.default)("Edit submission")}),null!=o&&l.createElement(C.default,{computedItem:r,courseId:n,submissionId:o}))},PeerSubmissionWithReviewBody}(l.Component);module.exports=f.default.compose((0,c.default)(["PeerViewSubmissionStore","PeerPermissionsAndProgressesStore"],function(e){var t=e.PeerViewSubmissionStore,n=e.PeerPermissionsAndProgressesStore,r=t.getState().submissionAndRelated,i,o=t.getState().reviewSubmissionState,a="loaded"===t.getState().loadState,s=void 0;a&&null!=o&&(s=o.backboneReviews);var l=n.getState().receivedReviewProgresses,u=l&&l.evaluationIfReady?{typeName:"structured",definition:l.evaluationIfReady.aggregatedReviewsSummary}:null,c=l?{isComplete:!!l.evaluationIfReady,earliestCompletionTime:l.earliestCompletionTime,reviewCount:l.reviewCount,minCompletionReviewCount:l.defaultReceivedReviewRequiredCount}:null;return{submission:t.getState().naptimeSubmission,submissionId:t.getState().submissionId,reviews:s,reviewSchema:r&&r.reviewSchema,submissionSchema:t.getState().naptimeSubmissionSchema,reviewsSummary:u,reviewProgress:c,isPeerViewSubmissionStoreLoaded:a}}),(0,L.default)(function(e){return e.isPeerViewSubmissionStoreLoaded},l.createElement(R.default,{className:"rc-PeerSubmissionWithReviewsBody"})))(M)},"w4G/":function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("iCc5")),r,i=_interopRequireDefault(e("FYw3")),o,a=_interopRequireDefault(e("mRg0")),s,l=_interopRequireWildcard(e("sbe7")),u,c=_interopRequireDefault(e("oYk5")),d,f=_interopRequireDefault(e("w/1P")),p=e("kvW3"),h=e("2rfX"),m=e("a4NT"),g,v=_interopRequireDefault(e("cuJR")),b,y=_interopRequireDefault(e("yhVA"));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e("qDrG");var w=function UploadButton(e){var t=e.submissionPart,n=e.update,r=e.disabled,i=e.blockSubmit;if("fileUpload"!==t.typeName)return null;var o=t.definition.fileUrl;return o?l.createElement("div",null,l.createElement("a",{className:"cif-file-o",rel:"noopener noreferrer",target:"_blank",href:o},o.split("/").pop()),!r&&l.createElement("span",{className:"c-peer-review-submit-upload-remove",onClick:function onClick(){var e=c.default.extend(!0,{},t);e.definition.fileUrl="",n(e)}},"×")):l.createElement(v.default,{templateId:m.peerReviewTransloaditTemplateId,onUploadSelect:function onUploadSelect(){i(!0)},onUploadSuccess:function onUploadSuccess(e){var r=c.default.extend(!0,{},t);r.definition.fileUrl=e.results[":original"][0].url,i(!1),n(r)},buttonContent:(0,y.default)("Upload File"),buttonClasses:["link-button","primary","c-upload-button"],disabled:r})},x=function(e){function FileUploadEditView(){var t,r,o;(0,n.default)(this,FileUploadEditView);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return t=r=(0,i.default)(this,e.call.apply(e,[this].concat(s))),r.onChangeTitle=function(e){var t=r.props,n=t.submissionPart,i=t.update,o=c.default.extend(!0,{},n);o.definition.title=e.target.value,i(o)},r.onChangeCaption=function(e){var t=r.props,n=t.submissionPart,i=t.update,o=c.default.extend(!0,{},n);o.definition.caption=e.target.value,i(o)},o=t,(0,i.default)(r,o)}return(0,a.default)(FileUploadEditView,e),FileUploadEditView.prototype.renderIncompatibleFileTypeWarning=function renderIncompatibleFileTypeWarning(){var e=this.props,t=e.submissionPart,n=e.isPartReceivingInlineFeedback,r=t.definition.fileUrl,i=!!t.definition.plagiarismMetadata;if(!r||!i&&!n)return null;var o=r.split(".").pop().toLowerCase();return h.allowedFileTypesForInlineFeedback.includes(o)?null:l.createElement("div",{className:"bt3-alert bt3-alert-warning"},l.createElement(p.FormattedMessage,{message:(0,y.default)("Please submit one of the following file formats ({allowedFileTypeList}) to receive in-line feedback and/or pass plagiarism checks."),allowedFileTypeList:h.allowedFileTypesForInlineFeedback.map(function(e){return"."+e}).join(", ")}))},FileUploadEditView.prototype.render=function render(){var e=this.props,t=e.submissionPart,n=e.update,r=e.disabled,i=e.blockSubmit,o=t.definition.fileUrl;return l.createElement("div",{className:"rc-FileUploadEditView"},this.renderIncompatibleFileTypeWarning(),l.createElement("div",{className:(0,f.default)("c-peer-review-submit-upload-field","c-peer-review-submit-text-field","c-peer-review-submit-text-field-group-top")},l.createElement(w,{submissionPart:t,update:n,disabled:r,blockSubmit:i})),o&&l.createElement("div",null,l.createElement("div",{className:"c-peer-review-submit-text-field-container"},l.createElement("input",{className:(0,f.default)("c-peer-review-submit-text-field","c-peer-review-submit-text-field-group-middle","bt3-form-control"),type:"text",placeholder:(0,y.default)("Title"),defaultValue:t.definition.title,onChange:this.onChangeTitle,disabled:this.props.disabled,"aria-label":(0,y.default)("Enter an optional title for the uploaded file")}),!t.definition.title&&l.createElement("div",{className:"c-peer-review-submit-text-field-annotation"},(0,y.default)("optional"))),l.createElement("div",{className:"c-peer-review-submit-text-field-container"},l.createElement("textarea",{className:(0,f.default)("c-peer-review-submit-textarea-field","c-peer-review-submit-text-field-group-bottom","bt3-form-control"),placeholder:(0,y.default)("Caption"),defaultValue:t.definition.caption,onChange:this.onChangeCaption,disabled:this.props.disabled,"aria-label":(0,y.default)("Enter an optional multi-line caption for the uploaded file")}),!t.definition.caption&&l.createElement("div",{className:"c-peer-review-submit-text-field-annotation"},(0,y.default)("optional")))))},FileUploadEditView}(l.Component);module.exports=x},wTGU:function(module,exports,e){"use strict";var t,n;!function(){function js_beautify(e,t){var n;return new Beautifier(e,t).beautify()}function Beautifier(e,t){var n,r,i,o,a,s,l,u,c,d,f,p,h,m,g,v,b,y,w,x,S,E,C,T,R,N,A="";function create_flags(e,t){var n=0,i;return e&&(n=e.indentation_level,n+=e.var_line&&e.var_line_reindented?1:0,!just_added_newline()&&e.line_indent_level>n&&(n=e.line_indent_level)),{mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",var_line:!1,var_line_tainted:!1,var_line_reindented:!1,in_html_comment:!1,multiline_frame:!1,if_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,line_indent_level:e?e.line_indent_level:n,start_line_index:r.length,ternary_depth:0}}function create_output_line(){return{text:[]}}for(f="\n\r\t ".split(""),p="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),v="0123456789".split(""),h="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::",h=(h+=" <%= <% %> <?= <? ?>").split(" "),g="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(","),R={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},T={TK_START_EXPR:handle_start_expr,TK_END_EXPR:handle_end_expr,TK_START_BLOCK:handle_start_block,TK_END_BLOCK:handle_end_block,TK_WORD:handle_word,TK_SEMICOLON:handle_semicolon,TK_STRING:handle_string,TK_EQUALS:handle_equals,TK_OPERATOR:handle_operator,TK_COMMA:handle_comma,TK_BLOCK_COMMENT:handle_block_comment,TK_INLINE_COMMENT:handle_inline_comment,TK_COMMENT:handle_comment,TK_DOT:handle_dot,TK_UNKNOWN:handle_unknown},N={},void 0!==(t=t||{}).space_after_anon_function&&void 0===t.jslint_happy&&(t.jslint_happy=t.space_after_anon_function),void 0!==t.braces_on_own_line&&(N.brace_style=t.braces_on_own_line?"expand":"collapse"),N.brace_style=t.brace_style?t.brace_style:N.brace_style?N.brace_style:"collapse","expand-strict"===N.brace_style&&(N.brace_style="expand"),N.indent_size=t.indent_size?parseInt(t.indent_size,10):4,N.indent_char=t.indent_char?t.indent_char:" ",N.preserve_newlines=void 0===t.preserve_newlines||t.preserve_newlines,N.break_chained_methods=void 0!==t.break_chained_methods&&t.break_chained_methods,N.max_preserve_newlines=void 0===t.max_preserve_newlines?0:parseInt(t.max_preserve_newlines,10),N.space_in_paren=void 0!==t.space_in_paren&&t.space_in_paren,N.jslint_happy=void 0!==t.jslint_happy&&t.jslint_happy,N.keep_array_indentation=void 0!==t.keep_array_indentation&&t.keep_array_indentation,N.space_before_conditional=void 0===t.space_before_conditional||t.space_before_conditional,N.unescape_strings=void 0!==t.unescape_strings&&t.unescape_strings,N.wrap_line_length=void 0===t.wrap_line_length?0:parseInt(t.wrap_line_length,10),N.e4x=void 0!==t.e4x&&t.e4x,l="";N.indent_size>0;)l+=N.indent_char,N.indent_size-=1;for(;e&&(" "===e.charAt(0)||"\t"===e.charAt(0));)A+=e.charAt(0),e=e.substring(1);function trim_output(e){if(e=void 0!==e&&e,r.length)for(trim_output_line(r[r.length-1],e);e&&r.length>1&&0===r[r.length-1].text.length;)r.pop(),trim_output_line(r[r.length-1],e)}function trim_output_line(e){for(;e.text.length&&(" "===e.text[e.text.length-1]||e.text[e.text.length-1]===l||e.text[e.text.length-1]===A);)e.text.pop()}function trim(e){return e.replace(/^\s+|\s+$/g,"")}function split_newlines(e){for(var t=[],n=(e=e.replace(/\x0d/g,"")).indexOf("\n");-1!==n;)t.push(e.substring(0,n)),n=(e=e.substring(n+1)).indexOf("\n");return e.length&&t.push(e),t}function just_added_newline(){var e;return 0===r[r.length-1].text.length}function just_added_blankline(){if(just_added_newline()){if(1===r.length)return!0;var e;return 0===r[r.length-2].text.length}return!1}function allow_wrap_or_preserved_newline(e){if(e=void 0!==e&&e,N.wrap_line_length&&!e){var t=r[r.length-1],n=0;t.text.length>0&&(n=t.text.join("").length+i.length+(x?1:0))>=N.wrap_line_length&&(e=!0)}(N.preserve_newlines&&y||e)&&!just_added_newline()&&(print_newline(!1,!0),is_array(u.mode)||is_expression(u.mode)||(w=!0))}function print_newline(e,t){if(w=!1,x=!1,!t&&";"!==u.last_text)for(;u.mode===R.Statement&&!u.if_block&&!u.do_block;)restore_mode();if(1===r.length&&just_added_newline())return;!e&&just_added_newline()||(u.multiline_frame=!0,r.push({text:[]}))}function print_token_line_indentation(){if(just_added_newline()){var e=r[r.length-1];if(N.keep_array_indentation&&is_array(u.mode)&&y){e.text.push("");for(var t=0;t<C.length;t+=1)e.text.push(C[t])}else A&&e.text.push(A),print_indent_string(u.indentation_level+(u.var_line&&u.var_line_reindented?1:0)+(w?1:0))}}function print_indent_string(e){if(r.length>1){var t=r[r.length-1];u.line_indent_level=e;for(var n=0;n<e;n+=1)t.text.push(l)}}function print_token_space_before(){var e=r[r.length-1];if(x&&e.text.length){var t=e.text[e.text.length-1];" "!==t&&t!==l&&e.text.push(" ")}}function print_token(e){e=e||i,print_token_line_indentation(),w=!1,print_token_space_before(),x=!1,r[r.length-1].text.push(e)}function indent(){u.indentation_level+=1}function deindent(){u.indentation_level>0&&(!u.parent||u.indentation_level>u.parent.indentation_level)&&(u.indentation_level-=1)}function remove_redundant_indentation(e){if(e.multiline_frame)return;for(var t=e.start_line_index,n=0,i;t<r.length;){if(i=r[t],t++,0===i.text.length)continue;n=A&&i.text[0]===A?1:0,i.text[n]===l&&i.text.splice(n,1)}}function set_mode(e){u?(d.push(u),c=u):c=create_flags(null,e),u=create_flags(c,e)}function is_array(e){return e===R.ArrayLiteral}function is_expression(e){return in_array(e,[R.Expression,R.ForInitializer,R.Conditional])}function restore_mode(){d.length>0&&(c=u,u=d.pop())}function start_of_statement(){if("do"===u.last_text||"else"===u.last_text&&"if"!==i||"TK_END_EXPR"===a&&(c.mode===R.ForInitializer||c.mode===R.Conditional))return allow_wrap_or_preserved_newline(in_array(i,["do","for","if","while"])),set_mode(R.Statement),just_added_newline()&&(indent(),w=!1),!0;return!1}function all_lines_start_with(e,t){for(var n=0;n<e.length;n++){var r;if(trim(e[n]).charAt(0)!==t)return!1}return!0}function is_special_word(e){return in_array(e,["case","return","do","if","throw","else"])}function in_array(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function unescape_string(e){for(var t=!1,n="",r=0,i="",o=0,a;t||r<e.length;)if(a=e.charAt(r),r++,t){if(t=!1,"x"===a)i=e.substr(r,2),r+=2;else{if("u"!==a){n+="\\"+a;continue}i=e.substr(r,4),r+=4}if(!i.match(/^[0123456789abcdefABCDEF]+$/))return e;if((o=parseInt(i,16))>=0&&o<32){n+="x"===a?"\\x"+i:"\\u"+i;continue}if(34===o||39===o||92===o)n+="\\"+String.fromCharCode(o);else{if("x"===a&&o>126&&o<=255)return e;n+=String.fromCharCode(o)}}else"\\"===a?t=!0:n+=a;return n}function is_next(e){for(var t=m,r=n.charAt(t);in_array(r,f)&&r!==e;){if(++t>=S)return!1;r=n.charAt(t)}return r===e}function get_next_token(){var e,t;if(E=0,m>=S)return["","TK_EOF"];y=!1,C=[];var i=n.charAt(m);for(m+=1;in_array(i,f);){if("\n"===i?(E+=1,C=[]):E&&(i===l?C.push(l):"\r"!==i&&C.push(" ")),m>=S)return["","TK_EOF"];i=n.charAt(m),m+=1}if(in_array(i,p)){if(m<S)for(;in_array(n.charAt(m),p)&&(i+=n.charAt(m),(m+=1)!==S););if(m!==S&&i.match(/^[0-9]+[Ee]$/)&&("-"===n.charAt(m)||"+"===n.charAt(m))){var o=n.charAt(m),s;return m+=1,[i+=o+get_next_token()[0],"TK_WORD"]}if("in"===i)return[i,"TK_OPERATOR"];return[i,"TK_WORD"]}if("("===i||"["===i)return[i,"TK_START_EXPR"];if(")"===i||"]"===i)return[i,"TK_END_EXPR"];if("{"===i)return[i,"TK_START_BLOCK"];if("}"===i)return[i,"TK_END_BLOCK"];if(";"===i)return[i,"TK_SEMICOLON"];if("/"===i){var d="",g=!0;if("*"===n.charAt(m)){if((m+=1)<S)for(;m<S&&("*"!==n.charAt(m)||!n.charAt(m+1)||"/"!==n.charAt(m+1))&&(d+=i=n.charAt(m),"\n"!==i&&"\r"!==i||(g=!1),!((m+=1)>=S)););return m+=2,g&&0===E?["/*"+d+"*/","TK_INLINE_COMMENT"]:["/*"+d+"*/","TK_BLOCK_COMMENT"]}if("/"===n.charAt(m)){for(d=i;"\r"!==n.charAt(m)&&"\n"!==n.charAt(m)&&(d+=n.charAt(m),!((m+=1)>=S)););return[d,"TK_COMMENT"]}}if("'"===i||'"'===i||("/"===i||N.e4x&&"<"===i&&n.slice(m-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*\/?\s*>/))&&("TK_WORD"===a&&is_special_word(u.last_text)||"TK_END_EXPR"===a&&in_array(c.mode,[R.Conditional,R.ForInitializer])||in_array(a,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var b=i,w=!1,x=!1;if(t=i,m<S)if("/"===b){for(var T=!1;w||T||n.charAt(m)!==b;)if(t+=n.charAt(m),w?w=!1:(w="\\"===n.charAt(m),"["===n.charAt(m)?T=!0:"]"===n.charAt(m)&&(T=!1)),(m+=1)>=S)return[t,"TK_STRING"]}else if(N.e4x&&"<"===b){var A=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*(\/?)\s*>/g,k=n.slice(m-1),I=A.exec(k);if(I&&0===I.index){for(var P=I[2],D=0;I;){var O=!!I[1],L=I[2],M=!!I[I.length-1]||"![CDATA["===L.slice(0,8);if(L!==P||M||(O?--D:++D),D<=0)break;I=A.exec(k)}var q=I?I.index+I[0].length:k.length;return m+=q-1,[k.slice(0,q),"TK_STRING"]}}else for(;w||n.charAt(m)!==b;)if(t+=n.charAt(m),w?("x"!==n.charAt(m)&&"u"!==n.charAt(m)||(x=!0),w=!1):w="\\"===n.charAt(m),(m+=1)>=S)return[t,"TK_STRING"];if(m+=1,t+=b,x&&N.unescape_strings&&(t=unescape_string(t)),"/"===b)for(;m<S&&in_array(n.charAt(m),p);)t+=n.charAt(m),m+=1;return[t,"TK_STRING"]}if("#"===i){if(1===r.length&&0===r[0].text.length&&"!"===n.charAt(m)){for(t=i;m<S&&"\n"!==i;)t+=i=n.charAt(m),m+=1;return[trim(t)+"\n","TK_UNKNOWN"]}var B="#";if(m<S&&in_array(n.charAt(m),v)){do{B+=i=n.charAt(m),m+=1}while(m<S&&"#"!==i&&"="!==i);return"#"===i||("["===n.charAt(m)&&"]"===n.charAt(m+1)?(B+="[]",m+=2):"{"===n.charAt(m)&&"}"===n.charAt(m+1)&&(B+="{}",m+=2)),[B,"TK_WORD"]}}if("<"===i&&"\x3c!--"===n.substring(m-1,m+3)){for(m+=3,i="\x3c!--";"\n"!==n.charAt(m)&&m<S;)i+=n.charAt(m),m++;return u.in_html_comment=!0,[i,"TK_COMMENT"]}if("-"===i&&u.in_html_comment&&"--\x3e"===n.substring(m-1,m+2))return u.in_html_comment=!1,m+=2,["--\x3e","TK_COMMENT"];if("."===i)return[i,"TK_DOT"];if(in_array(i,h)){for(;m<S&&in_array(i+n.charAt(m),h)&&(i+=n.charAt(m),!((m+=1)>=S)););return","===i?[i,"TK_COMMA"]:"="===i?[i,"TK_EQUALS"]:[i,"TK_OPERATOR"]}return[i,"TK_UNKNOWN"]}function handle_start_expr(){start_of_statement();var e=R.Expression;if("["===i){if("TK_WORD"===a||")"===u.last_text)return in_array(u.last_text,g)&&(x=!0),set_mode(e),print_token(),indent(),void(N.space_in_paren&&(x=!0));e=R.ArrayLiteral,is_array(u.mode)&&("["!==u.last_text&&(","!==u.last_text||"]"!==s&&"}"!==s)||N.keep_array_indentation||print_newline())}else"for"===u.last_text?e=R.ForInitializer:in_array(u.last_text,["if","while"])&&(e=R.Conditional);";"===u.last_text||"TK_START_BLOCK"===a?print_newline():"TK_END_EXPR"===a||"TK_START_EXPR"===a||"TK_END_BLOCK"===a||"."===u.last_text?(allow_wrap_or_preserved_newline(y),w=!1):"TK_WORD"!==a&&"TK_OPERATOR"!==a?x=!0:"function"===u.last_word||"typeof"===u.last_word?N.jslint_happy&&(x=!0):(in_array(u.last_text,g)||"catch"===u.last_text)&&N.space_before_conditional&&(x=!0),"("===i&&("TK_EQUALS"!==a&&"TK_OPERATOR"!==a||u.mode!==R.ObjectLiteral&&allow_wrap_or_preserved_newline()),set_mode(e),print_token(),N.space_in_paren&&(x=!0),indent()}function handle_end_expr(){for(;u.mode===R.Statement;)restore_mode();"]"===i&&is_array(u.mode)&&u.multiline_frame&&!N.keep_array_indentation&&print_newline(),u.multiline_frame&&allow_wrap_or_preserved_newline(),N.space_in_paren&&(x=!0),"]"===i&&N.keep_array_indentation?(print_token(),restore_mode()):(restore_mode(),print_token()),remove_redundant_indentation(c),u.do_while&&c.mode===R.Conditional&&(c.mode=R.Expression,u.do_block=!1,u.do_while=!1)}function handle_start_block(){set_mode(R.BlockStatement);var e,t=is_next("}")&&"function"===u.last_word&&"TK_END_EXPR"===a;"expand"===N.brace_style?"TK_OPERATOR"!==a&&(t||"TK_EQUALS"===a||is_special_word(u.last_text)&&"else"!==u.last_text)?x=!0:print_newline():"TK_OPERATOR"!==a&&"TK_START_EXPR"!==a?"TK_START_BLOCK"===a?print_newline():x=!0:is_array(c.mode)&&","===u.last_text&&("}"===s?x=!0:print_newline()),print_token(),indent()}function handle_end_block(){for(;u.mode===R.Statement;)restore_mode();var e="TK_START_BLOCK"===a;"expand"===N.brace_style?e||print_newline():e||(is_array(u.mode)&&N.keep_array_indentation?(N.keep_array_indentation=!1,print_newline(),N.keep_array_indentation=!0):print_newline()),restore_mode(),print_token()}function handle_word(){if(start_of_statement()||!y||is_expression(u.mode)||"TK_OPERATOR"===a&&"--"!==u.last_text&&"++"!==u.last_text||"TK_EQUALS"===a||!N.preserve_newlines&&"var"===u.last_text||print_newline(),u.do_block&&!u.do_while){if("while"===i)return x=!0,print_token(),x=!0,void(u.do_while=!0);print_newline(),u.do_block=!1}if(u.if_block&&"else"!==i){for(;u.mode===R.Statement;)restore_mode();u.if_block=!1}if("case"===i||"default"===i&&u.in_case_statement)return print_newline(),(u.case_body||N.jslint_happy)&&(deindent(),u.case_body=!1),print_token(),u.in_case=!0,void(u.in_case_statement=!0);if("function"===i&&(u.var_line&&"TK_EQUALS"!==a&&(u.var_line_reindented=!0),!just_added_newline()&&";"!==u.last_text&&"}"!==u.last_text||"{"===u.last_text||is_array(u.mode)||just_added_blankline()||(print_newline(),print_newline(!0)),"TK_WORD"===a?"get"===u.last_text||"set"===u.last_text||"new"===u.last_text||"return"===u.last_text?x=!0:print_newline():"TK_OPERATOR"===a||"="===u.last_text?x=!0:is_expression(u.mode)||print_newline()),"TK_COMMA"!==a&&"TK_START_EXPR"!==a&&"TK_EQUALS"!==a&&"TK_OPERATOR"!==a||u.mode!==R.ObjectLiteral&&allow_wrap_or_preserved_newline(),"function"===i)return print_token(),void(u.last_word=i);if(b="NONE","TK_END_BLOCK"===a?in_array(i,["else","catch","finally"])?"expand"===N.brace_style||"end-expand"===N.brace_style?b="NEWLINE":(b="SPACE",x=!0):b="NEWLINE":"TK_SEMICOLON"===a&&u.mode===R.BlockStatement?b="NEWLINE":"TK_SEMICOLON"===a&&is_expression(u.mode)?b="SPACE":"TK_STRING"===a?b="NEWLINE":"TK_WORD"===a?b="SPACE":"TK_START_BLOCK"===a?b="NEWLINE":"TK_END_EXPR"===a&&(x=!0,b="NEWLINE"),in_array(i,g)&&")"!==u.last_text&&(b="else"===u.last_text?"SPACE":"NEWLINE"),in_array(i,["else","catch","finally"]))if("TK_END_BLOCK"!==a||"expand"===N.brace_style||"end-expand"===N.brace_style)print_newline();else{trim_output(!0);var e=r[r.length-1];"}"!==e.text[e.text.length-1]&&print_newline(),x=!0}else"NEWLINE"===b?is_special_word(u.last_text)?x=!0:"TK_END_EXPR"!==a?"TK_START_EXPR"===a&&"var"===i||":"===u.last_text||("if"===i&&"else"===u.last_word&&"{"!==u.last_text?x=!0:(u.var_line=!1,u.var_line_reindented=!1,print_newline())):in_array(i,g)&&")"!==u.last_text&&(u.var_line=!1,u.var_line_reindented=!1,print_newline()):is_array(u.mode)&&","===u.last_text&&"}"===s?print_newline():"SPACE"===b&&(x=!0);print_token(),u.last_word=i,"var"===i&&(u.var_line=!0,u.var_line_reindented=!1,u.var_line_tainted=!1),"do"===i&&(u.do_block=!0),"if"===i&&(u.if_block=!0)}function handle_semicolon(){for(start_of_statement()&&(x=!1);u.mode===R.Statement&&!u.if_block&&!u.do_block;)restore_mode();print_token(),u.var_line=!1,u.var_line_reindented=!1,u.mode===R.ObjectLiteral&&(u.mode=R.BlockStatement)}function handle_string(){start_of_statement()?x=!0:"TK_WORD"===a?x=!0:"TK_COMMA"===a||"TK_START_EXPR"===a||"TK_EQUALS"===a||"TK_OPERATOR"===a?u.mode!==R.ObjectLiteral&&allow_wrap_or_preserved_newline():print_newline(),print_token()}function handle_equals(){u.var_line&&(u.var_line_tainted=!0),x=!0,print_token(),x=!0}function handle_comma(){if(u.var_line)return(is_expression(u.mode)||"TK_END_BLOCK"===a)&&(u.var_line_tainted=!1),u.var_line&&(u.var_line_reindented=!0),print_token(),void(u.var_line_tainted?(u.var_line_tainted=!1,print_newline()):x=!0);"TK_END_BLOCK"===a&&u.mode!==R.Expression?(print_token(),u.mode===R.ObjectLiteral&&"}"===u.last_text?print_newline():x=!0):u.mode===R.ObjectLiteral?(print_token(),print_newline()):(print_token(),x=!0)}function handle_operator(){var e=!0,t=!0;if(is_special_word(u.last_text))return x=!0,void print_token();if("*"===i&&"TK_DOT"===a&&!s.match(/^\d+$/))return void print_token();if(":"===i&&u.in_case)return u.case_body=!0,indent(),print_token(),print_newline(),void(u.in_case=!1);if("::"===i)return void print_token();!y||"--"!==i&&"++"!==i||print_newline(),in_array(i,["--","++","!"])||in_array(i,["-","+"])&&(in_array(a,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||in_array(u.last_text,g)||","===u.last_text)?(e=!1,t=!1,";"===u.last_text&&is_expression(u.mode)&&(e=!0),"TK_WORD"===a&&in_array(u.last_text,g)&&(e=!0),u.mode!==R.BlockStatement&&u.mode!==R.Statement||"{"!==u.last_text&&";"!==u.last_text||print_newline()):":"===i?0===u.ternary_depth?(u.mode===R.BlockStatement&&(u.mode=R.ObjectLiteral),e=!1):u.ternary_depth-=1:"?"===i&&(u.ternary_depth+=1),x=x||e,print_token(),x=t}function handle_block_comment(){var e=split_newlines(i),t,n=!1;for(print_newline(!1,!0),e.length>1&&all_lines_start_with(e.slice(1),"*")&&(n=!0),print_token(e[0]),t=1;t<e.length;t++)print_newline(!1,!0),n?print_token(" "+trim(e[t])):r[r.length-1].text.push(e[t]);print_newline(!1,!0)}function handle_inline_comment(){x=!0,print_token(),x=!0}function handle_comment(){y?print_newline(!1,!0):trim_output(!0),x=!0,print_token(),print_newline(!1,!0)}function handle_dot(){is_special_word(u.last_text)?x=!0:allow_wrap_or_preserved_newline(")"===u.last_text&&N.break_chained_methods),print_token()}function handle_unknown(){print_token(),"\n"===i[i.length-1]&&print_newline()}n=e,S=e.length,a="TK_START_BLOCK",s="",r=[{text:[]}],w=!1,x=!1,C=[],d=[],set_mode(R.BlockStatement),m=0,this.beautify=function(){for(var e,t,n,l;e=get_next_token(),i=e[0],"TK_EOF"!==(o=e[1]);){if(n=N.keep_array_indentation&&is_array(u.mode),y=E>0,n)for(t=0;t<E;t+=1)print_newline(t>0);else if(N.max_preserve_newlines&&E>N.max_preserve_newlines&&(E=N.max_preserve_newlines),N.preserve_newlines&&E>1)for(print_newline(),t=1;t<E;t+=1)print_newline(!0);T[o](),"TK_INLINE_COMMENT"!==o&&"TK_COMMENT"!==o&&"TK_UNKNOWN"!==o&&(s=u.last_text,a=o,u.last_text=i)}l=r[0].text.join("");for(var c=1;c<r.length;c++)l+="\n"+r[c].text.join("");return l=l.replace(/[\r\n ]+$/,"")}}void 0===(n=function(){return js_beautify}.apply(exports,t=[]))||(module.exports=n)}()},wr4V:function(module,exports,e){var t,n;t=[e("oYk5")],void 0===(n=function(e){e.easing.jswing=e.easing.swing,e.extend(e.easing,{def:"easeOutQuad",swing:function(t,n,r,i,o){return e.easing[e.easing.def](t,n,r,i,o)},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,r,i){if((t/=i/2)<1)return r/2*t*t+n;return-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){if((t/=i/2)<1)return r/2*t*t*t+n;return r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,r,i){if((t/=i/2)<1)return r/2*t*t*t*t+n;return-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,i){return r*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,i){if((t/=i/2)<1)return r/2*t*t*t*t*t+n;return r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,r,i){return 0==t?n:r*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(1-Math.pow(2,-10*t/i))+n},easeInOutExpo:function(e,t,n,r,i){if(0==t)return n;if(t==i)return n+r;if((t/=i/2)<1)return r/2*Math.pow(2,10*(t-1))+n;return r/2*(2-Math.pow(2,-10*--t))+n},easeInCirc:function(e,t,n,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,r,i){if((t/=i/2)<1)return-r/2*(Math.sqrt(1-t*t)-1)+n;return r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,i){var o=1.70158,a=0,s=r;if(0==t)return n;if(1==(t/=i))return n+r;if(a||(a=.3*i),s<Math.abs(r)){s=r;var o=a/4}else var o=a/(2*Math.PI)*Math.asin(r/s);return-s*Math.pow(2,10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/a)+n},easeOutElastic:function(e,t,n,r,i){var o=1.70158,a=0,s=r;if(0==t)return n;if(1==(t/=i))return n+r;if(a||(a=.3*i),s<Math.abs(r)){s=r;var o=a/4}else var o=a/(2*Math.PI)*Math.asin(r/s);return s*Math.pow(2,-10*t)*Math.sin((t*i-o)*(2*Math.PI)/a)+r+n},easeInOutElastic:function(e,t,n,r,i){var o=1.70158,a=0,s=r;if(0==t)return n;if(2==(t/=i/2))return n+r;if(a||(a=i*(.3*1.5)),s<Math.abs(r)){s=r;var o=a/4}else var o=a/(2*Math.PI)*Math.asin(r/s);if(t<1)return s*Math.pow(2,10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/a)*-.5+n;return s*Math.pow(2,-10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/a)*.5+r+n},easeInBack:function(e,t,n,r,i,o){return void 0==o&&(o=1.70158),r*(t/=i)*t*((o+1)*t-o)+n},easeOutBack:function(e,t,n,r,i,o){return void 0==o&&(o=1.70158),r*((t=t/i-1)*t*((o+1)*t+o)+1)+n},easeInOutBack:function(e,t,n,r,i,o){if(void 0==o&&(o=1.70158),(t/=i/2)<1)return r/2*(t*t*((1+(o*=1.525))*t-o))+n;return r/2*((t-=2)*t*((1+(o*=1.525))*t+o)+2)+n},easeInBounce:function(t,n,r,i,o){return i-e.easing.easeOutBounce(t,o-n,0,i,o)+r},easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*(7.5625*t*t)+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(t,n,r,i,o){if(n<o/2)return.5*e.easing.easeInBounce(t,2*n,0,i,o)+r;return.5*e.easing.easeOutBounce(t,2*n-o,0,i,o)+.5*i+r}})}.apply(exports,t))||(module.exports=n)},xdOJ:function(module,exports,e){var t,n,r,i;r=window,i=function(e,t,n){var r=function template(n){var r=[],i,o=n||{};return function(t,n,o,a,s){t&&r.push('<button title="Editor Preview" type="button" aria-pressed="false"'+e.cls([n+"-toolbar-item "+n+"-toolbar-item-right "+n+"-toolbar-mode-preview"],[!0])+">"+e.escape(null==(i=o("Preview"))?"":i)+'</button><button style="display:none;" type="button"'+e.cls([n+"-toolbar-item "+n+"-toolbar-item-right "+n+"-toolbar-mode-preview-close"],[!0])+">"+e.escape(null==(i=o("Edit"))?"":i)+"</button>"),r.push("\x3c!-- we want to ensure that two editors are allowed if we are going to show a drop down...--\x3e\x3c!-- the below uses XOR to determine the that one is true, and then we confirm the other is true in the ternary--\x3e\x3c!-- this shortcut was used as the quickest way to determine at least two are true.--\x3e\x3c!-- this comment proves that saving effort in code means expanding in comments...--\x3e"),(a.html^a.markdown?a.rich:a.html)?r.push('<button unselectable="on" title="Editor Type"'+e.attr("data-popup","#"+n+"-toolbar-mode-popup-"+s.uid,!0,!1)+' aria-haspopup="true" aria-expanded="false"'+e.attr("aria-owns",n+"-toolbar-mode-popup",!0,!1)+' data-popup-close="data-popup-close" data-popup-direction="se" style="padding-right:30px;" type="button"'+e.cls([n+"-toolbar-item "+n+"-toolbar-item-right "+n+"-toolbar-mode-editor on"],[!0])+"><span>"+e.escape(null==(i=o("Edit:"))?"":i)+"</span><span"+e.cls([n+"-toolbar-mode-editor-label"],[!0])+">"+e.escape(null==(i=o("Rich"))?"":i)+'</span><span style="position:absolute;top:5px;padding-left:10px;padding-right:10px;" class="cif-chevron-down"></span></button>'):r.push('<button title="Editor Type"'+e.cls([n+"-toolbar-item "+n+"-toolbar-item-right "+n+"-toolbar-mode-editor on"],[!0])+"><span>"+e.escape(null==(i=o("Edit:"))?"":i)+"</span><span"+e.cls([n+"-toolbar-mode-editor-label"],[!0])+">"+e.escape(null==(i=o("Rich"))?"":i)+"</span></button>"),r.push("<div"+e.attr("id",n+"-toolbar-mode-popup-"+s.uid,!0,!1)+' style="display:none;"'+e.cls([n+"-toolbar-mode-popup"],[!0])+">"),a.html&&r.push('<a aria-pressed="false" data-wysihtml5-custom-command="change-editor" type="button" title="Change editing mode to HTML" data-popup-close="data-popup-close"'+e.cls([n+"-toolbar-mode-popup-item "+n+"-toolbar-mode-html"],[!0])+">"+(null==(i=o("&lt;HTML&gt;"))?"":i)+"</a>"),a.markdown&&r.push('<a aria-pressed="false" data-wysihtml5-custom-command="change-editor" type="button" title="Change editing mode to Markdown" data-popup-close="data-popup-close"'+e.cls([n+"-toolbar-mode-popup-item "+n+"-toolbar-mode-markdown"],[!0])+">"+e.escape(null==(i=o("`MD`"))?"":i)+"</a>"),a.rich&&r.push('<a aria-pressed="true" data-wysihtml5-custom-command="change-editor" type="button" title="Change editing mode to rich editor" data-popup-close="data-popup-close"'+e.cls([n+"-toolbar-mode-popup-item "+n+"-toolbar-mode-rich"],[!0])+">"+e.escape(null==(i=o("Rich"))?"":i)+"</a>"),r.push("</div>")}.call(this,"preview"in o?o.preview:"undefined"!=typeof preview?preview:void 0,"prefix"in o?o.prefix:"undefined"!=typeof prefix?prefix:void 0,"_t"in o?o._t:void 0!==t?t:void 0,"mode"in o?o.mode:"undefined"!=typeof mode?mode:void 0,"editor"in o?o.editor:"undefined"!=typeof editor?editor:void 0),r.join("")};return function(e){return e&&"_t"in e&&(t=e._t.merge(t)),r(e)}},t=[e("xgPa"),e("Di88")],void 0===(n=function(e,t){var n;return i(e,t,n)}.apply(exports,t))||(module.exports=n)},y6VL:function(module,exports,e){"use strict";var t,n=_interopRequireDefault(e("iCc5")),r,i=_interopRequireDefault(e("FYw3")),o,a=_interopRequireDefault(e("mRg0")),s,l,u,c=_interopRequireWildcard(e("sbe7")),d,f=_interopRequireDefault(e("KwvP"));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var p=(l=s=function(e){function AssignmentSubmitWrapper(){return(0,n.default)(this,AssignmentSubmitWrapper),(0,i.default)(this,e.apply(this,arguments))}return(0,a.default)(AssignmentSubmitWrapper,e),AssignmentSubmitWrapper.prototype.componentDidMount=function componentDidMount(){f.default.scroll(0)},AssignmentSubmitWrapper.prototype.render=function render(){return this.props.isSubmitted?this.props.submittedView:this.props.editView},AssignmentSubmitWrapper}(c.Component),s.propTypes={isSubmitted:c.PropTypes.bool.isRequired,submittedView:c.PropTypes.node.isRequired,editView:c.PropTypes.node.isRequired},l);module.exports=p},yKLC:function(module,exports,e){var t,n,r,i;r=window,i=function(e,t,n){var r=function template(n){var r=[],i,o=n||{};return function(t,n){r.push('<div data-wysihtml5-modal-link="data-wysihtml5-modal-link"'+e.attr("data-modal-overlay-class",t+"-overlay",!0,!1)+' role="dialog" aria-label="Create a link" class="modal hide"><form><div class="modal-body"><label style="display:inline-block;margin-right:15px;"><span>'+(null==(i=n("URL &nbsp;&nbsp;"))?"":i)+'</span><input name="url" placeholder="http://" style="width:350px;"'+e.cls([t+"-modal-url"],[!0])+'/></label></div><div class="modal-footer"><button type="submit" data-modal-close="data-modal-close" style="margin-right:10px;"'+e.cls(["btn","bt3-btn","bt3-btn-primary",t+"-modal-link-submit"],[null,null,null,!0])+">"+e.escape(null==(i=n("Create"))?"":i)+'</button><a data-modal-close="data-modal-close" href="javascript:;">'+e.escape(null==(i=n("Cancel"))?"":i)+"</a></div></form></div>")}.call(this,"prefix"in o?o.prefix:"undefined"!=typeof prefix?prefix:void 0,"_t"in o?o._t:void 0!==t?t:void 0),r.join("")};return function(e){return e&&"_t"in e&&(t=e._t.merge(t)),r(e)}},t=[e("xgPa"),e("f6NP")],void 0===(n=function(e,t){var n;return i(e,t,n)}.apply(exports,t))||(module.exports=n)},zEMx:function(module,exports,e){var t=e("6ilM"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},i=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},zU4u:function(module,exports,e){var t=e("gtDW"),n=t.default?t.default:{},r,i=e("HdzH")(n);i.getLocale=function(){return"en"},module.exports=i}}]);
//# sourceMappingURL=en.24.b6418128a05bbd6de584.js.map